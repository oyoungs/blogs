<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CGOä¸­å¤„ç†Cä¸­çš„å›è°ƒå‡½æ•°</title>
    <url>/2020/09/24/CGO%E4%B8%AD%E5%A4%84%E7%90%86C%E4%B8%AD%E7%9A%84%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h1 id="CGOä¸­å¤„ç†Cä¸­çš„å›è°ƒå‡½æ•°"><a href="#CGOä¸­å¤„ç†Cä¸­çš„å›è°ƒå‡½æ•°" class="headerlink" title="CGOä¸­å¤„ç†Cä¸­çš„å›è°ƒå‡½æ•°"></a>CGOä¸­å¤„ç†Cä¸­çš„å›è°ƒå‡½æ•°</h1><h2 id="å‡è®¾æœ‰ä»¥ä¸‹-Cè¯­è¨€çš„æ¥å£"><a href="#å‡è®¾æœ‰ä»¥ä¸‹-Cè¯­è¨€çš„æ¥å£" class="headerlink" title="å‡è®¾æœ‰ä»¥ä¸‹ Cè¯­è¨€çš„æ¥å£"></a>å‡è®¾æœ‰ä»¥ä¸‹ Cè¯­è¨€çš„æ¥å£</h2><p>api.h</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> API_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> API_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">"C"</span> &#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*IntCallback)</span><span class="params">(<span class="keyword">void</span> *, <span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SetIntCallback</span><span class="params">(IntCallback cb, <span class="keyword">void</span> *data)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DoIntCallback</span><span class="params">(<span class="keyword">int</span> value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><a id="more"></a>


<p>æ­¤æ—¶å¦‚æœæˆ‘ä»¬æƒ³è¦é€šè¿‡CGOæ¥å°†ä¸Šè¿°çš„ä¸¤ä¸ª(å°¤å…¶æ˜¯è®¾ç½®å›è°ƒå‡½æ•°çš„<code>SetIntCallback</code>)å¯¼å…¥åˆ°<code>golang</code>ä¸­æ¥ä½¿ç”¨ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><ul>
<li><code>Cè¯­è¨€</code>ä¸­çš„<code>void *</code>ä¸ <code>GO</code>ä¸­çš„ä»€ä¹ˆç±»å‹å¯¹åº”å‘¢ï¼Ÿ</li>
<li><code>Cè¯­è¨€</code>ä¸­çš„å‡½æ•°æŒ‡é’ˆä¸<code>GO</code>ä¸­çš„å‡½æ•°æ€ä¹ˆå¯¹åº”å‘¢ï¼Ÿ</li>
</ul>
<h2 id="æ€è€ƒç»“æœå¦‚ä¸‹"><a href="#æ€è€ƒç»“æœå¦‚ä¸‹" class="headerlink" title="æ€è€ƒç»“æœå¦‚ä¸‹"></a>æ€è€ƒç»“æœå¦‚ä¸‹</h2><ul>
<li><code>Cè¯­è¨€</code>ä¸­çš„ <code>void *</code>å’Œ <code>Go</code>ä¸­çš„<code>unsafe.Pointer</code>å¯¹åº”</li>
<li><code>Cè¯­è¨€</code>ä¸­çš„å‡½æ•°å’Œ <code>Go</code>ä¸­çš„å‡½æ•°å¯ä»¥é€šè¿‡ <code>//export NAME</code>çš„æ–¹å¼æ¥å»ºç«‹å¯¹åº”å…³ç³»</li>
</ul>
<h2 id="å®é™…æ“ä½œ"><a href="#å®é™…æ“ä½œ" class="headerlink" title="å®é™…æ“ä½œ"></a>å®é™…æ“ä½œ</h2><h3 id="1-å…ˆåœ¨CGOä¸­å£°æ˜ä¸€ä¸‹å›è°ƒå‡½æ•°éœ€è¦ç”¨åˆ°çš„Cå‡½æ•°"><a href="#1-å…ˆåœ¨CGOä¸­å£°æ˜ä¸€ä¸‹å›è°ƒå‡½æ•°éœ€è¦ç”¨åˆ°çš„Cå‡½æ•°" class="headerlink" title="1. å…ˆåœ¨CGOä¸­å£°æ˜ä¸€ä¸‹å›è°ƒå‡½æ•°éœ€è¦ç”¨åˆ°çš„Cå‡½æ•°"></a>1. å…ˆåœ¨<code>CGO</code>ä¸­å£°æ˜ä¸€ä¸‹å›è°ƒå‡½æ•°éœ€è¦ç”¨åˆ°çš„<code>Cå‡½æ•°</code></h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">#include "api.h"</span></span><br><span class="line"><span class="comment">extern void cgoCall(void *, int); // è¿™é‡Œä¸api.hä¸­çš„IntCallbackä¿æŒç±»å‹ä¸€è‡´</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br></pre></td></tr></table></figure>

<h3 id="2-åœ¨Golangä¸­é€šè¿‡-exportæ–¹å¼å®ç°ä¸Šè¿°çš„Cå‡½æ•°"><a href="#2-åœ¨Golangä¸­é€šè¿‡-exportæ–¹å¼å®ç°ä¸Šè¿°çš„Cå‡½æ•°" class="headerlink" title="2. åœ¨Golangä¸­é€šè¿‡ //exportæ–¹å¼å®ç°ä¸Šè¿°çš„Cå‡½æ•°"></a>2. åœ¨<code>Golang</code>ä¸­é€šè¿‡ <code>//export</code>æ–¹å¼å®ç°ä¸Šè¿°çš„<code>Cå‡½æ•°</code></h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­¤å¤„çœç•¥ä¸Šè¿°é‡å¤ä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//export cgoCall</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cgoCall</span><span class="params">(p unsafe.Pointer, number C.<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// <span class="doctag">TODO:</span> è¿™é‡Œå…ˆç•™ç©ºï¼Œæˆ‘ä»¬è¿˜æ²¡ç¡®å®šä¼ è¿›æ¥çš„ pæ˜¯ä»€ä¹ˆå…·ä½“ç±»å‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-åœ¨Golangä¸­å®šä¹‰ä¸€ä¸ªinterfaceæ¥æ¥æ”¶ä¸Šé¢çš„å‡½æ•°é‡Œçš„C-intç±»å‹çš„å‚æ•°"><a href="#3-åœ¨Golangä¸­å®šä¹‰ä¸€ä¸ªinterfaceæ¥æ¥æ”¶ä¸Šé¢çš„å‡½æ•°é‡Œçš„C-intç±»å‹çš„å‚æ•°" class="headerlink" title="3. åœ¨Golangä¸­å®šä¹‰ä¸€ä¸ªinterfaceæ¥æ¥æ”¶ä¸Šé¢çš„å‡½æ•°é‡Œçš„C.intç±»å‹çš„å‚æ•°"></a>3. åœ¨<code>Golang</code>ä¸­å®šä¹‰ä¸€ä¸ª<code>interface</code>æ¥æ¥æ”¶ä¸Šé¢çš„å‡½æ•°é‡Œçš„<code>C.int</code>ç±»å‹çš„å‚æ•°</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­¤å¤„çœç•¥ä¸Šè¿°é‡å¤ä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Caller <span class="keyword">interface</span> &#123;</span><br><span class="line">	Call(<span class="keyword">int</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å°†<code>Callerç±»å‹</code>ä½œä¸º<code>æ­¥éª¤2</code>ä¸­çš„pä¼ è¿›å»ä½œä¸ºå‚æ•°äº†</p>
<h3 id="4-åœ¨å®Œå–„ä¸€ä¸‹æ­¥éª¤2ä¸­çš„cgoCall"><a href="#4-åœ¨å®Œå–„ä¸€ä¸‹æ­¥éª¤2ä¸­çš„cgoCall" class="headerlink" title="4. åœ¨å®Œå–„ä¸€ä¸‹æ­¥éª¤2ä¸­çš„cgoCall"></a>4. åœ¨å®Œå–„ä¸€ä¸‹<code>æ­¥éª¤2</code>ä¸­çš„<code>cgoCall</code></h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­¤å¤„çœç•¥ä¸Šè¿°é‡å¤ä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//export cgoCall</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cgoCall</span><span class="params">(p unsafe.Pointer, number C.<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	caller := *(*Caller)(p)</span><br><span class="line">	caller.Call(<span class="keyword">int</span>(number))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜:<br>æˆ‘ä»¬åœ¨è¿™é‡Œå°†<code>p</code>å‚æ•°è½¬åŒ–ä¸º ä¸€ä¸ª <code>Caller</code>çš„<code>interface</code>ç±»å‹ï¼Œå†è°ƒç”¨ <code>Caller</code>ç±»å‹çš„<code>Call(int)</code>å‡½æ•°ã€‚è¡¨æ˜æˆ‘ä»¬åœ¨è°ƒç”¨ <code>Cè¯­è¨€</code>ä¸­çš„<code>SetIntCallback</code>æ—¶ï¼Œ <code>data</code>å‚æ•°ç»™çš„æ˜¯ä¸€ä¸ª <code>Caller</code>ç±»å‹çš„æŒ‡é’ˆ</p>
<h3 id="5-å®šä¹‰ä¸€ä¸ªå…·ä½“çš„ç±»å‹å®ç°-Calleræ¥å£æµ‹è¯•ä¸€ä¸‹"><a href="#5-å®šä¹‰ä¸€ä¸ªå…·ä½“çš„ç±»å‹å®ç°-Calleræ¥å£æµ‹è¯•ä¸€ä¸‹" class="headerlink" title="5. å®šä¹‰ä¸€ä¸ªå…·ä½“çš„ç±»å‹å®ç° Calleræ¥å£æµ‹è¯•ä¸€ä¸‹"></a>5. å®šä¹‰ä¸€ä¸ªå…·ä½“çš„ç±»å‹å®ç° Calleræ¥å£æµ‹è¯•ä¸€ä¸‹</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­¤å¤„çœç•¥ä¸Šè¿°é‡å¤ä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> OneCaller <span class="keyword">struct</span> &#123;&#125;</span><br><span class="line"><span class="keyword">type</span> AnotherCaller <span class="keyword">struct</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(o OneCaller)</span> <span class="title">Call</span><span class="params">(value <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">"one:"</span>, value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(o AnotherCaller)</span> <span class="title">Call</span><span class="params">(value <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">"another:"</span>, value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SetCallback</span><span class="params">(caller Caller)</span></span> &#123;</span><br><span class="line">	C.SetIntCallback(C.IntCallback(C.cgoCall), unsafe.Pointer(&amp;caller))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoCallback</span><span class="params">(value <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	C.DoIntCallback(C.<span class="keyword">int</span>(value))</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	one := OneCaller &#123;&#125;</span><br><span class="line"></span><br><span class="line">	SetCallback(one)	</span><br><span class="line">	DoCallback(<span class="number">1234</span>)</span><br><span class="line">	another := AnotherCaller &#123;&#125;</span><br><span class="line">	</span><br><span class="line">	SetCallback(another)	</span><br><span class="line">	DoCallback(<span class="number">5678</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®Œæ•´çš„è¿è¡Œæµ‹è¯•ä¸€ä¸‹ï¼Œ å‘ç°å¯ä»¥è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">one: 1234</span><br><span class="line">another: 5678</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸ºäº†ä½¿ç”¨<code>Cè¯­è¨€</code>ä¸­çš„å›è°ƒå‡½æ•°, æˆ‘ä»¬ä½¿ç”¨åˆ°äº†ä»¥ä¸‹æŠ€æœ¯æ¥å®ç°</p>
<ul>
<li>unsafe.Pointerï¼šå°†<code>Go</code>ä¸­çš„æŒ‡é’ˆä¼ å…¥åˆ°<code>Cè¯­è¨€</code>ä¸­çš„ <code>void *</code></li>
<li>//export XXX: åœ¨<code>GO</code> ä¸­å®ç° <code>Cè¯­è¨€</code>ä¸­å£°æ˜çš„å‡½æ•°</li>
<li>é€šè¿‡<code>interface</code>æŠ€æœ¯å°† <code>Cè¯­è¨€</code>ä¸­çš„å›è°ƒå‡½æ•°ç±»å‹ç»‘å®šå®ç°äº†<code>å¤šæ€</code>æˆ–<code>æ³›å‹</code></li>
</ul>
]]></content>
      <tags>
        <tag>CGO</tag>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title>CGO ä¸­å¯¹Cè¯­è¨€çš„void *å’Œvoid **çš„å¤„ç†</title>
    <url>/2020/09/24/CGO-%E4%B8%AD%E5%AF%B9C%E8%AF%AD%E8%A8%80%E7%9A%84void-%E5%92%8Cvoid-%E7%9A%84%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<h1 id="CGO-ä¸­å¯¹Cè¯­è¨€çš„void-å’Œvoid-çš„å¤„ç†"><a href="#CGO-ä¸­å¯¹Cè¯­è¨€çš„void-å’Œvoid-çš„å¤„ç†" class="headerlink" title="CGO ä¸­å¯¹Cè¯­è¨€çš„void *å’Œvoid **çš„å¤„ç†"></a>CGO ä¸­å¯¹Cè¯­è¨€çš„<code>void *</code>å’Œ<code>void **</code>çš„å¤„ç†</h1><h2 id="1-void-ä¸unsafe-Pointer"><a href="#1-void-ä¸unsafe-Pointer" class="headerlink" title="1. void *ä¸unsafe.Pointer"></a>1. <code>void *</code>ä¸<code>unsafe.Pointer</code></h2><ul>
<li>CGOä¸­çš„ <code>unsafe.Pointer</code>ä¸Cè¯­è¨€ä¸­çš„ <code>void *</code>æ˜¯å¯¹åº”çš„</li>
<li><code>Go</code>ä¸­çš„ç»“æ„ä½“å¦‚æœè¦ä¼ å…¥ <code>Cè¯­è¨€</code>çš„æŸä¸ªå‡½æ•°ä½œä¸ºå‚æ•°, å¯ä»¥ä½¿ç”¨ <code>unsafe.Pointer</code>æ¥è½¬åŒ–</li>
</ul><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//å‡è®¾è¿™æ®µå®šä¹‰åœ¨å¤–éƒ¨Cæºç ä¸­å¯¹cgoä¸å¯è§</span></span><br><span class="line"><span class="comment">//typedef struct User &#123;</span></span><br><span class="line"><span class="comment">//	int id;</span></span><br><span class="line"><span class="comment">//	int age;</span></span><br><span class="line"><span class="comment">//	int number;</span></span><br><span class="line"><span class="comment">//&#125; User;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">static void User_SetId(void *user, int id) &#123;</span></span><br><span class="line"><span class="comment">	((User *)user)-&gt;id = id;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">static void User_SetAge(void *user, int age) &#123;</span></span><br><span class="line"><span class="comment">	((User *)user)-&gt;age = age;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">static void User_SetNumber(void *user, int number) &#123;</span></span><br><span class="line"><span class="comment">	((User *)user)-&gt;number = number;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"unsafe"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id <span class="keyword">int32</span></span><br><span class="line">	Age <span class="keyword">int32</span></span><br><span class="line">	Number <span class="keyword">int32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user User</span><br><span class="line"></span><br><span class="line">	pointer := unsafe.Pointer(&amp;user)</span><br><span class="line"></span><br><span class="line">	C.User_SetId(pointer, C.<span class="keyword">int</span>(<span class="number">1</span>))</span><br><span class="line">	C.User_setAge(pointer, C.<span class="keyword">int</span>(<span class="number">25</span>))</span><br><span class="line">	C.User_setNumber(pointer, C.<span class="keyword">int</span>(<span class="number">10001</span>))</span><br><span class="line"></span><br><span class="line">	fmt.Println(user)	</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>


<h2 id="2-å¯¹åº”çš„-void-åªéœ€è¦åœ¨ç°æœ‰çš„-void-ç±»å‹-CGOä¸­çš„unsafe-Pointer-çš„å¯¹è±¡ä¸Šå–åœ°å€å°±å¯ä»¥äº†"><a href="#2-å¯¹åº”çš„-void-åªéœ€è¦åœ¨ç°æœ‰çš„-void-ç±»å‹-CGOä¸­çš„unsafe-Pointer-çš„å¯¹è±¡ä¸Šå–åœ°å€å°±å¯ä»¥äº†" class="headerlink" title="2. å¯¹åº”çš„ void **åªéœ€è¦åœ¨ç°æœ‰çš„ void *ç±»å‹(CGOä¸­çš„unsafe.Pointer)çš„å¯¹è±¡ä¸Šå–åœ°å€å°±å¯ä»¥äº†"></a>2. å¯¹åº”çš„ <code>void **</code>åªéœ€è¦åœ¨ç°æœ‰çš„ <code>void *</code>ç±»å‹(CGOä¸­çš„<code>unsafe.Pointer</code>)çš„å¯¹è±¡ä¸Šå–åœ°å€å°±å¯ä»¥äº†</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">typedef struct User &#123;</span></span><br><span class="line"><span class="comment">	int id;</span></span><br><span class="line"><span class="comment">	int age;</span></span><br><span class="line"><span class="comment">	int number;</span></span><br><span class="line"><span class="comment">&#125; User;</span></span><br><span class="line"><span class="comment">static void createUser(void **pUser) &#123;</span></span><br><span class="line"><span class="comment">	if(pUser) *pUser = malloc(sizeof(User))</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"unsafe"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User C.User</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	pointer := unsafe.Pointer(<span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">	C.createUser(&amp;pointer)</span><br><span class="line"></span><br><span class="line">	user := (*User)(pointer)</span><br><span class="line"></span><br><span class="line">	fmt.Println(user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>CGO</tag>
      </tags>
  </entry>
  <entry>
    <title>CGOä¸­çš„ä¸€äº›ä½¿ç”¨æ³¨æ„äº‹é¡¹</title>
    <url>/2020/09/24/CGO%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</url>
    <content><![CDATA[<h1 id="CGOä¸­çš„ä¸€äº›ä½¿ç”¨æ³¨æ„äº‹é¡¹"><a href="#CGOä¸­çš„ä¸€äº›ä½¿ç”¨æ³¨æ„äº‹é¡¹" class="headerlink" title="CGOä¸­çš„ä¸€äº›ä½¿ç”¨æ³¨æ„äº‹é¡¹"></a>CGOä¸­çš„ä¸€äº›ä½¿ç”¨æ³¨æ„äº‹é¡¹</h1><h2 id="1-CGOä¸­çš„å†…å®¹å¿…é¡»ç´§æŒ¨ç€import-quot-C-quot-ä¸­é—´ä¸å¾—æœ‰å…¶ä»–import"><a href="#1-CGOä¸­çš„å†…å®¹å¿…é¡»ç´§æŒ¨ç€import-quot-C-quot-ä¸­é—´ä¸å¾—æœ‰å…¶ä»–import" class="headerlink" title="1. CGOä¸­çš„å†…å®¹å¿…é¡»ç´§æŒ¨ç€import &quot;C&quot;, ä¸­é—´ä¸å¾—æœ‰å…¶ä»–import"></a>1. CGOä¸­çš„å†…å®¹å¿…é¡»ç´§æŒ¨ç€<code>import &quot;C&quot;</code>, ä¸­é—´ä¸å¾—æœ‰å…¶ä»–<code>import</code></h2><ul>
<li>é”™è¯¯ç¤ºèŒƒ</li>
</ul><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">// #include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"> fmt.Println(C.puts(C.CString(<span class="string">"è¿™æ˜¯ä¸€ä¸ªgolangå­—ç¬¦ä¸²"</span>)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>


<ul>
<li>åº”è¯¥æ”¹ä¸º</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">// #include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"> fmt.Println(C.puts(C.CString(<span class="string">"è¿™æ˜¯ä¸€ä¸ªgolangå­—ç¬¦ä¸²"</span>)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-import-â€œCâ€å‰é¢çš„æ³¨é‡Šä¸import-â€œCâ€ä¹‹é—´ä¸å¾—æœ‰ç©ºè¡Œ"><a href="#2-import-â€œCâ€å‰é¢çš„æ³¨é‡Šä¸import-â€œCâ€ä¹‹é—´ä¸å¾—æœ‰ç©ºè¡Œ" class="headerlink" title="2. import â€œCâ€å‰é¢çš„æ³¨é‡Šä¸import â€œCâ€ä¹‹é—´ä¸å¾—æœ‰ç©ºè¡Œ"></a>2. import â€œCâ€å‰é¢çš„æ³¨é‡Šä¸import â€œCâ€ä¹‹é—´ä¸å¾—æœ‰ç©ºè¡Œ</h2><ul>
<li>é”™è¯¯ç¤ºèŒƒ</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">// #include &lt;stdio.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"> fmt.Println(C.puts(C.CString(<span class="string">"è¿™æ˜¯ä¸€ä¸ªgolangå­—ç¬¦ä¸²"</span>)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ­£ç¡®åº”ä¸º</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">// #include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"> fmt.Println(C.puts(C.CString(<span class="string">"è¿™æ˜¯ä¸€ä¸ªgolangå­—ç¬¦ä¸²"</span>)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-goä¸­æ— æ³•ç›´æ¥ä½¿ç”¨Cè¯­è¨€å¤´æ–‡ä»¶ä¸­çš„-enum-structå’Œunion-éœ€è¦ä½¿ç”¨æ—¶ï¼Œéœ€è¦å¯¹ç›¸å…³çš„ç±»å‹è¿›è¡Œ-typedefé‡å®šä¹‰"><a href="#3-goä¸­æ— æ³•ç›´æ¥ä½¿ç”¨Cè¯­è¨€å¤´æ–‡ä»¶ä¸­çš„-enum-structå’Œunion-éœ€è¦ä½¿ç”¨æ—¶ï¼Œéœ€è¦å¯¹ç›¸å…³çš„ç±»å‹è¿›è¡Œ-typedefé‡å®šä¹‰" class="headerlink" title="3. goä¸­æ— æ³•ç›´æ¥ä½¿ç”¨Cè¯­è¨€å¤´æ–‡ä»¶ä¸­çš„ enum,structå’Œunion, éœ€è¦ä½¿ç”¨æ—¶ï¼Œéœ€è¦å¯¹ç›¸å…³çš„ç±»å‹è¿›è¡Œ typedefé‡å®šä¹‰"></a>3. goä¸­æ— æ³•ç›´æ¥ä½¿ç”¨Cè¯­è¨€å¤´æ–‡ä»¶ä¸­çš„ <code>enum</code>,<code>struct</code>å’Œ<code>union</code>, éœ€è¦ä½¿ç”¨æ—¶ï¼Œéœ€è¦å¯¹ç›¸å…³çš„ç±»å‹è¿›è¡Œ <code>typedef</code>é‡å®šä¹‰</h2><ul>
<li>é”™è¯¯ç¤ºèŒƒ</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">enum CEnum &#123;</span></span><br><span class="line"><span class="comment"> zero,</span></span><br><span class="line"><span class="comment"> one,</span></span><br><span class="line"><span class="comment"> two,</span></span><br><span class="line"><span class="comment"> three</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">struct CStruct &#123;</span></span><br><span class="line"><span class="comment"> int number;</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"> <span class="keyword">var</span> cenum C.CEnum = C.zero</span><br><span class="line"> <span class="keyword">var</span> cstruct C.CStruct</span><br><span class="line"> fmt.Println(cenum, cstruct.number)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ­£ç¡®åº”ä¸º</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">typedef enum CEnum &#123;</span></span><br><span class="line"><span class="comment">	zero,</span></span><br><span class="line"><span class="comment">	one,</span></span><br><span class="line"><span class="comment">	two,</span></span><br><span class="line"><span class="comment">	three</span></span><br><span class="line"><span class="comment">&#125; CEnum;</span></span><br><span class="line"><span class="comment">typedef struct CStruct &#123;</span></span><br><span class="line"><span class="comment">	int number;</span></span><br><span class="line"><span class="comment">&#125; CStruct;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> cenum C.CEnum = C.zero</span><br><span class="line">	<span class="keyword">var</span> cstruct C.CStruct</span><br><span class="line">	fmt.Println(cenum, cstruct.number)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-Cä¸­çš„unionåœ¨CGOé‡Œé¢è¡¨ç°ä¸º-N-byteç±»å‹-å…¶ä¸­Nä¸ºè¯¥unionç±»å‹å ç”¨çš„æœ€å¤§å­—èŠ‚æ•°"><a href="#4-Cä¸­çš„unionåœ¨CGOé‡Œé¢è¡¨ç°ä¸º-N-byteç±»å‹-å…¶ä¸­Nä¸ºè¯¥unionç±»å‹å ç”¨çš„æœ€å¤§å­—èŠ‚æ•°" class="headerlink" title="4. Cä¸­çš„unionåœ¨CGOé‡Œé¢è¡¨ç°ä¸º[N]byteç±»å‹(å…¶ä¸­Nä¸ºè¯¥unionç±»å‹å ç”¨çš„æœ€å¤§å­—èŠ‚æ•°)"></a>4. Cä¸­çš„unionåœ¨CGOé‡Œé¢è¡¨ç°ä¸º<code>[N]byte</code>ç±»å‹(å…¶ä¸­Nä¸ºè¯¥unionç±»å‹å ç”¨çš„æœ€å¤§å­—èŠ‚æ•°)</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">typedef union Val &#123;</span></span><br><span class="line"><span class="comment">	int i;</span></span><br><span class="line"><span class="comment">	float f;</span></span><br><span class="line"><span class="comment">	double d;</span></span><br><span class="line"><span class="comment">&#125; Val;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> value = C.Val &#123;<span class="number">100</span>&#125;</span><br><span class="line">	<span class="built_in">println</span>(<span class="built_in">len</span>(value), value[<span class="number">0</span>]) <span class="comment">// 8 100</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>C++å°æŠ€å·§: é›†åˆ(vector, list, map, set)çš„åå‘éå†</title>
    <url>/2020/09/24/C-%E5%B0%8F%E6%8A%80%E5%B7%A7-%E9%9B%86%E5%90%88-vector-list-map-set-%E7%9A%84%E5%8F%8D%E5%90%91%E9%81%8D%E5%8E%86/</url>
    <content><![CDATA[<h1 id="ä¸€èˆ¬çš„æ­£å‘é›†åˆéå†"><a href="#ä¸€èˆ¬çš„æ­£å‘é›†åˆéå†" class="headerlink" title="ä¸€èˆ¬çš„æ­£å‘é›†åˆéå†"></a>ä¸€èˆ¬çš„æ­£å‘é›†åˆéå†</h1><h2 id="for-index-sizeæ¨¡å¼"><a href="#for-index-sizeæ¨¡å¼" class="headerlink" title="for/index/sizeæ¨¡å¼"></a>for/index/sizeæ¨¡å¼</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; collection.size(); ++i) &#123;</span><br><span class="line"> <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; collection[i] &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¼Šç«¯</strong>: åªé€‚åˆ<code>std::vector</code>è¿™ç§å¯ä»¥é€šè¿‡ä¸‹æ ‡éšæœºO(1)æ—¶é—´è®¿é—®çš„é›†åˆç±»å‹</p><a id="more"></a>


<h2 id="for-begin-end-æ¨¡å¼"><a href="#for-begin-end-æ¨¡å¼" class="headerlink" title="for/begin/end æ¨¡å¼"></a>for/begin/end æ¨¡å¼</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it = collection.begin(); it != collection.end(); ++it) &#123;</span><br><span class="line"> <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *it &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"> <span class="comment">// std::cout &lt;&lt; it-&gt;first &lt;&lt; ", " &lt;&lt; it-&gt;second &lt;&lt; std::endl;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§é€‚åˆå¤§å¤šæ•°çš„é›†åˆéå†æ¨¡å¼</p>
<h2 id="for-in-æ¨¡å¼-for-begin-endæ¨¡å¼çš„ç²¾ç®€ç‰ˆ"><a href="#for-in-æ¨¡å¼-for-begin-endæ¨¡å¼çš„ç²¾ç®€ç‰ˆ" class="headerlink" title="for/in æ¨¡å¼(for/begin/endæ¨¡å¼çš„ç²¾ç®€ç‰ˆ)"></a>for/in æ¨¡å¼(<code>for/begin/end</code>æ¨¡å¼çš„ç²¾ç®€ç‰ˆ)</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span>&amp; item: collection) &#123;</span><br><span class="line"> <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; item &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"> <span class="comment">// std::cout &lt;&lt; item.first &lt;&lt; ", " &lt;&lt; item.second &lt;&lt; std::endl;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¿™ç§å†™æ³•å±äº<code>C++11</code>å¼€å§‹å‡ºç°çš„è¯­æ³•ç³–ï¼Œåªè¦é›†åˆ(åŒ…æ‹¬æ ‡å‡†åº“çš„é›†åˆå’Œç”¨æˆ·è‡ªå®šä¹‰çš„é›†åˆç”šè‡³ä¼ªé›†åˆ)èƒ½ä½¿ç”¨<code>for/begin/endæ¨¡å¼</code>çš„éå†æ–¹å¼å°±èƒ½ä½¿ç”¨è¿™ç§è¯­æ³•ç³–æ¨¡å¼</strong></p>
<h1 id="å¦‚æœæƒ³åå‘éå†æ€ä¹ˆåŠ"><a href="#å¦‚æœæƒ³åå‘éå†æ€ä¹ˆåŠ" class="headerlink" title="å¦‚æœæƒ³åå‘éå†æ€ä¹ˆåŠ"></a>å¦‚æœæƒ³åå‘éå†æ€ä¹ˆåŠ</h1><h2 id="å¯èƒ½çš„æ€è·¯"><a href="#å¯èƒ½çš„æ€è·¯" class="headerlink" title="å¯èƒ½çš„æ€è·¯"></a>å¯èƒ½çš„æ€è·¯</h2><ul>
<li>å°†é›†åˆå…ˆåè½¬å†éå†ï¼šå¯èƒ½é›†åˆè¢«é™åˆ¶ä¸ºå¸¸é‡ä¸å¯åè½¬è‡ªèº«ï¼Œå—é™</li>
<li>å°†é›†åˆåå‘æ‹·è´å†éå†: é›†åˆæ•°é‡æ¯”è¾ƒåºå¤§æ—¶ï¼Œä¼šå ç”¨å¤§é‡å†…å­˜ï¼Œæ…ç”¨</li>
<li>åå‘è¿­ä»£å™¨(rbegin+rend): æˆ‘è§‰å¾—å¯ä»¥ï¼Œæ¨è</li>
</ul>
<h2 id="åå‘è¿­ä»£å™¨"><a href="#åå‘è¿­ä»£å™¨" class="headerlink" title="åå‘è¿­ä»£å™¨"></a>åå‘è¿­ä»£å™¨</h2><p>ç¤ºä¾‹ä»£ç :</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it = collection.rbegin(); it != collection.rend(); ++it) &#123;</span><br><span class="line"> <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *it &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"> <span class="comment">// std::cout &lt;&lt; it-&gt;first &lt;&lt; ", " &lt;&lt; it-&gt;second &lt;&lt; std::endl;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å®ç”¨æ³•å’Œ<code>for/begin/endæ¨¡å¼</code>å‡ ä¹ä¸€æ ·ï¼Œåªæ˜¯éœ€è¦ä½¿ç”¨<code>rbegin</code>å’Œ<code>rend</code>æ¥ä»£æ›¿<code>begin</code>å’Œ<code>end</code>, <code>rbegin()</code>è¡¨ç¤ºåå‘è¿­ä»£å™¨çš„å¼€å§‹, ä¹Ÿå°±æ˜¯æ­£å‘çš„æœ«å°¾, <code>rend()</code>è¡¨ç¤ºåå‘è¿­ä»£å™¨çš„æœ«å°¾ä¹Ÿå°±æ˜¯æ­£å‘è¿­ä»£å™¨çš„å¼€å§‹</p>
<h2 id="èƒ½ä¸èƒ½ä½¿ç”¨è¯­æ³•ç³–"><a href="#èƒ½ä¸èƒ½ä½¿ç”¨è¯­æ³•ç³–" class="headerlink" title="èƒ½ä¸èƒ½ä½¿ç”¨è¯­æ³•ç³–"></a>èƒ½ä¸èƒ½ä½¿ç”¨è¯­æ³•ç³–</h2><p>ç›´æ¥ä½¿ç”¨å½“ç„¶ä¸è¡Œï¼Œä½†å¹¶ä¸è¡¨ç¤ºæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨</p>
<p>å›æƒ³ä¸‹ä¸Šé¢çš„ä¸€å¥å¾ˆå…³é”®çš„è¯: <code>åªè¦é›†åˆ(åŒ…æ‹¬æ ‡å‡†åº“çš„é›†åˆå’Œç”¨æˆ·è‡ªå®šä¹‰çš„é›†åˆç”šè‡³ä¼ªé›†åˆ)èƒ½ä½¿ç”¨(for/begin/endæ¨¡å¼)çš„éå†æ–¹å¼å°±èƒ½ä½¿ç”¨è¿™ç§è¯­æ³•ç³–æ¨¡å¼</code></p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>æŠŠå½“å‰é›†åˆ<code>rbegin</code>å’Œ<code>rend</code>æ¥å£è°ƒç”¨è½¬æ¢æˆå¦å¤–ä¸€ä¸ªå¯¹è±¡çš„ <code>begin()</code>å’Œ<code>end()</code>æ¥å£è°ƒç”¨ï¼Œ å¹¶ä¸”è¿”å›çš„è¿­ä»£å™¨æ˜¯ä¸å˜çš„</p>
<h2 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h2><h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> oyoung &#123;</span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">CollectionReverse</span> &#123;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">using</span> iterator = <span class="keyword">typename</span> T::reverse_iterator;</span><br><span class="line">        <span class="keyword">using</span> const_iterator = <span class="keyword">typename</span> T::const_reverse_iterator;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">CollectionReverse</span><span class="params">(T&amp; col)</span></span></span><br><span class="line">            : _M_collection(col) &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">iterator <span class="title">begin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _M_collection.rbegin();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">const_iterator <span class="title">begin</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _M_collection.rbegin();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">iterator <span class="title">end</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _M_collection.rend();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">const_iterator <span class="title">end</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _M_collection.rend();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        T &amp; _M_collection;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">    CollectionReverse&lt;T&gt; reverse(T&amp; col) &#123;</span><br><span class="line">        <span class="keyword">return</span> CollectionReverse&lt;T&gt;(col);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¦‚ä½•ä½¿ç”¨å‘¢"><a href="#å¦‚ä½•ä½¿ç”¨å‘¢" class="headerlink" title="å¦‚ä½•ä½¿ç”¨å‘¢?"></a>å¦‚ä½•ä½¿ç”¨å‘¢?</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vi &#123;<span class="number">0</span>,<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt; li &#123;<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">15</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; mii &#123;</span><br><span class="line">        &#123;<span class="number">0</span>, <span class="number">10</span>&#125;, &#123;<span class="number">1</span>, <span class="number">11</span>&#125;, &#123;<span class="number">2</span>, <span class="number">12</span>&#125;, &#123;<span class="number">3</span>, <span class="number">13</span>&#125;, &#123;<span class="number">4</span>,<span class="number">14</span>&#125;, &#123;<span class="number">5</span>,<span class="number">15</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; si &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"reversed vector: "</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i: oyoung::reverse(vi)) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"reversed list: "</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i: oyoung::reverse(li)) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"reversed map: "</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> pair: oyoung::reverse(mii)) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">'('</span> &lt;&lt; pair.first &lt;&lt; <span class="string">": "</span> &lt;&lt; pair.second &lt;&lt; <span class="string">"),"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"reversed set: "</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i: oyoung::reverse(si)) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¯¹ä¸å¯¹å‘¢ï¼Ÿ ğŸ˜‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">reversed vector: 5 4 3 2 1 0</span><br><span class="line">reversed list: 15 14 12 12 11 10</span><br><span class="line">reversed map: (5: 15),(4: 14),(3: 13),(2: 12),(1: 11),(0: 10),</span><br><span class="line">reversed <span class="built_in">set</span>: 5 4 3 2 1 0</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>C++</tag>
        <tag>é›†åˆ</tag>
        <tag>éå†</tag>
      </tags>
  </entry>
  <entry>
    <title>Swiftå­¦ä¹ ç¬”è®°ä¹‹[UInt8]/[Int8]é‚£äº›äº‹</title>
    <url>/2020/07/28/Swift%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B-UInt8-%E9%82%A3%E4%BA%9B%E4%BA%8B/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p><code>[UInt8]</code>æ˜¯Swiftä¸­çš„æ•°ç»„ç±»å‹ï¼Œä¹Ÿæ˜¯ä½œç”¨æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ç§æ•°ç»„ç±»å‹, å¸¸ç”¨äºåº•å±‚äº¤äº’ä¸å†…å­˜æ“ä½œä¸ç®¡ç†ã€‚å¦‚: å­—ç¬¦ä¸²ç¼–è§£ç , å……å½“å­—èŠ‚ç¼“å†²åŒºç­‰ç­‰</p><h1 id="å­—ç¬¦ä¸²ç¼–è§£ç "><a href="#å­—ç¬¦ä¸²ç¼–è§£ç " class="headerlink" title="å­—ç¬¦ä¸²ç¼–è§£ç "></a>å­—ç¬¦ä¸²ç¼–è§£ç </h1><ul>
<li><code>[UInt8]</code>ï¼ˆæˆ–<code>[Int8]</code>ï¼‰è½¬ <code>String</code></li>
</ul><p><strong>Stringæœ‰å¯¹åº”çš„ç›´æ¥ä»<code>[UInt8]</code>æˆ–<code>[Int8]</code>è½¬æ¢æˆStringçš„æ„é€ å‡½æ•°</strong></p><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// "è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²" çš„utf8ç¼–ç </span></span><br><span class="line"><span class="keyword">let</span> bytes: [<span class="type">UInt8</span>] = [<span class="number">232</span>, <span class="number">191</span>, <span class="number">153</span>, <span class="number">230</span>, <span class="number">152</span>, <span class="number">175</span>, <span class="number">228</span>, <span class="number">184</span>, <span class="number">128</span>, <span class="number">228</span>, <span class="number">184</span>, <span class="number">170</span>, <span class="number">229</span>, <span class="number">173</span>, <span class="number">151</span>, <span class="number">231</span>, <span class="number">172</span>, <span class="number">166</span>, <span class="number">228</span>, <span class="number">184</span>, <span class="number">178</span>]</span><br><span class="line"><span class="comment">/// è½¬æ¢æˆå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> msg = <span class="type">String</span>(bytes: bytes, encoding: .utf8) &#123;</span><br><span class="line">	<span class="built_in">print</span>(msg)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>






<ul>
<li><code>String</code> è½¬ <code>[UInt8]</code>(æˆ–<code>[Int8]</code>ï¼‰</li>
</ul>
<p><strong><code>String</code>è½¬<code>[UInt8]</code>æˆ–<code>[Int8]</code>æ—¶éœ€è¦å€ŸåŠ©ä¸­é—´è§’è‰²Data</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> msg = <span class="string">"è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> data = msg.data(using: .utf8) &#123;</span><br><span class="line">  <span class="keyword">let</span> bytes = [<span class="type">UInt8</span>](data)</span><br><span class="line">  <span class="built_in">print</span>(bytes)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="åº•å±‚äº¤äº’"><a href="#åº•å±‚äº¤äº’" class="headerlink" title="åº•å±‚äº¤äº’"></a>åº•å±‚äº¤äº’</h1><h2 id="1-è½¬æ¢åˆ°Cè¯­è¨€ä¸­çš„const-char-char-void-const-void"><a href="#1-è½¬æ¢åˆ°Cè¯­è¨€ä¸­çš„const-char-char-void-const-void" class="headerlink" title="1. è½¬æ¢åˆ°Cè¯­è¨€ä¸­çš„const char*, char*, void*,const void*"></a>1. è½¬æ¢åˆ°Cè¯­è¨€ä¸­çš„<code>const char*</code>, <code>char*</code>, <code>void*</code>,<code>const void*</code></h2><p><strong>è¿™é‡Œçš„è½¬æ¢æŒ‡çš„æ˜¯ä½¿ç”¨åŒä¸€å—å†…å­˜åœ°å€</strong></p>
<h3 id="æŒ‡é’ˆç±»å‹å¯¹åº”å…³ç³»"><a href="#æŒ‡é’ˆç±»å‹å¯¹åº”å…³ç³»" class="headerlink" title="æŒ‡é’ˆç±»å‹å¯¹åº”å…³ç³»"></a>æŒ‡é’ˆç±»å‹å¯¹åº”å…³ç³»</h3><table>
<thead>
<tr>
<th align="left">Cè¯­è¨€æŒ‡é’ˆç±»å‹</th>
<th align="left">swiftè¯­è¨€æŒ‡é’ˆå¯¹è±¡ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">char *</td>
<td align="left"><strong>UnsafeMutablePointer&lt;Int8&gt;</strong></td>
</tr>
<tr>
<td align="left">const char *</td>
<td align="left"><strong>UnsafePointer&lt;Int8&gt;</strong></td>
</tr>
<tr>
<td align="left">unsigned char *</td>
<td align="left"><strong>UnsafeMutablePointer&lt;UInt8&gt;</strong></td>
</tr>
<tr>
<td align="left">const unsigned char *</td>
<td align="left"><strong>UnsafePointer&lt;UInt8&gt;</strong></td>
</tr>
<tr>
<td align="left">void *</td>
<td align="left"><strong>UnsafeMutableRawPointer</strong></td>
</tr>
<tr>
<td align="left">const void *</td>
<td align="left"><strong>UnsafeRawPointer</strong></td>
</tr>
</tbody></table>
<h3 id="å‡ ç§ç‰¹æ®Šçš„æŒ‡é’ˆç±»å‹"><a href="#å‡ ç§ç‰¹æ®Šçš„æŒ‡é’ˆç±»å‹" class="headerlink" title="å‡ ç§ç‰¹æ®Šçš„æŒ‡é’ˆç±»å‹"></a>å‡ ç§ç‰¹æ®Šçš„æŒ‡é’ˆç±»å‹</h3><ul>
<li><strong>UnsafeRawBufferPointer</strong></li>
<li><strong>UnsafeMutableRawBufferPointer</strong></li>
<li><strong>UnsafeBufferPointer</strong>&lt;<strong>T</strong>&gt;</li>
<li><strong>UnsafeMutableBufferPointer</strong>&lt;<strong>T</strong>&gt;</li>
</ul>
<p><strong>è¿™äº›å¸¦æœ‰Bufferçš„æŒ‡é’ˆç±»å‹ï¼Œ å¯ä»¥ç†è§£ä¸ºå¯¹åº”çš„ä¸å¸¦Bufferçš„æŒ‡é’ˆç±»å‹åŠ ä¸Šäº†ç¼“å†²åŒºå¤§å°</strong>, æ¯”å¦‚:</p>
<blockquote>
<p>UnsafePointer&lt;Int&gt; å¯¹åº” const int *, è¡¨ç¤ºä»…æœ‰åœ°å€</p>
<p>é‚£UnsafeBufferPointer&lt;Int&gt;å¯¹åº” const int * åŠ  size, è¡¨ç¤ºè¯¥åœ°å€ä¸å†…å­˜å¤§å°æ‰€å¯¹åº”çš„ä¸€å—ç¼“å†²åŒº</p>
</blockquote>
<h3 id="ä»-UInt8-æˆ–-Int8-è½¬æ¢åˆ°-const-unsigned-char-æˆ–-const-char"><a href="#ä»-UInt8-æˆ–-Int8-è½¬æ¢åˆ°-const-unsigned-char-æˆ–-const-char" class="headerlink" title="ä»[UInt8]æˆ–[Int8] è½¬æ¢åˆ° const unsigned char*æˆ– const char *"></a>ä»<code>[UInt8]</code>æˆ–<code>[Int8]</code> è½¬æ¢åˆ° <code>const unsigned char*</code>æˆ– <code>const char *</code></h3><p><code>[UInt8]</code> -&gt; <code>UnsafeRawBufferPointer</code> -&gt; <code>UnsafeBufferPointer&lt;UInt8&gt;</code> -&gt; <code>UnsafePointer&lt;UInt8&gt;</code> (<strong>Int8åŒç†</strong>)</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// 0. åŸå§‹å­—èŠ‚æ•°æ® 8å­—èŠ‚</span></span><br><span class="line"><span class="keyword">let</span> buffer = [<span class="type">UInt8</span>](repeating: <span class="number">0</span>, <span class="built_in">count</span>: <span class="number">8</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">/// 1. [UInt8] -&gt; UnsafeRawBufferPointer</span></span><br><span class="line"><span class="keyword">let</span> unsafeRawBufferPointer = buffer.withUnsafeBytes &#123; $<span class="number">0</span> &#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">/// 2. UnsafeRawBufferPointer -&gt; UnsafeBufferPointer&lt;UInt8&gt;</span></span><br><span class="line"><span class="keyword">let</span> unsafeBufferPointer = unsafeRawBufferPointer.bindMemory(to: <span class="type">UInt8</span>.<span class="keyword">self</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 3. UnsafeBufferPointer&lt;UInt8&gt; -&gt; UnsafePointer&lt;UInt8&gt;</span></span><br><span class="line"><span class="keyword">let</span> unsafePointer = unsafeBufferPointer.baseAddress</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ <code>æ­¥éª¤1</code>å’Œ<code>æ­¥éª¤2</code>å¯ä»¥åˆå¹¶</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// 0. åŸå§‹å­—èŠ‚æ•°æ® 8å­—èŠ‚</span></span><br><span class="line"><span class="keyword">let</span> buffer = [<span class="type">UInt8</span>](repeating: <span class="number">0</span>, <span class="built_in">count</span>: <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 1. [UInt8] -&gt; UnsafeBufferPointer&lt;UInt8&gt;</span></span><br><span class="line"><span class="keyword">let</span> unsafeBufferPointer = buffer.withUnsafeBufferPointer &#123;$<span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 2.. UnsafeBufferPointer&lt;UInt8&gt; -&gt; UnsafePointer&lt;UInt8&gt;</span></span><br><span class="line"><span class="keyword">let</span> unsafePointer = unsafeBufferPointer.baseAddress</span><br></pre></td></tr></table></figure>



<h3 id="ä»-UInt8-æˆ–-Int8-è½¬æ¢åˆ°-unsigned-char-æˆ–-char"><a href="#ä»-UInt8-æˆ–-Int8-è½¬æ¢åˆ°-unsigned-char-æˆ–-char" class="headerlink" title="ä»[UInt8]æˆ–[Int8]è½¬æ¢åˆ° unsigned char *æˆ– char *"></a>ä»<code>[UInt8]</code>æˆ–<code>[Int8]</code>è½¬æ¢åˆ° <code>unsigned char *</code>æˆ– <code>char *</code></h3><p><code>[UInt8]</code> -&gt; <code>UnsafeMutableRawBufferPointer</code> -&gt; <code>UnsafeMutableBufferPointer&lt;UInt8&gt;</code> -&gt; <code>UnsafeMutablePointer&lt;UInt8&gt;</code> (<strong>Int8åŒç†</strong>)</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// 0. åŸå§‹å­—èŠ‚æ•°æ® 8å­—èŠ‚</span></span><br><span class="line"><span class="keyword">var</span> buffer = [<span class="type">UInt8</span>](repeating: <span class="number">0</span>, <span class="built_in">count</span>: <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 1. [UInt8] -&gt; UnsafeMutableRawBufferPointer</span></span><br><span class="line"><span class="keyword">let</span> unsafeMutableRawBufferPointer = buffer.withUnsafeMutableBytes &#123; $<span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 2. UnsafeMutableRawBufferPointer -&gt; UnsafeMutableBufferPointer&lt;UInt8&gt;</span></span><br><span class="line"><span class="keyword">let</span> unsafeMutableBufferPointer = unsafeMutableRawBufferPointer.bindMemory(to: <span class="type">UInt8</span>.<span class="keyword">self</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 3. UnsafeMutableBufferPointer&lt;UInt8&gt; -&gt; UnsafeMutablePointer&lt;UInt8&gt;</span></span><br><span class="line"><span class="keyword">let</span> unsafeMutablePointer = unsafeMutableBufferPointer.baseAddress</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­çš„æ­¥éª¤1å’Œæ­¥éª¤2ä¹Ÿæ˜¯å¯ä»¥åˆå¹¶çš„</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// [UInt8] -&gt; UnsafeMutableBufferPointer&lt;UInt8&gt;</span></span><br><span class="line"><span class="keyword">let</span> unsafeMutableBufferPointer = buffer.withUnsafeMutableBufferPointer &#123;$<span class="number">0</span> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä»-UInt8-æˆ–-Int8-è½¬æ¢æˆconst-void-æˆ–è€…void"><a href="#ä»-UInt8-æˆ–-Int8-è½¬æ¢æˆconst-void-æˆ–è€…void" class="headerlink" title="ä»[UInt8]æˆ–[Int8]è½¬æ¢æˆconst void *æˆ–è€…void *"></a>ä»<code>[UInt8]</code>æˆ–<code>[Int8]</code>è½¬æ¢æˆ<code>const void *</code>æˆ–è€…<code>void *</code></h3><p>åœ¨ä¸Šè¿°çš„æ­¥éª¤é‡Œ, åœ¨<code>æ­¥éª¤1</code>å¾—åˆ°çš„<code>unsafeMutableRawBufferPointer</code>å°±å¯ä»¥é€šè¿‡è¯¥å¯¹è±¡çš„<code>baseAddress</code>å­—æ®µå°±èƒ½è·å–åˆ°å¯¹åº”çš„<code>void *</code></p>
<p>å¦‚:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// è·å– const void *</span></span><br><span class="line"><span class="keyword">let</span> unsafeRawPointer = unsafeRawBufferPointer.baseAddress</span><br><span class="line"></span><br><span class="line"><span class="comment">/// è·å–void *</span></span><br><span class="line"><span class="keyword">let</span> unsafeMutableRawPointer = unsafeMutableRawBufferPointer.baseAddress</span><br></pre></td></tr></table></figure>



<h2 id="2-ä»Cè¯­è¨€ä¸­çš„const-char-char-const-unsigned-char-unsigned-char-const-void-void-å¯¹åº”ç¼“å†²åŒºçš„æ•°æ®åˆ›å»º-Data"><a href="#2-ä»Cè¯­è¨€ä¸­çš„const-char-char-const-unsigned-char-unsigned-char-const-void-void-å¯¹åº”ç¼“å†²åŒºçš„æ•°æ®åˆ›å»º-Data" class="headerlink" title="2. ä»Cè¯­è¨€ä¸­çš„const char * , char *, const unsigned char *, unsigned char *, const void *, void *å¯¹åº”ç¼“å†²åŒºçš„æ•°æ®åˆ›å»º Data"></a>2. ä»Cè¯­è¨€ä¸­çš„const char * , char *, const unsigned char *, unsigned char *, const void *, void *å¯¹åº”ç¼“å†²åŒºçš„æ•°æ®åˆ›å»º Data</h2><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// è¿™é‡Œæ˜¯ç¤ºä¾‹ï¼Œ ç±»å‹ä¸º UnsafeMutablePointer&lt;Int8&gt;ï¼Œ ä¹Ÿå°±æ˜¯ char *</span></span><br><span class="line"><span class="comment">/// messageå¯èƒ½æ¥è‡ªä»»ä½•Cè¯­è¨€çš„æ¥å£</span></span><br><span class="line"><span class="keyword">let</span> message = strerror(errno) </span><br><span class="line"></span><br><span class="line"><span class="comment">/// é€šè¿‡æŒ‡é’ˆå’Œå¤§å°æ¥æ„é€  UnsafeBufferPointer&lt;Int8&gt;</span></span><br><span class="line"><span class="keyword">let</span> unsafeBufferPointer = <span class="type">UnsafeBufferPointer</span>&lt;<span class="type">Int8</span>&gt;(start: message, <span class="built_in">count</span>: strlen(msg!))</span><br><span class="line"></span><br><span class="line"><span class="comment">/// æ„é€ Data</span></span><br><span class="line"><span class="keyword">let</span> data = <span class="type">Data</span>(buffer: unsafeBufferPointer)</span><br></pre></td></tr></table></figure>

<h2 id="3-ä»Dataå¾—åˆ°-UInt8-æˆ–è€…-Int8-ä»¥åŠString"><a href="#3-ä»Dataå¾—åˆ°-UInt8-æˆ–è€…-Int8-ä»¥åŠString" class="headerlink" title="3. ä»Dataå¾—åˆ° [UInt8] æˆ–è€… [Int8]ä»¥åŠString"></a>3. ä»<code>Data</code>å¾—åˆ° <code>[UInt8]</code> æˆ–è€… <code>[Int8]</code>ä»¥åŠString</h2><ul>
<li>Dataå…¶å®å†…éƒ¨å°±æ˜¯[UInt8]ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½å¯ä»¥ç›´æ¥å½“æˆ[UInt8]æ¥ä½¿ç”¨, å­—èŠ‚çš„appendï¼Œremove, insert, findç­‰ç­‰éƒ½æœ‰ç›¸åŒçš„æ“ä½œ</li>
<li>ä½†æ˜¯å¦‚æœéœ€è¦æ‹·è´å‡ºæ¥ä¸€ä»½ [UInt8]æˆ–è€…[Int8]ï¼Œå¯ä»¥ä½¿ç”¨mapå‡½æ•°</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// ç¼“å†²åŒºé‡Œçš„æ•°æ®    </span></span><br><span class="line"><span class="keyword">let</span> data = <span class="type">Data</span>(buffer: unsafeBufferPointer)</span><br><span class="line"></span><br><span class="line"><span class="comment">/// [UInt8]</span></span><br><span class="line"><span class="keyword">let</span> u8a = data.<span class="built_in">map</span> &#123;$<span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// [Int8]</span></span><br><span class="line"><span class="keyword">let</span> s8a = data.<span class="built_in">map</span> &#123;<span class="type">Int8</span>($<span class="number">0</span>)&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Stringä¹Ÿè‡ªå¸¦ä»dataæ•°æ®çš„æ„é€ å‡½æ•°</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> text = <span class="type">String</span>(data: data, encoding: .utf8)</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title>SDLç¼–ç¨‹æ‰‹å†Œ</title>
    <url>/2020/06/28/SDL%E7%BC%96%E7%A8%8B%E6%89%8B%E5%86%8C/</url>
    <content><![CDATA[<h1 id="ä¸‹è½½ä¸å®‰è£…"><a href="#ä¸‹è½½ä¸å®‰è£…" class="headerlink" title="ä¸‹è½½ä¸å®‰è£…"></a>ä¸‹è½½ä¸å®‰è£…</h1><p>è¿›å…¥<a href="https://www.libsdl.org/download-2.0.php" target="_blank" rel="noopener">å®˜ç½‘ä¸‹è½½é¡µé¢</a></p><p>æ‰¾åˆ°å¯¹åº”å¹³å°çš„ä¸‹è½½é“¾æ¥, æ¯”å¦‚:</p><p><a href="https://www.libsdl.org/release/SDL2-2.0.12.dmg" target="_blank" rel="noopener">macOSå¹³å°</a> </p><p><a href="https://www.libsdl.org/release/SDL2-devel-2.0.12-VC.zip" target="_blank" rel="noopener">Windowså¹³å°Visual C++ 32/64-bit</a></p><p><a href="https://www.libsdl.org/release/SDL2-devel-2.0.12-mingw.tar.gz" target="_blank" rel="noopener">Windowså¹³å°mingw</a></p><h1 id="æ¥å£è¯´æ˜"><a href="#æ¥å£è¯´æ˜" class="headerlink" title="æ¥å£è¯´æ˜"></a>æ¥å£è¯´æ˜</h1><h2 id="åŸºç¡€æ¥å£"><a href="#åŸºç¡€æ¥å£" class="headerlink" title="åŸºç¡€æ¥å£"></a>åŸºç¡€æ¥å£</h2><h3 id="åˆå§‹åŒ–ä¸é€€å‡º-SDL-h"><a href="#åˆå§‹åŒ–ä¸é€€å‡º-SDL-h" class="headerlink" title="åˆå§‹åŒ–ä¸é€€å‡º(SDL.h)"></a>åˆå§‹åŒ–ä¸é€€å‡º(SDL.h)</h3><h4 id="SDL-Init"><a href="#SDL-Init" class="headerlink" title="SDL_Init"></a>SDL_Init</h4><ul>
<li>æ¥å£å®šä¹‰: </li>
</ul><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SDL_Init</span><span class="params">(Uint32 flags)</span></span>;</span><br></pre></td></tr></table></figure><ul>
<li>åŠŸèƒ½è¯´æ˜</li>
</ul><a id="more"></a>








<blockquote>
<p>åˆå§‹åŒ–SDLçš„å„ä¸ªå­ç³»ç»Ÿ</p>
</blockquote>
<ul>
<li>å‚æ•°è¯´æ˜:</li>
</ul>
<blockquote>
<p>flags:  å­ç³»ç»Ÿåˆå§‹åŒ–ä½¿èƒ½æ ‡å¿—ä½, å¯ä»¥ä½¿ç”¨å¦‚ä¸‹è¡¨æ‰€ç¤ºæšä¸¾å€¼è¿›è¡Œæˆ–æ“ä½œ</p>
</blockquote>
<table>
<thead>
<tr>
<th>æšä¸¾å€¼</th>
<th>å­ç³»ç»Ÿ</th>
</tr>
</thead>
<tbody><tr>
<td>SDL_INIT_AUDIO</td>
<td>éŸ³é¢‘å­ç³»ç»Ÿ</td>
</tr>
<tr>
<td>SDL_INIT_EVENTS</td>
<td>äº‹ä»¶å­ç³»ç»Ÿ</td>
</tr>
<tr>
<td>SDL_INIT_TIMER</td>
<td>å®šæ—¶å™¨å­ç³»ç»Ÿ</td>
</tr>
<tr>
<td>SDL_INIT_VIDEO</td>
<td>å›¾å½¢å›¾åƒå­ç³»ç»Ÿ</td>
</tr>
<tr>
<td>SDL_INIT_JOYSTICK</td>
<td>æ¸¸æˆæ‘‡æ†å­ç³»ç»Ÿ</td>
</tr>
<tr>
<td>SDL_INIT_HAPTIC</td>
<td>è§¦è§‰å­ç³»ç»Ÿ</td>
</tr>
<tr>
<td>SDL_INIT_CAMECONTROLLER</td>
<td>æ¸¸æˆæ§åˆ¶å™¨å­ç³»ç»Ÿ(åŒ…å«æ‘‡æ†å­ç³»ç»Ÿ)</td>
</tr>
<tr>
<td>SDL_INIT_EVERYTHING</td>
<td>æ‰€æœ‰å­ç³»ç»Ÿ</td>
</tr>
</tbody></table>
<ul>
<li>è¿”å›å€¼è¯´æ˜:</li>
</ul>
<blockquote>
<p>0ï¼š æˆåŠŸ</p>
<p>&lt; 0: å¤±è´¥é”™è¯¯ç ,  å¯ä»¥é€šè¿‡<code>SDL_GetError()</code>è·å–é”™è¯¯ä¿¡æ¯</p>
</blockquote>
<ul>
<li>ç¤ºä¾‹ä»£ç ï¼š</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;SDL2/SDL.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (SDL_Init(SDL_INIT_EVERYTHING)) &#123;</span><br><span class="line">    SDL_Log(<span class="string">"SDL Initialize failed: %s"</span>, SDL_GetError());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="SDL-InitSubSystem"><a href="#SDL-InitSubSystem" class="headerlink" title="SDL_InitSubSystem"></a>SDL_InitSubSystem</h4><ul>
<li>æ¥å£å®šä¹‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SDL_InitSubSystem</span><span class="params">(Uint32 flags)</span></span></span><br></pre></td></tr></table></figure>



<ul>
<li><p>åŠŸèƒ½è¯´æ˜</p>
<blockquote>
<p>åˆå§‹åŒ–SDLæŒ‡å®šçš„å­ç³»ç»Ÿ</p>
</blockquote>
</li>
<li><p>å‚æ•°è¯´æ˜ (åŒ <a href="#SDL-Init">SDL_Init</a>)</p>
</li>
<li><p>è¿”å›å€¼è¯´æ˜(åŒ<a href="#SDL-Init">SDL_Init</a>)</p>
</li>
<li><p>ç¤ºä¾‹ä»£ç </p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  SDL_Init(SDL_INIT_VIDEO);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">  SDL_InitSubSystem(SDL_INIT_JOYSTICK);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">  SDL_Quit();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="SDL-Quit"><a href="#SDL-Quit" class="headerlink" title="SDL_Quit"></a>SDL_Quit</h4><ul>
<li>æ¥å£å®šä¹‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SDL_Quit</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li>åŠŸèƒ½è¯´æ˜</li>
</ul>
<blockquote>
<p>æ¸…ç†æ‰€æœ‰åˆå§‹åŒ–çš„çš„å­ç³»ç»Ÿ</p>
</blockquote>
<ul>
<li>ç¤ºä¾‹ä»£ç </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">char</span>**)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(SDL_Init(SDL_INIT_EVERYTHING)) &#123;</span><br><span class="line">    SDL_Log(<span class="string">"SDL Initialize failed: %s"</span>, SDL_GetError());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">  SDL_Quit();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="SDL-QuitSubSystem"><a href="#SDL-QuitSubSystem" class="headerlink" title="SDL_QuitSubSystem"></a>SDL_QuitSubSystem</h4><ul>
<li>æ¥å£å®šä¹‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SDL_QuitSubSystem</span><span class="params">(Uint32 flags)</span></span></span><br></pre></td></tr></table></figure>



<ul>
<li>åŠŸèƒ½è¯´æ˜</li>
</ul>
<blockquote>
<p>å…³é—­æŒ‡å®šå­ç³»ç»Ÿ</p>
</blockquote>
<ul>
<li>å‚æ•°è¯´æ˜</li>
</ul>
<blockquote>
<p>flags: åŒ<a href="#SDL-Init">SDL_Init</a></p>
</blockquote>
<ul>
<li>ç¤ºä¾‹ä»£ç </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> sdl_initialized = SDL_Init(<span class="number">0</span>) == <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (sdl_initialized <span class="keyword">and</span> SDL_InitSubSystem(SDL_INIT_VEDIO)) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    SDL_QuitSubSystem(SDL_INIT_VEDIO);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// others subsysyem ...</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (sdl_initialized) SDL_Quit();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="SDL-SetMainReady"><a href="#SDL-SetMainReady" class="headerlink" title="SDL_SetMainReady"></a>SDL_SetMainReady</h4><ul>
<li>æ¥å£å®šä¹‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SDL_SetMainReady</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li>åŠŸèƒ½è¯´æ˜</li>
</ul>
<blockquote>
<p>å½“ä¸ä½¿ç”¨SDL_mainå‡½æ•°ä½œä¸ºå…¥å£å‡½æ•°æ—¶, ä½¿ç”¨æ­¤å‡½æ•°æ¥è§„é¿SDL_Initå¤±è´¥</p>
</blockquote>
<ul>
<li>ç¤ºä¾‹ä»£ç </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span> </span>&#123;</span><br><span class="line">  SDL_SetMainReady();</span><br><span class="line">  SDL_Init(SDL_INIT_EVERYTHING);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  SDL_Quit();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="SDL-WasInit"><a href="#SDL-WasInit" class="headerlink" title="SDL_WasInit"></a>SDL_WasInit</h4><ul>
<li>æ¥å£å®šä¹‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Uint32 <span class="title">SDL_WasInit</span><span class="params">(Uint32 flags)</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li>åŠŸèƒ½è¯´æ˜</li>
</ul>
<blockquote>
<p>è·å–å·²åˆå§‹åŒ–çš„å­ç³»ç»Ÿæ©ç </p>
</blockquote>
<ul>
<li>å‚æ•°è¯´æ˜</li>
</ul>
<blockquote>
<p>flags: åŒ<a href="#SDL-Init">SDL_Init</a></p>
</blockquote>
<ul>
<li>è¿”å›å€¼è¯´æ˜</li>
</ul>
<blockquote>
<p>flagsä¸º0çš„æ—¶å€™ï¼Œ è¿”å›æ‰€æœ‰å·²åˆå§‹åŒ–å­ç³»ç»Ÿçš„æ©ç ã€‚</p>
<p>å¦åˆ™è¿”å›æŒ‡å®šå­ç³»ç»Ÿçš„åˆå§‹åŒ–çŠ¶æ€</p>
</blockquote>
<h4 id="SDL-WinRTRunApp"><a href="#SDL-WinRTRunApp" class="headerlink" title="SDL_WinRTRunApp"></a>SDL_WinRTRunApp</h4><ul>
<li>æ¥å£å®šä¹‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SDL_WinRTRunApp</span><span class="params">(MainFunction main_func, <span class="keyword">void</span> *reserved)</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li>åŠŸèƒ½è¯´æ˜</li>
</ul>
<blockquote>
<p>åˆå§‹åŒ–å’Œå¯åŠ¨SDL/WinRT åº”ç”¨ç¨‹åº</p>
</blockquote>
<ul>
<li>å‚æ•°è¯´æ˜</li>
</ul>
<blockquote>
<p>main_func: Cé£æ ¼çš„mainå‡½æ•°çš„å‡½æ•°ç±»å‹ <code>int MainFunction(int,char **)</code></p>
</blockquote>
<ul>
<li>è¿”å›å€¼è¯´æ˜</li>
</ul>
<blockquote>
<p>0: æˆåŠŸ</p>
<p>-1ï¼š å¤±è´¥, å¯ä»¥é€šè¿‡SDL_GetError()è·å–é”™è¯¯ä¿¡æ¯</p>
</blockquote>
<h3 id="é…ç½®å˜é‡-SDL-hints-h"><a href="#é…ç½®å˜é‡-SDL-hints-h" class="headerlink" title="é…ç½®å˜é‡(SDL_hints.h)"></a>é…ç½®å˜é‡(SDL_hints.h)</h3><h3 id="é”™è¯¯å¤„ç†-SDL-error-h"><a href="#é”™è¯¯å¤„ç†-SDL-error-h" class="headerlink" title="é”™è¯¯å¤„ç†(SDL_error.h)"></a>é”™è¯¯å¤„ç†(SDL_error.h)</h3><h4 id="SDL-GetError"><a href="#SDL-GetError" class="headerlink" title="SDL_GetError()"></a>SDL_GetError()</h4><ul>
<li>æ¥å£å®šä¹‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">const</span> <span class="keyword">char</span>* <span class="title">SDL_GetError</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li>åŠŸèƒ½è¯´æ˜</li>
</ul>
<blockquote>
<p>è·å–é”™è¯¯æ¶ˆæ¯</p>
</blockquote>
<ul>
<li>è¿”å›å€¼è¯´æ˜</li>
</ul>
<blockquote>
<p>æœ‰é”™è¯¯æ—¶ï¼Œ è¿”å›é•¿åº¦éé›¶çš„å­—ç¬¦ä¸²é¦–åœ°å€, å¦åˆ™å¯¹åº”çš„å­—ç¬¦ä¸²é•¿åº¦ä¸º0</p>
</blockquote>
<ul>
<li>ç¤ºä¾‹ä»£ç </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (SDL_Init(SDL_INIT_EVERYTHING)) &#123;</span><br><span class="line">    SDL_Log(<span class="string">"SDL initialize failed: %s"</span>, SDL_GetError());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  SDL_Quit();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="SDL-ClearError"><a href="#SDL-ClearError" class="headerlink" title="SDL_ClearError()"></a>SDL_ClearError()</h4><ul>
<li>æ¥å£å®šä¹‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SDL_ClearError</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li>åŠŸèƒ½è¯´æ˜</li>
</ul>
<blockquote>
<p>æ¸…é™¤å·²æœ‰é”™è¯¯</p>
</blockquote>
<ul>
<li>ç¤ºä¾‹ä»£ç </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> error  = SDL_GetError();</span><br><span class="line"><span class="keyword">if</span> (error[<span class="number">0</span>]) &#123;</span><br><span class="line">  SDL_Log(<span class="string">"SDL error: %s"</span>, error);</span><br><span class="line">  SDL_ClearError();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="SDL-SetError"><a href="#SDL-SetError" class="headerlink" title="SDL_SetError()"></a>SDL_SetError()</h4><ul>
<li>æ¥å£å®šä¹‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SDL_SetError</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>*fmt, ...)</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li>åŠŸèƒ½è¯´æ˜</li>
</ul>
<blockquote>
<p>è®¾ç½®é”™è¯¯ä¿¡æ¯</p>
</blockquote>
<ul>
<li>å‚æ•°è¯´æ˜</li>
</ul>
<blockquote>
<p>printf() é£æ ¼çš„æ ¼å¼åŒ–è¾“å…¥å‚æ•°</p>
</blockquote>
<ul>
<li>è¿”å›å€¼è¯´æ˜</li>
</ul>
<blockquote>
<p>åªè¿”å› -1</p>
</blockquote>
<ul>
<li>ç¤ºä¾‹ä»£ç </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">SDL_SetError(<span class="string">"Invalid render mode: %d"</span>, mode);</span><br></pre></td></tr></table></figure>



<h3 id="æ—¥å¿—å¤„ç†-SDL-log-h"><a href="#æ—¥å¿—å¤„ç†-SDL-log-h" class="headerlink" title="æ—¥å¿—å¤„ç†(SDL_log.h)"></a>æ—¥å¿—å¤„ç†(SDL_log.h)</h3><h4 id="SDL-Log"><a href="#SDL-Log" class="headerlink" title="SDL_Log"></a>SDL_Log</h4><h4 id="SDL-LogCritical"><a href="#SDL-LogCritical" class="headerlink" title="SDL_LogCritical"></a>SDL_LogCritical</h4><h4 id="SDL-LogDebug"><a href="#SDL-LogDebug" class="headerlink" title="SDL_LogDebug"></a>SDL_LogDebug</h4><h4 id="SDL-LogError"><a href="#SDL-LogError" class="headerlink" title="SDL_LogError"></a>SDL_LogError</h4><h4 id="SDL-LogGetOutputFunction"><a href="#SDL-LogGetOutputFunction" class="headerlink" title="SDL_LogGetOutputFunction"></a>SDL_LogGetOutputFunction</h4><h4 id="SDL-GetPriority"><a href="#SDL-GetPriority" class="headerlink" title="SDL_GetPriority"></a>SDL_GetPriority</h4><h4 id="SDL-LogInfo"><a href="#SDL-LogInfo" class="headerlink" title="SDL_LogInfo"></a>SDL_LogInfo</h4><h4 id="SDL-LogMessage"><a href="#SDL-LogMessage" class="headerlink" title="SDL_LogMessage"></a>SDL_LogMessage</h4><h4 id="SDL-LogMessageV"><a href="#SDL-LogMessageV" class="headerlink" title="SDL_LogMessageV"></a>SDL_LogMessageV</h4><h4 id="SDL-LogResetPriorities"><a href="#SDL-LogResetPriorities" class="headerlink" title="SDL_LogResetPriorities"></a>SDL_LogResetPriorities</h4><h4 id="SDL-LogSetAllPriority"><a href="#SDL-LogSetAllPriority" class="headerlink" title="SDL_LogSetAllPriority"></a>SDL_LogSetAllPriority</h4><h4 id="SDL-LogSetOutputFunciton"><a href="#SDL-LogSetOutputFunciton" class="headerlink" title="SDL_LogSetOutputFunciton"></a>SDL_LogSetOutputFunciton</h4><h4 id="SDL-LogSetPriority"><a href="#SDL-LogSetPriority" class="headerlink" title="SDL_LogSetPriority"></a>SDL_LogSetPriority</h4><h4 id="SDL-LogVerbose"><a href="#SDL-LogVerbose" class="headerlink" title="SDL_LogVerbose"></a>SDL_LogVerbose</h4><h4 id="SDL-Warn"><a href="#SDL-Warn" class="headerlink" title="SDL_Warn"></a>SDL_Warn</h4><h3 id="æ–­è¨€-SDL-assert-h"><a href="#æ–­è¨€-SDL-assert-h" class="headerlink" title="æ–­è¨€(SDL_assert.h)"></a>æ–­è¨€(SDL_assert.h)</h3><h4 id="SDL-GetAssertionHandler"><a href="#SDL-GetAssertionHandler" class="headerlink" title="SDL_GetAssertionHandler"></a>SDL_GetAssertionHandler</h4><h4 id="SDL-GetAssertionReport"><a href="#SDL-GetAssertionReport" class="headerlink" title="SDL_GetAssertionReport"></a>SDL_GetAssertionReport</h4><h4 id="SDL-GetDefaultAssertionHandler"><a href="#SDL-GetDefaultAssertionHandler" class="headerlink" title="SDL_GetDefaultAssertionHandler"></a>SDL_GetDefaultAssertionHandler</h4><h4 id="SDL-ResetAssertionReport"><a href="#SDL-ResetAssertionReport" class="headerlink" title="SDL_ResetAssertionReport"></a>SDL_ResetAssertionReport</h4><h4 id="SDL-SetAssertionHandler"><a href="#SDL-SetAssertionHandler" class="headerlink" title="SDL_SetAssertionHandler"></a>SDL_SetAssertionHandler</h4><h4 id="SDL-TriggerBreakpoint"><a href="#SDL-TriggerBreakpoint" class="headerlink" title="SDL_TriggerBreakpoint"></a>SDL_TriggerBreakpoint</h4><h4 id="SDL-assert"><a href="#SDL-assert" class="headerlink" title="SDL_assert"></a>SDL_assert</h4><h4 id="SDL-assert-paranoid"><a href="#SDL-assert-paranoid" class="headerlink" title="SDL_assert_paranoid"></a>SDL_assert_paranoid</h4><h4 id="SDL-assert-release"><a href="#SDL-assert-release" class="headerlink" title="SDL_assert_release"></a>SDL_assert_release</h4><h3 id="ç‰ˆæœ¬æŸ¥è¯¢-SDL-version-h"><a href="#ç‰ˆæœ¬æŸ¥è¯¢-SDL-version-h" class="headerlink" title="ç‰ˆæœ¬æŸ¥è¯¢(SDL_version.h)"></a>ç‰ˆæœ¬æŸ¥è¯¢(SDL_version.h)</h3><h4 id="SDL-COMPILEDVERSION"><a href="#SDL-COMPILEDVERSION" class="headerlink" title="SDL_COMPILEDVERSION"></a>SDL_COMPILEDVERSION</h4><h4 id="SDL-GetRevision"><a href="#SDL-GetRevision" class="headerlink" title="SDL_GetRevision"></a>SDL_GetRevision</h4><h4 id="SDL-GetRevisionNumber"><a href="#SDL-GetRevisionNumber" class="headerlink" title="SDL_GetRevisionNumber"></a>SDL_GetRevisionNumber</h4><h4 id="SDL-GetVersion"><a href="#SDL-GetVersion" class="headerlink" title="SDL_GetVersion"></a>SDL_GetVersion</h4><h4 id="SDL-REVISION"><a href="#SDL-REVISION" class="headerlink" title="SDL_REVISION"></a>SDL_REVISION</h4><h4 id="SDL-VERSION"><a href="#SDL-VERSION" class="headerlink" title="SDL_VERSION"></a>SDL_VERSION</h4><h4 id="SDL-VERSIONNUM"><a href="#SDL-VERSIONNUM" class="headerlink" title="SDL_VERSIONNUM"></a>SDL_VERSIONNUM</h4><h4 id="SDL-VERSION-ATLEAST"><a href="#SDL-VERSION-ATLEAST" class="headerlink" title="SDL_VERSION_ATLEAST"></a>SDL_VERSION_ATLEAST</h4><h2 id="å›¾å½¢å›¾åƒ"><a href="#å›¾å½¢å›¾åƒ" class="headerlink" title="å›¾å½¢å›¾åƒ"></a>å›¾å½¢å›¾åƒ</h2><h3 id="æ˜¾ç¤ºä¸çª—å£ç®¡ç†-SDL-video-h"><a href="#æ˜¾ç¤ºä¸çª—å£ç®¡ç†-SDL-video-h" class="headerlink" title="æ˜¾ç¤ºä¸çª—å£ç®¡ç†(SDL_video.h)"></a>æ˜¾ç¤ºä¸çª—å£ç®¡ç†(SDL_video.h)</h3><p>SDL_CreateWindow<br>SDL_CreateWindowAndRenderer<br>SDL_CreateWindowFrom<br>SDL_DestroyWindow<br>SDL_DisableScreenSaver<br>SDL_EnableScreenSaver<br>SDL_GL_CreateContext<br>SDL_GL_DeleteContext<br>SDL_GL_ExtensionSupported<br>SDL_GL_GetAttribute<br>SDL_GL_GetCurrentContext<br>SDL_GL_GetCurrentWindow<br>SDL_GL_GetDrawableSize<br>SDL_GL_GetProcAddress<br>SDL_GL_GetSwapInterval<br>SDL_GL_LoadLibrary<br>SDL_GL_MakeCurrent<br>SDL_GL_ResetAttributes<br>SDL_GL_SetAttribute<br>SDL_GL_SetSwapInterval<br>SDL_GL_SwapWindow<br>SDL_GL_UnloadLibrary<br>SDL_GetClosestDisplayMode<br>SDL_GetCurrentDisplayMode<br>SDL_GetCurrentVideoDriver<br>SDL_GetDesktopDisplayMode<br>SDL_GetDisplayBounds<br>SDL_GetDisplayDPI<br>SDL_GetDisplayMode<br>SDL_GetDisplayName<br>SDL_GetDisplayUsableBounds<br>SDL_GetGrabbedWindow<br>SDL_GetNumDisplayModes</p>
<h3 id="2DåŠ é€Ÿæ¸²æŸ“-SDL-render-h"><a href="#2DåŠ é€Ÿæ¸²æŸ“-SDL-render-h" class="headerlink" title="2DåŠ é€Ÿæ¸²æŸ“(SDL_render.h)"></a>2DåŠ é€Ÿæ¸²æŸ“(SDL_render.h)</h3><p>SDL_ComposeCustomBlendMode<br>SDL_CreateRenderer<br>SDL_CreateSoftwareRenderer<br>SDL_CreateTexture<br>SDL_CreateTextureFromSurface<br>SDL_CreateWindowAndRenderer<br>SDL_DestroyRenderer<br>SDL_DestroyTexture<br>SDL_GL_BindTexture<br>SDL_GL_UnbindTexture<br>SDL_GetNumRenderDrivers<br>SDL_GetRenderDrawBlendMode<br>SDL_GetRenderDrawColor<br>SDL_GetRenderDriverInfo<br>SDL_GetRenderTarget<br>SDL_GetRenderer<br>SDL_GetRendererInfo<br>SDL_GetRendererOutputSize<br>SDL_GetTextureAlphaMod<br>SDL_GetTextureBlendMode<br>SDL_GetTextureColorMod<br>SDL_LockTexture<br>SDL_QueryTexture<br>SDL_RenderClear<br>SDL_RenderCopy<br>SDL_RenderCopyEx<br>SDL_RenderDrawLine<br>SDL_RenderDrawLines<br>SDL_RenderDrawPoint<br>SDL_RenderDrawPoints<br>SDL_RenderDrawRect<br>SDL_RenderDrawRects<br>SDL_RenderFillRect<br>SDL_RenderFillRects<br>SDL_RenderGetClipRect<br>SDL_RenderGetIntegerScale<br>SDL_RenderGetLogicalSize<br>SDL_RenderGetScale<br>SDL_RenderGetViewport<br>SDL_RenderIsClipEnabled<br>SDL_RenderPresent<br>SDL_RenderReadPixels<br>SDL_RenderSetClipRect<br>SDL_RenderSetIntegerScale<br>SDL_RenderSetLogicalSize<br>SDL_RenderSetScale<br>SDL_RenderSetViewport<br>SDL_RenderTargetSupported<br>SDL_SetRenderDrawBlendMode<br>SDL_SetRenderDrawColor<br>SDL_SetRenderTarget<br>SDL_SetTextureAlphaMod<br>SDL_SetTextureBlendMode<br>SDL_SetTextureColorMod<br>SDL_UnlockTexture<br>SDL_UpdateTexture<br>SDL_UpdateYUVTexture</p>
<h3 id="åƒç´ æ ¼å¼ä¸è½¬æ¢ä¾‹ç¨‹-SDL-pixels-h"><a href="#åƒç´ æ ¼å¼ä¸è½¬æ¢ä¾‹ç¨‹-SDL-pixels-h" class="headerlink" title="åƒç´ æ ¼å¼ä¸è½¬æ¢ä¾‹ç¨‹(SDL_pixels.h)"></a>åƒç´ æ ¼å¼ä¸è½¬æ¢ä¾‹ç¨‹(SDL_pixels.h)</h3><p>SDL_AllocFormat<br>SDL_AllocPalette<br>SDL_CalculateGammaRamp<br>SDL_FreeFormat<br>SDL_FreePalette<br>SDL_GetPixelFormatName<br>SDL_GetRGB<br>SDL_GetRGBA<br>SDL_MapRGB<br>SDL_MapRGBA<br>SDL_MasksToPixelFormatEnum<br>SDL_PixelFormatEnumToMasks<br>SDL_SetPaletteColors<br>SDL_SetPixelFormatPalette</p>
<h3 id="çŸ©å½¢æ“ä½œå‡½æ•°-SDL-rect-h"><a href="#çŸ©å½¢æ“ä½œå‡½æ•°-SDL-rect-h" class="headerlink" title="çŸ©å½¢æ“ä½œå‡½æ•°(SDL_rect.h)"></a>çŸ©å½¢æ“ä½œå‡½æ•°(SDL_rect.h)</h3><p>SDL_EnclosePoints<br>SDL_HasIntersection<br>SDL_IntersectRect<br>SDL_IntersectRectAndLine<br>SDL_PointInRect<br>SDL_RectEmpty<br>SDL_RectEquals<br>SDL_UnionRect</p>
<h3 id="è¡¨é¢åˆ›å»ºäºç®€å•ç»˜å›¾-SDL-surface-h"><a href="#è¡¨é¢åˆ›å»ºäºç®€å•ç»˜å›¾-SDL-surface-h" class="headerlink" title="è¡¨é¢åˆ›å»ºäºç®€å•ç»˜å›¾(SDL_surface.h)"></a>è¡¨é¢åˆ›å»ºäºç®€å•ç»˜å›¾(SDL_surface.h)</h3><p>SDL_BlitScaled<br>SDL_BlitSurface<br>SDL_ConvertPixels<br>SDL_ConvertSurface<br>SDL_ConvertSurfaceFormat<br>SDL_CreateRGBSurface<br>SDL_CreateRGBSurfaceFrom<br>SDL_CreateRGBSurfaceWithFormat<br>SDL_CreateRGBSurfaceWithFormatFrom<br>SDL_FillRect<br>SDL_FillRects<br>SDL_FreeSurface<br>SDL_GetClipRect<br>SDL_GetColorKey<br>SDL_GetSurfaceAlphaMod<br>SDL_GetSurfaceBlendMode<br>SDL_GetSurfaceColorMod<br>SDL_LoadBMP<br>SDL_LoadBMP_RW<br>SDL_LockSurface<br>SDL_LowerBlit<br>SDL_LowerBlitScaled<br>SDL_MUSTLOCK<br>SDL_SaveBMP<br>SDL_SaveBMP_RW<br>SDL_SetClipRect<br>SDL_SetColorKey<br>SDL_SetSurfaceAlphaMod<br>SDL_SetSurfaceBlendMode<br>SDL_SetSurfaceColorMod<br>SDL_SetSurfacePalette<br>SDL_SetSurfaceRLE<br>SDL_UnlockSurface</p>
<h3 id="å¹³å°ç›¸å…³çš„çª—å£ç®¡ç†-SDL-syswm-h"><a href="#å¹³å°ç›¸å…³çš„çª—å£ç®¡ç†-SDL-syswm-h" class="headerlink" title="å¹³å°ç›¸å…³çš„çª—å£ç®¡ç†(SDL_syswm.h)"></a>å¹³å°ç›¸å…³çš„çª—å£ç®¡ç†(SDL_syswm.h)</h3><p>SDL_GetWindowWMInfo</p>
<h3 id="å‰ªè´´æ¿å¤„ç†-SDL-clipboard-h"><a href="#å‰ªè´´æ¿å¤„ç†-SDL-clipboard-h" class="headerlink" title="å‰ªè´´æ¿å¤„ç†(SDL_clipboard.h)"></a>å‰ªè´´æ¿å¤„ç†(SDL_clipboard.h)</h3><p>SDL_GetClipboardText<br>SDL_HasClipboardText<br>SDL_SetClipboardText</p>
<h3 id="Vulkanæ”¯æŒ-SDL-Vulkan-h"><a href="#Vulkanæ”¯æŒ-SDL-Vulkan-h" class="headerlink" title="Vulkanæ”¯æŒ(SDL_Vulkan.h)"></a>Vulkanæ”¯æŒ(SDL_Vulkan.h)</h3><p>SDL_Vulkan_CreateSurface<br>SDL_Vulkan_GetDrawableSize<br>SDL_Vulkan_GetInstanceExtensions<br>SDL_Vulkan_GetVkInstanceProcAddr<br>SDL_Vulkan_LoadLibrary<br>SDL_Vulkan_UnloadLibrary</p>
<h2 id="éŸ³é¢‘"><a href="#éŸ³é¢‘" class="headerlink" title="éŸ³é¢‘"></a>éŸ³é¢‘</h2><h3 id="éŸ³é¢‘è®¾å¤‡ç®¡ç†ã€éŸ³é¢‘æ’­æ”¾ä¸å½•éŸ³-SDL-audio-h"><a href="#éŸ³é¢‘è®¾å¤‡ç®¡ç†ã€éŸ³é¢‘æ’­æ”¾ä¸å½•éŸ³-SDL-audio-h" class="headerlink" title="éŸ³é¢‘è®¾å¤‡ç®¡ç†ã€éŸ³é¢‘æ’­æ”¾ä¸å½•éŸ³(SDL_audio.h)"></a>éŸ³é¢‘è®¾å¤‡ç®¡ç†ã€éŸ³é¢‘æ’­æ”¾ä¸å½•éŸ³(SDL_audio.h)</h3><p>SDL_AudioInit<br>SDL_AudioQuit<br>SDL_BuildAudioCVT<br>SDL_ClearQueuedAudio<br>SDL_CloseAudio<br>SDL_CloseAudioDevice<br>SDL_ConvertAudio<br>SDL_DequeueAudio<br>SDL_FreeWAV<br>SDL_GetAudioDeviceName<br>SDL_GetAudioDeviceStatus<br>SDL_GetAudioDriver<br>SDL_GetAudioStatus<br>SDL_GetCurrentAudioDriver<br>SDL_GetNumAudioDevices<br>SDL_GetNumAudioDrivers<br>SDL_GetQueuedAudioSize<br>SDL_LoadWAV<br>SDL_LoadWAV_RW<br>SDL_LockAudio<br>SDL_LockAudioDevice<br>SDL_MixAudio<br>SDL_MixAudioFormat<br>SDL_OpenAudio<br>SDL_OpenAudioDevice<br>SDL_PauseAudio<br>SDL_PauseAudioDevice<br>SDL_QueueAudio<br>SDL_UnlockAudio<br>SDL_UnlockAudioDevice</p>
<h2 id="ç³»ç»Ÿè¾“å…¥äº‹ä»¶"><a href="#ç³»ç»Ÿè¾“å…¥äº‹ä»¶" class="headerlink" title="ç³»ç»Ÿè¾“å…¥äº‹ä»¶"></a>ç³»ç»Ÿè¾“å…¥äº‹ä»¶</h2><h3 id="äº‹ä»¶å¤„ç†-SDL-events-h"><a href="#äº‹ä»¶å¤„ç†-SDL-events-h" class="headerlink" title="äº‹ä»¶å¤„ç†(SDL_events.h)"></a>äº‹ä»¶å¤„ç†(SDL_events.h)</h3><p>SDL_AddEventWatch<br>SDL_DelEventWatch<br>SDL_EventState<br>SDL_FilterEvents<br>SDL_FlushEvent<br>SDL_FlushEvents<br>SDL_GetEventFilter<br>SDL_GetEventState<br>SDL_GetNumTouchDevices<br>SDL_GetNumTouchFingers<br>SDL_GetTouchDevice<br>SDL_GetTouchFinger<br>SDL_HasEvent<br>SDL_HasEvents<br>SDL_LoadDollarTemplates<br>SDL_PeepEvents<br>SDL_PollEvent<br>SDL_PumpEvents<br>SDL_PushEvent<br>SDL_QuitRequested<br>SDL_RecordGesture<br>SDL_RegisterEvents<br>SDL_SaveAllDollarTemplates<br>SDL_SaveDollarTemplate<br>SDL_SetEventFilter<br>SDL_WaitEvent<br>SDL_WaitEventTimeout</p>
<h3 id="é”®ç›˜æ”¯æŒ-SDL-keyboard-h"><a href="#é”®ç›˜æ”¯æŒ-SDL-keyboard-h" class="headerlink" title="é”®ç›˜æ”¯æŒ(SDL_keyboard.h)"></a>é”®ç›˜æ”¯æŒ(SDL_keyboard.h)</h3><p>SDL_GetKeyFromName<br>SDL_GetKeyFromScancode<br>SDL_GetKeyName<br>SDL_GetKeyboardFocus<br>SDL_GetKeyboardState<br>SDL_GetModState<br>SDL_GetScancodeFromKey<br>SDL_GetScancodeFromName<br>SDL_GetScancodeName<br>SDL_HasScreenKeyboardSupport<br>SDL_IsScreenKeyboardShown<br>SDL_IsTextInputActive<br>SDL_SetModState<br>SDL_SetTextInputRect<br>SDL_StartTextInput<br>SDL_StopTextInput</p>
<h3 id="é¼ æ ‡æ”¯æŒ-SDL-mouse-h"><a href="#é¼ æ ‡æ”¯æŒ-SDL-mouse-h" class="headerlink" title="é¼ æ ‡æ”¯æŒ(SDL_mouse.h)"></a>é¼ æ ‡æ”¯æŒ(SDL_mouse.h)</h3><p>SDL_CaptureMouse<br>SDL_CreateColorCursor<br>SDL_CreateCursor<br>SDL_CreateSystemCursor<br>SDL_FreeCursor<br>SDL_GetCursor<br>SDL_GetDefaultCursor<br>SDL_GetGlobalMouseState<br>SDL_GetMouseFocus<br>SDL_GetMouseState<br>SDL_GetRelativeMouseMode<br>SDL_GetRelativeMouseState<br>SDL_SetCursor<br>SDL_SetRelativeMouseMode<br>SDL_ShowCursor<br>SDL_WarpMouseGlobal<br>SDL_WarpMouseInWindow</p>
<h3 id="æ¸¸æˆæ‘‡æ†æ”¯æŒ-SDL-joystick-h"><a href="#æ¸¸æˆæ‘‡æ†æ”¯æŒ-SDL-joystick-h" class="headerlink" title="æ¸¸æˆæ‘‡æ†æ”¯æŒ(SDL_joystick.h)"></a>æ¸¸æˆæ‘‡æ†æ”¯æŒ(SDL_joystick.h)</h3><p>SDL_JoystickClose<br>SDL_JoystickCurrentPowerLevel<br>SDL_JoystickEventState<br>SDL_JoystickFromInstanceID<br>SDL_JoystickGetAttached<br>SDL_JoystickGetAxis<br>SDL_JoystickGetBall<br>SDL_JoystickGetButton<br>SDL_JoystickGetDeviceGUID<br>SDL_JoystickGetGUID<br>SDL_JoystickGetGUIDFromString<br>SDL_JoystickGetGUIDString<br>SDL_JoystickGetHat<br>SDL_JoystickInstanceID<br>SDL_JoystickName<br>SDL_JoystickNameForIndex<br>SDL_JoystickNumAxes<br>SDL_JoystickNumBalls<br>SDL_JoystickNumButtons<br>SDL_JoystickNumHats<br>SDL_JoystickOpen<br>SDL_JoystickUpdate<br>SDL_NumJoysticks</p>
<h3 id="æ¸¸æˆæ§åˆ¶å™¨æ”¯æŒ-SDL-gamecontroller-h"><a href="#æ¸¸æˆæ§åˆ¶å™¨æ”¯æŒ-SDL-gamecontroller-h" class="headerlink" title="æ¸¸æˆæ§åˆ¶å™¨æ”¯æŒ(SDL_gamecontroller.h)"></a>æ¸¸æˆæ§åˆ¶å™¨æ”¯æŒ(SDL_gamecontroller.h)</h3><p>SDL_GameControllerAddMapping<br>SDL_GameControllerAddMappingsFromFile<br>SDL_GameControllerAddMappingsFromRW<br>SDL_GameControllerClose<br>SDL_GameControllerEventState<br>SDL_GameControllerFromInstanceID<br>SDL_GameControllerGetAttached<br>SDL_GameControllerGetAxis<br>SDL_GameControllerGetAxisFromString<br>SDL_GameControllerGetBindForAxis<br>SDL_GameControllerGetBindForButton<br>SDL_GameControllerGetButton<br>SDL_GameControllerGetButtonFromString<br>SDL_GameControllerGetJoystick<br>SDL_GameControllerGetStringForAxis<br>SDL_GameControllerGetStringForButton<br>SDL_GameControllerMapping<br>SDL_GameControllerMappingForGUID<br>SDL_GameControllerName<br>SDL_GameControllerNameForIndex<br>SDL_GameControllerOpen<br>SDL_GameControllerUpdate<br>SDL_IsGameController</p>
<h3 id="ä¼ æ„Ÿå™¨-SDL-sensor-h"><a href="#ä¼ æ„Ÿå™¨-SDL-sensor-h" class="headerlink" title="ä¼ æ„Ÿå™¨(SDL_sensor.h)"></a>ä¼ æ„Ÿå™¨(SDL_sensor.h)</h3><p>SDL_NumSensors<br>SDL_SensorClose<br>SDL_SensorFromInstanceID<br>SDL_SensorGetData<br>SDL_SensorGetDeviceInstanceID<br>SDL_SensorGetDeviceName<br>SDL_SensorGetDeviceNonPortableType<br>SDL_SensorGetDeviceType<br>SDL_SensorGetInstanceID<br>SDL_SensorGetName<br>SDL_SensorGetNonPortableType<br>SDL_SensorGetType<br>SDL_SensorOpen<br>SDL_SensorType<br>SDL_SensorUpdate</p>
<h2 id="åŠ›åé¦ˆ"><a href="#åŠ›åé¦ˆ" class="headerlink" title="åŠ›åé¦ˆ"></a>åŠ›åé¦ˆ</h2><h3 id="åŠ›åé¦ˆæ”¯æŒ-SDL-haptic-h"><a href="#åŠ›åé¦ˆæ”¯æŒ-SDL-haptic-h" class="headerlink" title="åŠ›åé¦ˆæ”¯æŒ (SDL_haptic.h)"></a>åŠ›åé¦ˆæ”¯æŒ (SDL_haptic.h)</h3><p>SDL_HapticClose<br>SDL_HapticDestroyEffect<br>SDL_HapticEffectSupported<br>SDL_HapticGetEffectStatus<br>SDL_HapticIndex<br>SDL_HapticName<br>SDL_HapticNewEffect<br>SDL_HapticNumAxes<br>SDL_HapticNumEffects<br>SDL_HapticNumEffectsPlaying<br>SDL_HapticOpen<br>SDL_HapticOpenFromJoystick<br>SDL_HapticOpenFromMouse<br>SDL_HapticOpened<br>SDL_HapticPause<br>SDL_HapticQuery<br>SDL_HapticRumbleInit<br>SDL_HapticRumblePlay<br>SDL_HapticRumbleStop<br>SDL_HapticRumbleSupported<br>SDL_HapticRunEffect<br>SDL_HapticSetAutocenter<br>SDL_HapticSetGain<br>SDL_HapticStopAll<br>SDL_HapticStopEffect<br>SDL_HapticUnpause<br>SDL_HapticUpdateEffect<br>SDL_JoystickIsHaptic<br>SDL_MouseIsHaptic<br>SDL_NumHaptics</p>
<h2 id="å®šæ—¶å™¨"><a href="#å®šæ—¶å™¨" class="headerlink" title="å®šæ—¶å™¨"></a>å®šæ—¶å™¨</h2><h3 id="å®šæ—¶å™¨æ”¯æŒ-SDL-timer-h"><a href="#å®šæ—¶å™¨æ”¯æŒ-SDL-timer-h" class="headerlink" title="å®šæ—¶å™¨æ”¯æŒ(SDL_timer.h)"></a>å®šæ—¶å™¨æ”¯æŒ(SDL_timer.h)</h3><p>SDL_AddTimer<br>SDL_Delay<br>SDL_GetPerformanceCounter<br>SDL_GetPerformanceFrequency<br>SDL_GetTicks<br>SDL_RemoveTimer<br>SDL_TICKS_PASSED</p>
<h2 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h2><h3 id="çº¿ç¨‹ç®¡ç†-SDL-thread-h"><a href="#çº¿ç¨‹ç®¡ç†-SDL-thread-h" class="headerlink" title="çº¿ç¨‹ç®¡ç†(SDL_thread.h)"></a>çº¿ç¨‹ç®¡ç†(SDL_thread.h)</h3><p>SDL_CreateThread<br>SDL_DetachThread<br>SDL_GetThreadID<br>SDL_GetThreadName<br>SDL_SetThreadPriority<br>SDL_TLSCreate<br>SDL_TLSGet<br>SDL_TLSSet<br>SDL_ThreadID<br>SDL_WaitThread</p>
<h3 id="çº¿ç¨‹åŒæ­¥-SDL-mutex-h"><a href="#çº¿ç¨‹åŒæ­¥-SDL-mutex-h" class="headerlink" title="çº¿ç¨‹åŒæ­¥(SDL_mutex.h)"></a>çº¿ç¨‹åŒæ­¥(SDL_mutex.h)</h3><p>SDL_CondBroadcast<br>SDL_CondSignal<br>SDL_CondWait<br>SDL_CondWaitTimeout<br>SDL_CreateCond<br>SDL_CreateMutex<br>SDL_CreateSemaphore<br>SDL_DestroyCond<br>SDL_DestroyMutex<br>SDL_DestroySemaphore<br>SDL_LockMutex<br>SDL_SemPost<br>SDL_SemTryWait<br>SDL_SemValue<br>SDL_SemWait<br>SDL_SemWaitTimeout<br>SDL_TryLockMutex<br>SDL_UnlockMutex</p>
<h3 id="åŸå­æ“ä½œ-SDL-atomic-h"><a href="#åŸå­æ“ä½œ-SDL-atomic-h" class="headerlink" title="åŸå­æ“ä½œ(SDL_atomic.h)"></a>åŸå­æ“ä½œ(SDL_atomic.h)</h3><p>SDL_AtomicAdd<br>SDL_AtomicCAS<br>SDL_AtomicCASPtr<br>SDL_AtomicDecRef<br>SDL_AtomicGet<br>SDL_AtomicGetPtr<br>SDL_AtomicIncRef<br>SDL_AtomicLock<br>SDL_AtomicSet<br>SDL_AtomicSetPtr<br>SDL_AtomicTryLock<br>SDL_AtomicUnlock<br>SDL_CompilerBarrier</p>
<h2 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h2><h3 id="æ–‡ä»¶ç³»ç»Ÿè·¯å¾„-SDL-filesystem-h"><a href="#æ–‡ä»¶ç³»ç»Ÿè·¯å¾„-SDL-filesystem-h" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿè·¯å¾„(SDL_filesystem.h)"></a>æ–‡ä»¶ç³»ç»Ÿè·¯å¾„(SDL_filesystem.h)</h3><p>SDL_GetBasePath<br>SDL_GetPrefPath</p>
<h3 id="æ–‡ä»¶IOæŠ½è±¡-SDL-rwops-h"><a href="#æ–‡ä»¶IOæŠ½è±¡-SDL-rwops-h" class="headerlink" title="æ–‡ä»¶IOæŠ½è±¡(SDL_rwops.h)"></a>æ–‡ä»¶IOæŠ½è±¡(SDL_rwops.h)</h3><p>SDL_AllocRW<br>SDL_FreeRW<br>SDL_RWFromConstMem<br>SDL_RWFromFP<br>SDL_RWFromFile<br>SDL_RWFromMem<br>SDL_RWclose<br>SDL_RWread<br>SDL_RWseek<br>SDL_RWsize<br>SDL_RWtell<br>SDL_RWwrite<br>SDL_ReadBE16<br>SDL_ReadBE32<br>SDL_ReadBE64<br>SDL_ReadLE16<br>SDL_ReadLE32<br>SDL_ReadLE64<br>SDL_ReadU8<br>SDL_WriteBE16<br>SDL_WriteBE32<br>SDL_WriteBE64<br>SDL_WriteLE16<br>SDL_WriteLE32<br>SDL_WriteLE64<br>SDL_WriteU8</p>
]]></content>
      <tags>
        <tag>C++</tag>
        <tag>SDL</tag>
      </tags>
  </entry>
  <entry>
    <title>SFML åœ¨macOSçš„å®‰è£…</title>
    <url>/2020/06/05/sfml-install/</url>
    <content><![CDATA[<h2 id="1-ä¸‹è½½SFMLçš„SDK"><a href="#1-ä¸‹è½½SFMLçš„SDK" class="headerlink" title="1. ä¸‹è½½SFMLçš„SDK"></a>1. ä¸‹è½½SFMLçš„SDK</h2><p>è¿›å…¥SFMLå®˜ç½‘çš„<a href="https://www.sfml-dev.org/download.php" target="_blank" rel="noopener">ä¸‹è½½é¡µ</a>ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆçš„SFML SDK</p><p>é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬åï¼Œæ‰¾åˆ°å¦‚ä¸‹çš„ä¸‹è½½é“¾æ¥:</p><p><img src="/assets/images/sfml-download.jpg" alt></p><p>ä¸‹è½½å®Œæˆåè§£å‹åˆ°æŒ‡å®šç›®å½•</p><h2 id="2-å®‰è£…SFML-SDKçš„å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶"><a href="#2-å®‰è£…SFML-SDKçš„å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶" class="headerlink" title="2. å®‰è£…SFML SDKçš„å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶"></a>2. å®‰è£…SFML SDKçš„å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶</h2><h3 id="frameworks"><a href="#frameworks" class="headerlink" title="frameworks"></a>frameworks</h3><ul>
<li>å°†è§£å‹ç›®å½•ä¸‹çš„Frameworksæ‹·è´åˆ°ç³»ç»Ÿç›®å½•ä¸‹çš„ <code>/Library/Frameworks</code>ï¼ˆ<code>/System/Library/Frameworks</code>ä¹Ÿå¯ä»¥ï¼Œ ä½†ä¸å»ºè®®ï¼Œè¿™ä¸ªæ˜¯ç³»ç»Ÿç›¸å…³çš„æ¡†æ¶ï¼‰</li>
</ul><a id="more"></a>




<h3 id="dylib"><a href="#dylib" class="headerlink" title="dylib"></a>dylib</h3><ul>
<li>å°†<code>include</code>ç›®å½•æ‹·è´åˆ° <code>/usr/local/</code>ï¼ˆå‡ºç°åˆå¹¶é€‰æ˜¯, æˆ–è€…æ‹·è´<code>include</code>ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹æ‹·è´åˆ°<code>/usr/local/include</code>ç›®å½•ä¸‹ï¼‰</li>
<li>å°†<code>lib</code>ç›®å½•æ‹·è´åˆ°<code>/usr/local</code>ï¼ˆå‡ºç°åˆå¹¶é€‰æ˜¯, æˆ–è€…æ‹·è´<code>include</code>ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹æ‹·è´åˆ°<code>/usr/local/lib</code>ç›®å½•ä¸‹ï¼‰</li>
</ul>
<h2 id="3-å®‰è£…SFMLçš„ä¾èµ–åº“"><a href="#3-å®‰è£…SFMLçš„ä¾èµ–åº“" class="headerlink" title="3. å®‰è£…SFMLçš„ä¾èµ–åº“"></a>3. å®‰è£…SFMLçš„ä¾èµ–åº“</h2><p>åœ¨SFML SDKçš„è§£å‹ç›®å½•ä¸‹ï¼Œ è¿˜æœ‰ä¸ªå¾ˆé‡è¦çš„ç›®å½•<code>extlibs</code></p>
<p>è¿™ä¸ªç›®å½•æ˜¯ SFML SDKçš„ä¾èµ–åº“æ‰€åœ¨ç›®å½•(å…¶å®å¾ˆäººæ€§åŒ–äº†ï¼Œæ¯•ç«Ÿæ²¡è®©æˆ‘ä»¬è‡ªå·±å»å¯¼å‡ºæ‰¾ä¾èµ–åº“æºç æ¥è‡ªå·±build)</p>
<p>è¿™ä¸ªå®‰è£…æ¯”è¾ƒç®€å•, ä½†æ˜¯å¾ˆæœ‰å¿…è¦:</p>
<blockquote>
<p>å°†<code>extlibs</code>ä¸‹çš„æ‰€æœ‰<code>.framework</code>æ‹·è´åˆ° <code>/Library/Frameworks</code>å³å¯</p>
</blockquote>
<p><strong>å…¶å®åˆ°è¿™å·²ç»ç®—æ˜¯å®‰è£…å®Œæˆäº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯åœ¨Xcodeé‡Œé¢ä½¿ç”¨éªŒè¯å®‰è£…äº†ã€‚ä½†SFML SDKä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¾ˆæœ‰å¸®åŠ©çš„Xcodeæ’ä»¶å·¥å…·ï¼Œä¹Ÿå°±æ˜¯SFML çš„Xcodeå·¥ç¨‹æ¨¡æ¿åˆ›å»ºå¼•å¯¼</strong></p>
<h2 id="4-å®‰è£…Xcodeå·¥ç¨‹æ¨¡æ¿"><a href="#4-å®‰è£…Xcodeå·¥ç¨‹æ¨¡æ¿" class="headerlink" title="4. å®‰è£…Xcodeå·¥ç¨‹æ¨¡æ¿"></a>4. å®‰è£…Xcodeå·¥ç¨‹æ¨¡æ¿</h2><p>åœ¨SFML SDKè§£å‹ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°<code>templates</code>ç›®å½•ï¼Œ å°†æ”¹ç›®å½•ä¸‹çš„<code>SFML</code>ç›®å½•æ•´ä¸ªæ‹·è´åˆ° <code>/Library/Developer/Xcode/Templates</code>ä¸‹(å¦‚æœ<code>/Library/Developer/Xcode/Templates</code>ä¸å­˜åœ¨å°±è‡ªå·±åˆ›å»ºä¸€ä¸ª)ã€‚</p>
<h2 id="5-éªŒè¯å®‰è£…"><a href="#5-éªŒè¯å®‰è£…" class="headerlink" title="5. éªŒè¯å®‰è£…"></a>5. éªŒè¯å®‰è£…</h2><p>æˆ‘ä»¬æ‰“å¼€Xcode, ç„¶ååˆ›å»ºæ–°å·¥ç¨‹ï¼Œåœ¨å·¥ç¨‹æ¨¡æ¿é€‰æ‹©çš„æ—¶å€™ï¼Œå¾€ä¸‹æ‹‰ï¼Œå°±ä¼šçœ‹åˆ°SFMLçš„æ¨¡æ¿äº†ï¼Œé€‰æ‹©è¯¥æ¨¡æ¿ï¼Œä¸€è·¯ç‚¹å‡»ä¸‹ä¸€æ­¥å³å¯(ä¸­é—´è‚¯å®šä¼šæœ‰ä¸€äº›å‘½åç›¸å…³çš„éœ€è¦å¡«çš„ï¼ŒæŒ‰è‡ªå·±å–œå¥½å¡«å°±è¡Œ)</p>
<p><img src="/assets/images/sfml-templates.jpg" alt></p>
]]></content>
      <tags>
        <tag>C++</tag>
        <tag>SFML</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼‚æ­¥+è¶…æ—¶ç­‰å¾…çš„C++å®ç°</title>
    <url>/2020/05/19/%E5%BC%82%E6%AD%A5-%E8%B6%85%E6%97%B6%E7%AD%89%E5%BE%85%E7%9A%84C-%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<h1 id="å¼‚æ­¥-è¶…æ—¶ç­‰å¾…çš„C-å®ç°ä¸åº”ç”¨"><a href="#å¼‚æ­¥-è¶…æ—¶ç­‰å¾…çš„C-å®ç°ä¸åº”ç”¨" class="headerlink" title="å¼‚æ­¥+è¶…æ—¶ç­‰å¾…çš„C++å®ç°ä¸åº”ç”¨"></a>å¼‚æ­¥+è¶…æ—¶ç­‰å¾…çš„C++å®ç°ä¸åº”ç”¨</h1><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>åœ¨C++å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„ç¼–ç¨‹æ¨¡å¼è¿˜æ˜¯åŒæ­¥ç¼–ç¨‹ã€‚åŸå› å¾ˆç®€å•:</p><ul>
<li>æµç¨‹ç®€ä»‹æ˜äº†ï¼Œèƒ½æ˜ç¡®çŸ¥é“ç¨‹åºçš„æ­¥éª¤æµç¨‹</li>
<li>ä½œç”¨åŸŸç®€å•ï¼Œèƒ½å¤Ÿæ›´å¥½çš„æ§åˆ¶ä½œç”¨åŸŸå†…å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>å†å²åŸå› , C++11æ‰æœ‰çš„lambdaè¡¨è¾¾å¼ï¼Œæ˜¯çš„å¼‚æ­¥ç¼–ç¨‹çš„å¤æ‚åº¦é™ä½, åœ¨æ­¤ä¹‹å‰éƒ½æ¯”è¾ƒå¤æ‚</li>
</ul><p>æœ‰äº†C++11ä»¥åï¼Œå¼‚æ­¥å½¢å¼çš„æ¥å£è¶Šæ¥è¶Šå¤šï¼Œæœ€åŸºæœ¬å°±æ˜¯ std::thread, std::asyncä¹‹ç±»çš„æ¥å£</p><a id="more"></a>


<p>å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨æŸä¸ªåŒæ­¥æµç¨‹ä¸­å»å¤„ç†æ¯”è¾ƒè€—æ—¶çš„æ“ä½œæ—¶ï¼Œ æˆ‘ä»¬çš„åŒæ­¥æµç¨‹å°±ä¼šè¢«å µä½ä»¥è‡³äºåç»­çš„æµç¨‹æ— æ³•ç»§ç»­ã€‚å¦‚æœæˆ‘ä»¬åœ¨ç¼–å†™åŒæ­¥æµç¨‹æ—¶ï¼Œèƒ½æ§åˆ¶è¿™æ®µåŒæ­¥ä»£ç çš„æœ€å¤§è€—æ—¶ï¼Œ é‚£å°†æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ•ˆçš„ç¼–ç¨‹æ¨¡å¼ã€‚</p>
<p>äºæ˜¯ å¼‚æ­¥ + è¶…æ—¶ç­‰å¾…çš„æ¨¡å¼è¥è¿è€Œç”Ÿ</p>
<h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><ul>
<li><p>åœ¨C++11å¼€å§‹ä»¥åï¼Œæˆ‘ä»¬èƒ½ä½¿ç”¨åˆ°çš„å¯ä»¥å¸¦è¶…æ—¶ç­‰å¾…çš„æ ‡å‡†åº“æ¥å£éƒ½æœ‰å“ªäº›å‘¢ï¼Ÿ</p>
<ul>
<li>std::future </li>
<li>std::condition_variable</li>
</ul>
</li>
<li><p>å¯ä»¥æ„é€ std::futureå¯¹è±¡çš„æ ‡å‡†åº“æ¥å£æœ‰å“ªäº›å‘¢ï¼Ÿ</p>
<ul>
<li>std::async</li>
<li>std::promise</li>
<li>std::packaged_task</li>
</ul>
</li>
</ul>
<h2 id="å¯é€‰æ–¹æ¡ˆ"><a href="#å¯é€‰æ–¹æ¡ˆ" class="headerlink" title="å¯é€‰æ–¹æ¡ˆ"></a>å¯é€‰æ–¹æ¡ˆ</h2><h3 id="ä½¿ç”¨std-async"><a href="#ä½¿ç”¨std-async" class="headerlink" title="ä½¿ç”¨std::async"></a>ä½¿ç”¨std::async</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> future = <span class="built_in">std</span>::async(<span class="built_in">std</span>::lauch::async, [=] &#123;</span><br><span class="line">  <span class="comment">/// å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">  <span class="comment">/// æ­¤å¤„æ¯”è¾ƒè€—æ—¶ï¼Œçœç•¥</span></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">if</span> (future.wait_for(<span class="number">10</span>s) == <span class="built_in">std</span>::future_status::timeout) &#123;</span><br><span class="line">  <span class="comment">/// æ­¤å¤„ä¸ºç­‰å¾…ç»“æœè¶…æ—¶</span></span><br><span class="line">  <span class="comment">/// ä½†æ­¤å¤„çš„returnæˆ–è€…æŠ›å¼‚å¸¸ç­‰é€€å‡ºä½œç”¨åŸŸçš„è¡Œä¸ºéƒ½ä¼šå¯¼è‡´é˜»å¡ç›´åˆ°å¼‚æ­¥æ“ä½œå®Œæˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong>ï¼š</p>
<blockquote>
<ol>
<li><p>std::asyncåå­—è™½ç„¶å¸¦æœ‰<code>async</code>ä½†èƒ½ç»™äººå¾ˆå¤§çš„è¯¯å¯¼ï¼Œ ä½¿ç”¨std::asyncçš„æ—¶å€™, å¦‚æœæ²¡æœ‰è·å–è¿”å›å€¼çš„futureå¯¹è±¡ï¼Œé‚£è¯¥å¼‚æ­¥å‡½æ•°ä¾¿ä¼šæˆä¸ºåŒæ­¥å‡½æ•°ã€‚åŸå› æ˜¯: std::asyncè¿”å›çš„futureå¯¹è±¡ç”±äºæ˜¯å³å€¼ï¼Œä½†æ²¡æœ‰å·¦å€¼å¯¹è±¡æ¥æ¥ç®¡è¯¥å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ, å› æ­¤åœ¨è°ƒç”¨å®Œstd::asyncåï¼Œè¯¥futureå¯¹è±¡ä¼šè‡ªåŠ¨ææ„ï¼Œ ææ„æ—¶ï¼Œä¼šå‘ç”Ÿç­‰å¾…æ“ä½œï¼Œä¸€ç›´ç­‰å¾…å¼‚æ­¥æ“ä½œçš„è¿”å›å€¼ï¼Œå› æ­¤çœ‹èµ·æ¥å°±åƒæ˜¯åŒæ­¥ä¸€æ ·(<strong>è§ç¤ºä¾‹ä»£ç 1</strong>)</p>
</li>
<li><p>å¦‚æœè·å–äº†std::asyncçš„è¿”å›å€¼futureå¯¹è±¡ï¼Œ é‚£std::asyncæ‰èƒ½å«çœŸæ­£çš„å¼‚æ­¥è°ƒç”¨ã€‚ è¿™æ ·å¯ä»¥åœ¨å‘èµ·å¼‚æ­¥æ“ä½œåç«‹é©¬å»æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œæ‰§è¡Œå®Œäº†å…¶ä»–å¿…è¦æ“ä½œå†ä½¿ç”¨futureå¯¹è±¡æ¥è·å–å¼‚æ­¥ç»“æœ(ä¹Ÿæœ‰å¯èƒ½è·å–ä¸åˆ°ä»éœ€ç­‰å¾…ï¼Œ<strong>è§ç¤ºä¾‹ä»£ç 2</strong>)</p>
</li>
<li><p>ä½¿ç”¨std::asyncçš„æ—¶å€™, å¦‚æœå¼‚æ­¥æ“ä½œçš„æ—¶é—´å¤§äºç­‰å¾…è¶…æ—¶çš„æ—¶é—´ï¼Œé‚£ä¹ˆç­‰å¾…è¶…æ—¶ä»¥åreturnä¹Ÿä¼šé˜»å¡åˆ°å¼‚æ­¥æ“ä½œå®Œæˆæ‰ä¼šå®Œå…¨é€€å‡ºä½œç”¨(<strong>è§ç¤ºä¾‹ä»£ç 3</strong>)</p>
</li>
</ol>
</blockquote>
<p>ç¤ºä¾‹ä»£ç 1:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;future&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>::literals::chrono_literals;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::async(<span class="built_in">std</span>::launch::async, [] &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œ"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">std</span>::this_thread::sleep_for(<span class="number">1</span>s);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å¼‚æ­¥æ“ä½œç»“æŸ"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œå‘èµ·åçš„åŒæ­¥æ“ä½œ"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç 1è¾“å‡º:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œ</span><br><span class="line">å¼‚æ­¥æ“ä½œç»“æŸ</span><br><span class="line">è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œå‘èµ·åçš„åŒæ­¥æ“ä½œ</span><br><span class="line">Program ended with <span class="built_in">exit</span> code: 0</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç 2</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;future&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>::literals::chrono_literals;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> future = <span class="built_in">std</span>::async(<span class="built_in">std</span>::launch::async, [] &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œ"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">std</span>::this_thread::sleep_for(<span class="number">1</span>s);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å¼‚æ­¥æ“ä½œç»“æŸ"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1000</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œå‘èµ·åçš„åŒæ­¥æ“ä½œ"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::this_thread::sleep_for(<span class="number">500</span>ms);</span><br><span class="line">    <span class="keyword">auto</span> result = future.get();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å¼‚æ­¥æ“ä½œç»“æœä¸º: "</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç 2è¾“å‡º:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œå‘èµ·åçš„åŒæ­¥æ“ä½œ</span><br><span class="line">è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œ</span><br><span class="line">å¼‚æ­¥æ“ä½œç»“æŸ</span><br><span class="line">å¼‚æ­¥æ“ä½œç»“æœä¸º: 1000</span><br><span class="line">Program ended with <span class="built_in">exit</span> code: 0</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç 3ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;future&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>::literals::chrono_literals;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">now</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::chrono::duration_cast&lt;<span class="built_in">std</span>::chrono::duration&lt;<span class="keyword">double</span>&gt;&gt;(<span class="built_in">std</span>::chrono::system_clock::now().time_since_epoch()).count();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_something_with_future</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> future = <span class="built_in">std</span>::async(<span class="built_in">std</span>::launch::async, [] &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œ"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">std</span>::this_thread::sleep_for(<span class="number">5</span>s);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å¼‚æ­¥æ“ä½œç»“æŸ"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1000</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œå‘èµ·åçš„åŒæ­¥æ“ä½œ"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::this_thread::sleep_for(<span class="number">500</span>ms);</span><br><span class="line">    <span class="keyword">if</span> (future.wait_for(<span class="number">1</span>s) == <span class="built_in">std</span>::future_status::timeout) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ç­‰å¾…å¼‚æ­¥ç»“æœè¶…æ—¶"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">auto</span> result = future.get();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å¼‚æ­¥æ“ä½œç»“æœä¸º: "</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> n = now();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"è¿˜æ²¡æœ‰ä½¿ç”¨future"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    do_something_with_future();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ä½¿ç”¨å®Œfuture, ç”¨æ—¶"</span> &lt;&lt; now() - n &lt;&lt; <span class="string">"s"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç 3è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">è¿˜æ²¡æœ‰ä½¿ç”¨future</span><br><span class="line">è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œå‘èµ·åçš„åŒæ­¥æ“ä½œ</span><br><span class="line">è¿™é‡Œæ˜¯å¼‚æ­¥æ“ä½œ</span><br><span class="line">ç­‰å¾…å¼‚æ­¥ç»“æœè¶…æ—¶</span><br><span class="line">å¼‚æ­¥æ“ä½œç»“æŸ</span><br><span class="line">ä½¿ç”¨å®Œfuture, ç”¨æ—¶5.00282s</span><br><span class="line">Program ended with <span class="built_in">exit</span> code: 0</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜: </p>
<blockquote>
<p> è¿™æ®µä»£ç ä¹ä¸€çœ‹ï¼Œä»¥ä¸ºè€—æ—¶æ˜¯500msï¼Œå…¶å®ä¸ç„¶ï¼Œ è¾“å‡ºçš„æ€»ä½¿ç”¨è€—æ—¶æ˜¯5så·¦å³ã€‚ </p>
</blockquote>
<h2 id="ä½¿ç”¨std-promise"><a href="#ä½¿ç”¨std-promise" class="headerlink" title="ä½¿ç”¨std::promise"></a>ä½¿ç”¨std::promise</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;future&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>::literals::chrono_literals;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">now</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::chrono::duration_cast&lt;<span class="built_in">std</span>::chrono::duration&lt;<span class="keyword">double</span>&gt;&gt;(<span class="built_in">std</span>::chrono::system_clock::now().time_since_epoch()).count();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_something_with_promise</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::promise&lt;<span class="keyword">int</span>&gt; promise;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å‘èµ·å¼‚æ­¥æ“ä½œ:"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">  	<span class="comment">/// æš‚æ—¶ç”¨std::threadæ¨¡æ‹Ÿä¸‹å¼‚æ­¥æ¥å£</span></span><br><span class="line">    <span class="built_in">std</span>::thread([&amp;] &#123;</span><br><span class="line">        <span class="built_in">std</span>::this_thread::sleep_for(<span class="number">5</span>s);</span><br><span class="line">        promise.set_value(<span class="number">1000</span>);</span><br><span class="line">    &#125;).detach();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> future = promise.get_future();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (future.wait_for(<span class="number">1</span>s) == <span class="built_in">std</span>::future_status::timeout) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">std</span>::runtime_error(<span class="string">"ç­‰å¾…å¼‚æ­¥ç»“æœè¶…æ—¶"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> result = future.get();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å¼‚æ­¥æ“ä½œç»“æœä¸º: "</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> n = now();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å¼€å§‹ä½¿ç”¨promise"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        do_something_with_promise();</span><br><span class="line">    &#125; <span class="keyword">catch</span>(<span class="keyword">const</span> <span class="built_in">std</span>::exception&amp; e) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ä½¿ç”¨å®Œpromise, ç”¨æ—¶: "</span> &lt;&lt; now() - n &lt;&lt; <span class="string">"s"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡º:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å¼€å§‹ä½¿ç”¨promise</span><br><span class="line">å‘èµ·å¼‚æ­¥æ“ä½œ:</span><br><span class="line">ç­‰å¾…å¼‚æ­¥ç»“æœè¶…æ—¶</span><br><span class="line">ä½¿ç”¨å®Œpromise, ç”¨æ—¶: 1.00624s</span><br><span class="line">Program ended with <span class="built_in">exit</span> code: 0</span><br></pre></td></tr></table></figure>



<p>ä»£ç è¯´æ˜:</p>
<blockquote>
<p>ä¸std::asyncä¸åŒçš„æ˜¯ï¼Œstd::promiseæ‹¿åˆ°çš„futureï¼Œåœ¨promiseè¿˜æ²¡è®¾ç½®å€¼å¾—æ—¶å€™ï¼Œ futureçš„ææ„ä¸ä¼šè¢«é˜»å¡ã€‚å› æ­¤å¦‚æœå¸Œæœ›ç­‰å¾…è¶…æ—¶ä»¥åèƒ½ç«‹é©¬é€€å‡ºä½œç”¨åŸŸï¼Œæ›´æ¨èä½¿ç”¨ std::promise</p>
</blockquote>
<h3 id="ä½¿ç”¨std-packaged-task"><a href="#ä½¿ç”¨std-packaged-task" class="headerlink" title="ä½¿ç”¨std::packaged_task"></a>ä½¿ç”¨std::packaged_task</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;future&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>::literals::chrono_literals;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">now</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::chrono::duration_cast&lt;<span class="built_in">std</span>::chrono::duration&lt;<span class="keyword">double</span>&gt;&gt;(<span class="built_in">std</span>::chrono::system_clock::now().time_since_epoch()).count();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_something_with_packaged_task</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::packaged_task&lt;<span class="keyword">int</span>()&gt; task([] &#123;</span><br><span class="line">        <span class="built_in">std</span>::this_thread::sleep_for(<span class="number">5</span>s);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1000</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å‘èµ·å¼‚æ­¥æ“ä½œ:"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// ä½¿ç”¨std::threadæ¨¡æ‹Ÿå¼‚æ­¥æ¥å£</span></span><br><span class="line">    <span class="built_in">std</span>::thread([&amp;] &#123;</span><br><span class="line">        task();</span><br><span class="line">    &#125;).detach();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> future = task.get_future();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (future.wait_for(<span class="number">1</span>s) == <span class="built_in">std</span>::future_status::timeout) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">std</span>::runtime_error(<span class="string">"ç­‰å¾…å¼‚æ­¥ç»“æœè¶…æ—¶"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> result = future.get();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å¼‚æ­¥æ“ä½œç»“æœä¸º: "</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> n = now();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å¼€å§‹ä½¿ç”¨packaged_task"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        do_something_with_packaged_task();</span><br><span class="line">    &#125; <span class="keyword">catch</span>(<span class="keyword">const</span> <span class="built_in">std</span>::exception&amp; e) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ä½¿ç”¨å®Œpackaged_task, ç”¨æ—¶: "</span> &lt;&lt; now() - n &lt;&lt; <span class="string">"s"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡º:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å¼€å§‹ä½¿ç”¨packaged_task</span><br><span class="line">å‘èµ·å¼‚æ­¥æ“ä½œ:</span><br><span class="line">ç­‰å¾…å¼‚æ­¥ç»“æœè¶…æ—¶</span><br><span class="line">ä½¿ç”¨å®Œpackaged_task, ç”¨æ—¶: 1.00114s</span><br><span class="line">Program ended with <span class="built_in">exit</span> code: 0</span><br></pre></td></tr></table></figure>

<p>ä»£ç è¯´æ˜:</p>
<blockquote>
<p>å…¶å®std::packaged_taskå¯ä»¥çœ‹æˆæ˜¯std::functionä¸std::promiseçš„ç»“åˆä½“, å¯ä»¥ç†è§£ä¸ºæŠŠä¸€ä¸ª è¿”å›å€¼ä¸ºTç±»å‹çš„std::functionçš„è¿”å›å€¼å­˜åˆ°å†…éƒ¨çš„std::promiseåï¼Œå¯ä»¥é€šè¿‡futureè·å–åˆ°è¿”å›å€¼</p>
</blockquote>
<h3 id="ä½¿ç”¨std-condition-variable"><a href="#ä½¿ç”¨std-condition-variable" class="headerlink" title="ä½¿ç”¨std::condition_variable"></a>ä½¿ç”¨std::condition_variable</h3><p>ä½¿ç”¨std::condition_variableçš„æ€è·¯æ˜¯: </p>
<blockquote>
<p>å°†å¼‚æ­¥æ“ä½œçš„å‚æ•°ç±»å‹åšä¸€ä»½æ‹·è´ï¼Œå¹¶å’Œç»“æœç±»å‹æ”¾åœ¨ä¸€èµ·è¿›è¡ŒåŒ…è£…ï¼Œåˆ›å»ºä¸€ä»½åŒ…è£¹å¯¹è±¡ï¼Œ å¹¶åœ¨åŒ…è£¹å¯¹è±¡å†…éƒ¨ä½¿ç”¨ std::mutexå’Œstd::condition_variableå¯¹ç»“æœçš„è®¿é—®åŠ ä¸Šæ¡ä»¶é™åˆ¶ã€‚åœ¨åŒ…è£¹å¯¹è±¡è®¾ç½®äº†ç»“æœå€¼æ—¶ï¼Œè§£é™¤æ¡ä»¶é™åˆ¶ã€‚å› æ­¤å¯ä»¥åˆ©ç”¨ std::condition_variableçš„waitç³»åˆ—æ¥å£æ¥é™æ—¶ç­‰å¾…æˆ–è€…æ— é™ç­‰å¾…ç»“æœçš„åŠŸèƒ½</p>
</blockquote>
<h2 id="ç»¼åˆä½¿ç”¨ç¤ºä¾‹ä»£ç "><a href="#ç»¼åˆä½¿ç”¨ç¤ºä¾‹ä»£ç " class="headerlink" title="ç»¼åˆä½¿ç”¨ç¤ºä¾‹ä»£ç "></a>ç»¼åˆä½¿ç”¨ç¤ºä¾‹ä»£ç </h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;condition_variable&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;future&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> std_srvs &#123;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SetIntegerRequest</span> &#123;</span></span><br><span class="line">    <span class="keyword">int64_t</span> data;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SetIntegerResponse</span> &#123;</span></span><br><span class="line">    <span class="keyword">bool</span> success;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> message;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SetInteger</span> &#123;</span></span><br><span class="line">    <span class="keyword">using</span> Request = SetIntegerRequest;</span><br><span class="line">    <span class="keyword">using</span> Response = SetIntegerResponse;</span><br><span class="line">    </span><br><span class="line">    Request request;</span><br><span class="line">    Response response;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> MREQ, <span class="keyword">typename</span> MRES&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Wrapper</span> &#123;</span></span><br><span class="line">    <span class="keyword">using</span> Request = MREQ;</span><br><span class="line">    <span class="keyword">using</span> Response = MRES;</span><br><span class="line">    </span><br><span class="line">    Wrapper(<span class="keyword">const</span> Request&amp; req)</span><br><span class="line">        : m_request(req)</span><br><span class="line">        , m_response() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">const</span> Request&amp; <span class="title">request</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m_request;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">const</span> Response&amp; <span class="title">response</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m_response;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">Response&amp; <span class="title">response</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m_response;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">wait</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(m_reponse_lock);</span><br><span class="line">        m_response_ready.wait(lock);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Rep, <span class="keyword">typename</span> Period&gt;</span><br><span class="line">    <span class="built_in">std</span>::<span class="function">cv_status <span class="title">wait_for</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::chrono::duration&lt;Rep, Period&gt;&amp; duration)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(m_reponse_lock);</span><br><span class="line">        <span class="keyword">return</span> m_response_ready.wait_for(lock, duration);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Clock, <span class="keyword">typename</span> Duration&gt;</span><br><span class="line">    <span class="built_in">std</span>::<span class="function">cv_status <span class="title">wait_until</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::chrono::time_point&lt;Clock, Duration&gt;&amp; time_point)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(m_reponse_lock);</span><br><span class="line">        <span class="keyword">return</span> m_response_ready.wait_until(lock, time_point);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">accept</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(m_reponse_lock);</span><br><span class="line">        m_response_ready.notify_all();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Request m_request;</span><br><span class="line">    Response m_response;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::mutex m_reponse_lock;</span><br><span class="line">    <span class="built_in">std</span>::condition_variable m_response_ready;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> MREQ, <span class="keyword">typename</span> MRES&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PromiseWrapper</span> &#123;</span></span><br><span class="line">    <span class="keyword">using</span> Request = MREQ;</span><br><span class="line">    <span class="keyword">using</span> Response = MRES;</span><br><span class="line">    </span><br><span class="line">    PromiseWrapper(<span class="keyword">const</span> Request&amp; req): m_request(req) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::future&lt;Response&gt; get_future() &#123;</span><br><span class="line">        <span class="keyword">return</span> m_response.get_future();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">const</span> Request&amp; <span class="title">request</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m_request;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_response</span><span class="params">(Response response)</span> </span>&#123;</span><br><span class="line">        m_response.set_value(<span class="built_in">std</span>::move(response));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Request m_request;</span><br><span class="line">    <span class="built_in">std</span>::promise&lt;Response&gt; m_response;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">handle</span><span class="params">(<span class="keyword">const</span> std_srvs::SetInteger::Request&amp; request, std_srvs::SetInteger::Response&amp; response)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> wrapper = <span class="built_in">std</span>::make_shared&lt;Wrapper&lt;std_srvs::SetInteger::Request, std_srvs::SetInteger::Response&gt;&gt;(request);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// è¿™é‡Œå‘èµ·å¼‚æ­¥ä»»åŠ¡</span></span><br><span class="line">    <span class="built_in">std</span>::thread([=] &#123;</span><br><span class="line">       </span><br><span class="line">        </span><br><span class="line">        <span class="comment">/// æ¨¡æ‹Ÿé•¿æ—¶é—´ï¼Œå¯ä»¥å°è¯•å°†æ­¤å¤„çš„æ—¶é—´å’Œè¶…æ—¶ç­‰å¾…æ—¶é—´çš„é•¿çŸ­äº¤æ¢çœ‹çœ‹ç»“æœ</span></span><br><span class="line">        <span class="built_in">std</span>::this_thread::sleep_for(<span class="built_in">std</span>::chrono::seconds(<span class="number">5</span>));</span><br><span class="line">        </span><br><span class="line">        wrapper-&gt;response().success = <span class="literal">true</span>;</span><br><span class="line">        wrapper-&gt;response().message = <span class="string">"success"</span> + <span class="built_in">std</span>::to_string(wrapper-&gt;request().data);</span><br><span class="line">        </span><br><span class="line">        wrapper-&gt;accept(); <span class="comment">/// æ¥å—ä»»åŠ¡ç»“æœ</span></span><br><span class="line">        </span><br><span class="line">    &#125;).detach();</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// è¿™é‡Œç­‰å¾…å¼‚æ­¥ä»»åŠ¡çš„ç»“æœ</span></span><br><span class="line">    <span class="keyword">if</span> (wrapper-&gt;wait_for(<span class="built_in">std</span>::chrono::seconds(<span class="number">1</span>)) == <span class="built_in">std</span>::cv_status::no_timeout) &#123;</span><br><span class="line">        response = wrapper-&gt;response();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        response.success = <span class="literal">false</span>;</span><br><span class="line">        response.message = <span class="string">"timeout"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">promise_handle</span><span class="params">(<span class="keyword">const</span> std_srvs::SetInteger::Request&amp; request, std_srvs::SetInteger::Response&amp; response)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> wrapper = <span class="built_in">std</span>::make_shared&lt;PromiseWrapper&lt;std_srvs::SetInteger::Request, std_srvs::SetInteger::Response&gt;&gt;(request);</span><br><span class="line">    <span class="comment">/// è¿™é‡Œå‘èµ·å¼‚æ­¥ä»»åŠ¡</span></span><br><span class="line">    <span class="built_in">std</span>::thread([=] &#123;</span><br><span class="line">       </span><br><span class="line">        </span><br><span class="line">        <span class="comment">/// æ¨¡æ‹Ÿé•¿æ—¶é—´ï¼Œå¯ä»¥å°è¯•å°†æ­¤å¤„çš„æ—¶é—´å’Œè¶…æ—¶ç­‰å¾…æ—¶é—´çš„é•¿çŸ­äº¤æ¢çœ‹çœ‹ç»“æœ</span></span><br><span class="line">        <span class="built_in">std</span>::this_thread::sleep_for(<span class="built_in">std</span>::chrono::seconds(<span class="number">5</span>));</span><br><span class="line">        </span><br><span class="line">        std_srvs::SetInteger::Response r;</span><br><span class="line">        r.success = <span class="literal">true</span>;</span><br><span class="line">        r.message = <span class="string">"success"</span> + <span class="built_in">std</span>::to_string(wrapper-&gt;request().data);</span><br><span class="line">        </span><br><span class="line">        wrapper-&gt;set_response(<span class="built_in">std</span>::move(r)); <span class="comment">/// æ¥å—ä»»åŠ¡ç»“æœ</span></span><br><span class="line">        </span><br><span class="line">    &#125;).detach();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> future = wrapper-&gt;get_future();</span><br><span class="line">    <span class="keyword">if</span> (future.wait_for(<span class="built_in">std</span>::chrono::seconds(<span class="number">1</span>)) == <span class="built_in">std</span>::future_status::timeout) &#123;</span><br><span class="line">        response.success = <span class="literal">false</span>;</span><br><span class="line">        response.message = <span class="string">"promise timeout"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        response = future.get();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">handle_test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std_srvs::SetInteger srv;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"start: "</span> &lt;&lt; <span class="built_in">std</span>::chrono::system_clock::now().time_since_epoch().count() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    handle(srv.request, srv.response);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"end  : "</span> &lt;&lt; <span class="built_in">std</span>::chrono::system_clock::now().time_since_epoch().count() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (srv.response.success) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; srv.response.message &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; srv.response.message &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">promise_handle_test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std_srvs::SetInteger srv;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"start: "</span> &lt;&lt; <span class="built_in">std</span>::chrono::system_clock::now().time_since_epoch().count() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    promise_handle(srv.request, srv.response);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"end  : "</span> &lt;&lt; <span class="built_in">std</span>::chrono::system_clock::now().time_since_epoch().count() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (srv.response.success) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; srv.response.message &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; srv.response.message &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    handle_test();</span><br><span class="line">    promise_handle_test();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä»£ç è¯´æ˜"><a href="#ä»£ç è¯´æ˜" class="headerlink" title="ä»£ç è¯´æ˜"></a>ä»£ç è¯´æ˜</h2><ol>
<li>é¦–å…ˆæ˜¯Wrapper/PromiseWrapperç±»ï¼Œ ç”¨äºå°†åŒæ­¥å¤„ç†ä¸­çš„è¯·æ±‚å‚æ•°è¿›è¡ŒåŒ…è£¹å¹¶ä½œä¸ºå¼‚æ­¥å‚æ•°ã€‚ å¯¹è¯·æ±‚ä¸ç›¸åº”è¿›è¡ŒåŒ…è£¹çš„ç›®çš„ï¼Œåœ¨äºå»¶é•¿å¼‚æ­¥å¤„ç†æ—¶çš„è¯·æ±‚å‚æ•°ä¸ç›¸åº”å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½¿å…¶åœ¨æœåŠ¡å›è°ƒå·²ç»ç»“æŸçš„æƒ…å†µä¸‹ï¼Œä»æ—§æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œåªæœ‰åœ¨æœåŠ¡ç»“æŸå¹¶ä¸”å¼‚æ­¥å¤„ç†ä¹Ÿç»“æŸçš„æƒ…å†µä¸‹åŒ…è£¹çš„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ‰ä¼šç»“æŸ</li>
<li>Wrapperç±»ä½¿ç”¨çš„æ˜¯<code>æ¡ä»¶å˜é‡(std::condition_variable)</code>æŠ€æœ¯æ¥å®ç°ç­‰å¾…, PromiseWrapperä½¿ç”¨çš„æ˜¯ <code>std::promise</code>æŠ€æœ¯æ¥å®ç°ç­‰å¾…</li>
<li>ä¸¤ä¸ªåŒæ­¥æ€§è´¨çš„æœåŠ¡å¤„ç†å‡½æ•°handle/promise_handleï¼Œå…¶ä¸­handleä½¿ç”¨çš„æ˜¯WrapperæŠ€æœ¯ï¼Œ promise_handleç”¨çš„æ˜¯PromiseWrapperæŠ€æœ¯</li>
<li>ä¸¤ç§æ–¹å¼éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹, éƒ½å¯ä»¥ç­‰å¾…åˆ¶å®šçš„æ—¶é—´åä»¥è¶…æ—¶é”™è¯¯ç»“æŸæœåŠ¡å¤„ç†æµç¨‹</li>
</ol>
<h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><h3 id="rosserviceçš„æœåŠ¡ç¨‹åº"><a href="#rosserviceçš„æœåŠ¡ç¨‹åº" class="headerlink" title="rosserviceçš„æœåŠ¡ç¨‹åº"></a>rosserviceçš„æœåŠ¡ç¨‹åº</h3><ul>
<li>rosserviceçš„æœåŠ¡ç¨‹åºä¸èƒ½é˜»å¡ï¼Œä¸€æ—¦é˜»å¡ï¼Œå˜å›å¼•èµ·è°ƒç”¨æ–¹è¿é”é˜»å¡ï¼Œä¼šä½¿ç³»ç»Ÿè¿›å…¥åƒµæ­»çŠ¶æ€</li>
</ul>
]]></content>
      <tags>
        <tag>C++</tag>
        <tag>å¼‚æ­¥</tag>
      </tags>
  </entry>
  <entry>
    <title>C/C++å­¦ä¹ å†ç¨‹æ±‡æ€»</title>
    <url>/2019/12/15/C-tutorials/</url>
    <content><![CDATA[<h1 id="é¢„å¤‡ç¯‡"><a href="#é¢„å¤‡ç¯‡" class="headerlink" title="é¢„å¤‡ç¯‡"></a>é¢„å¤‡ç¯‡</h1><h2 id="ç¼–ç¨‹æŠ€æœ¯é¢„å¤‡çŸ¥è¯†"><a href="#ç¼–ç¨‹æŠ€æœ¯é¢„å¤‡çŸ¥è¯†" class="headerlink" title="ç¼–ç¨‹æŠ€æœ¯é¢„å¤‡çŸ¥è¯†"></a>ç¼–ç¨‹æŠ€æœ¯é¢„å¤‡çŸ¥è¯†</h2><h3 id="äºŒè¿›åˆ¶ã€åè¿›åˆ¶ã€åå…­è¿›åˆ¶"><a href="#äºŒè¿›åˆ¶ã€åè¿›åˆ¶ã€åå…­è¿›åˆ¶" class="headerlink" title="äºŒè¿›åˆ¶ã€åè¿›åˆ¶ã€åå…­è¿›åˆ¶"></a>äºŒè¿›åˆ¶ã€åè¿›åˆ¶ã€åå…­è¿›åˆ¶</h3><ol>
<li><strong>åè¿›åˆ¶æ€æƒ³</strong>åˆ°<strong>nè¿›åˆ¶æ€æƒ³</strong>çš„è½¬åŒ–</li>
<li><strong>äºŒè¿›åˆ¶</strong>ã€<strong>åè¿›åˆ¶</strong>ã€<strong>åå…­è¿›åˆ¶</strong>çš„ä¹¦é¢è¡¨ç¤º, æ¯”å¦‚ï¼š15,  äºŒè¿›åˆ¶: 0b00001111, åè¿›åˆ¶: 15, åå…­è¿›åˆ¶: 0x0F</li>
<li>è¿›åˆ¶ä¹‹é—´çš„è½¬åŒ–</li>
</ol><h3 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h3><ol>
<li>é¡ºåºç»“æ„ </li>
<li>æ¡ä»¶åˆ†æ”¯ç»“æ„</li>
<li>å¾ªç¯ç»“æ„</li>
</ol><h3 id="å¸¸è§æœ¯è¯­"><a href="#å¸¸è§æœ¯è¯­" class="headerlink" title="å¸¸è§æœ¯è¯­"></a>å¸¸è§æœ¯è¯­</h3><ol>
<li><strong>ç¼–è¾‘å™¨</strong>: ç”¨æ¥ç¼–å†™ä»£ç çš„å·¥å…·ï¼Œæ¯”å¦‚<code>vim</code> <code>vscode</code> <code>nodepad</code> <code>nodepad++</code> <code>sublime text</code> <code>atom</code> ç­‰</li>
<li><strong>ç¼–è¯‘å™¨</strong>: ç”¨æ¥å°†æºç è£…æ¢ä¸ºåº“æ–‡ä»¶å’Œå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„å‘½+ä»¤è¡Œå·¥å…·å¥—ä»¶, æ¯”å¦‚ <code>gcc</code>, <code>g++</code>, <code>cl.exe</code>, <code>clang</code>, <code>clang++</code></li>
<li>é¡¹ç›®æ„å»º: ç®¡ç†é¡¹ç›®æºç ä¸ç¼–è¯‘ç”Ÿæˆè„šæœ¬çš„å·¥å…·è½¯ä»¶, æ¯”å¦‚ <code>make</code>, <code>cmake, scons</code>, <code>gradle</code>, <code>maven</code></li>
<li><strong>IDE</strong>: é›†æˆäº†<code>ç¼–è¾‘å™¨</code>ã€<code>ç¼–è¯‘å™¨è°ƒç”¨è‡ªåŠ¨åŒ–</code>å’Œ<code>é¡¹ç›®æ„å»ºè‡ªåŠ¨åŒ–</code>çš„ä¸€ç§åŠŸèƒ½æ›´å¼ºå¤§çš„è½¯ä»¶, æ¯”å¦‚<code>QtCreator</code>, <code>XCode</code>, <code>Visual Studio</code>, <code>Clion</code>, <code>Code Blocks</code>, <code>Eclipse</code></li>
</ol><a id="more"></a>


<h2 id="C-å¼€å‘ç¯å¢ƒå®‰è£…"><a href="#C-å¼€å‘ç¯å¢ƒå®‰è£…" class="headerlink" title="C++å¼€å‘ç¯å¢ƒå®‰è£…"></a>C++å¼€å‘ç¯å¢ƒå®‰è£…</h2><h3 id="Windowså¹³å°ç¯å¢ƒå®‰è£…"><a href="#Windowså¹³å°ç¯å¢ƒå®‰è£…" class="headerlink" title="Windowså¹³å°ç¯å¢ƒå®‰è£…"></a>Windowså¹³å°ç¯å¢ƒå®‰è£…</h3><ol>
<li>winddowsç³»ç»Ÿä¸‹ç¯å¢ƒå®‰è£…(Visual Studio)</li>
<li>WSL(Windows Subsystem Linux)ä¸‹ç¯å¢ƒå®‰è£…</li>
</ol>
<h3 id="Ubuntu-linuxå¹³å°-ç¯å¢ƒå®‰è£…"><a href="#Ubuntu-linuxå¹³å°-ç¯å¢ƒå®‰è£…" class="headerlink" title="Ubuntu(linuxå¹³å°)ç¯å¢ƒå®‰è£…"></a>Ubuntu(linuxå¹³å°)ç¯å¢ƒå®‰è£…</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo aptitude install build-essential git cmake qtcreator</span><br></pre></td></tr></table></figure>



<h3 id="macOSå¹³å°ç¯å¢ƒå®‰è£…-XCodeå®‰è£…"><a href="#macOSå¹³å°ç¯å¢ƒå®‰è£…-XCodeå®‰è£…" class="headerlink" title="macOSå¹³å°ç¯å¢ƒå®‰è£…(XCodeå®‰è£…)"></a>macOSå¹³å°ç¯å¢ƒå®‰è£…(XCodeå®‰è£…)</h3><p>æ‰“å¼€<code>AppStore</code>, æœç´¢ <code>Xcode</code>, æ‰¾åˆ°å³ä¾§çš„<code>Xcode</code> ç‚¹å‡» <code>è·å–</code>, å¾… <code>è·å–</code>å˜ä¸º <code>å®‰è£…</code>å, ç‚¹å‡»å®‰è£…</p>
<h2 id="IDEçš„é€‰æ‹©"><a href="#IDEçš„é€‰æ‹©" class="headerlink" title="IDEçš„é€‰æ‹©"></a>IDEçš„é€‰æ‹©</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows:"></a>Windows:</h3><ul>
<li><code>Visual Studio Community/Professional/Ultimate</code> <strong>(Windowså¹³å°å¼€å‘å¿…å¤‡)</strong></li>
<li><code>Visual Studio Code</code> (è·¨å¹³å°å¯æ‰©å±•çš„ç¼–è¾‘å™¨, å¯ä»¥é…ç½®æˆåƒIDEä¸€æ ·åŠŸèƒ½å¼ºå¤§)</li>
<li><code>QtCreator</code></li>
<li><code>Clion</code></li>
</ul>
<h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux:"></a>Linux:</h3><ul>
<li><code>Visual Studio Code</code></li>
<li><code>QtCreator</code></li>
<li><code>Clion</code></li>
<li><code>Code Blocks</code></li>
</ul>
<h3 id="macOS"><a href="#macOS" class="headerlink" title="macOS:"></a>macOS:</h3><ul>
<li><code>XCode</code></li>
<li><code>Clion</code></li>
<li><code>Visual Studio Code</code></li>
<li><code>QtCreator</code></li>
</ul>
<h1 id="å…¥é—¨ç¯‡"><a href="#å…¥é—¨ç¯‡" class="headerlink" title="å…¥é—¨ç¯‡"></a>å…¥é—¨ç¯‡</h1><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><h3 id="è¯­å¥"><a href="#è¯­å¥" class="headerlink" title="è¯­å¥"></a>è¯­å¥</h3><ol>
<li><p>ä½¿ç”¨ä¸€éƒ¨åˆ†å‚æ•°ç»è¿‡ç‰¹å®šçš„è®¡ç®—è§„åˆ™å¾—åˆ°ç‰¹å®šç»“æœ(å¯ä»¥æ²¡æœ‰ç»“æœå€¼)çš„ä¸€å¥è¯ï¼Œ é€šæ¯è¡Œä¸€æ¡è¯­å¥, è‹±æ–‡åˆ†å·(;)ç»“å°¾(ä»…å½“å‰C/C++è¯­è¨€, éƒ¨åˆ†å…¶ä»–ç¼–ç¨‹è¯­è¨€è¯­å¥æ³•åˆ™ä¸ä¸€æ ·ï¼Œæœ‰çš„æ— éœ€åˆ†å·ç»“å°¾ï¼Œ æœ‰çš„å¯æœ‰å¯æ— )</p>
</li>
<li><p>ç¤ºä¾‹:</p>
</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">å’Œ ç­‰äº å‚æ•°<span class="number">1</span> + å‚æ•°<span class="number">2</span> +...+ å‚æ•°n</span><br></pre></td></tr></table></figure>

<p>C/C++ä»£ç </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="number">2</span> + <span class="number">3</span>;</span><br><span class="line"><span class="number">10</span> * <span class="number">5</span> / <span class="number">2</span> + <span class="number">6</span> / <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><ol>
<li>å½“æˆ‘ä»¬éœ€è¦ä¸´æ—¶ä¿å­˜è®°å½•ä¸‹æŸä¸ªè¯­å¥çš„ç»“æœæ—¶ï¼Œ å˜é‡å°±åº”è¿è€Œç”Ÿäº†, æ¯”å¦‚</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> sum = <span class="number">1</span> + <span class="number">2</span> + <span class="number">3</span>;</span><br><span class="line"><span class="keyword">int</span> result = <span class="number">10</span> * <span class="number">5</span> / <span class="number">2</span> + <span class="number">6</span> / <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ä¸ºä»€ä¹ˆè¦ç”¨å˜é‡å‘¢ï¼Ÿæ¯”å¦‚, ä½ æœ‰<code>100</code>å…ƒäººæ°‘å¸, æ—©ä¸Šä¹°æ—©é¤ç”¨æ‰<code>10</code>å…ƒï¼Œä¸­åˆä¹°åˆé¤åˆèŠ±æ‰äº†<code>20</code>å…ƒï¼Œ æ™šä¸Šæ²¡å¿ä½å¤šåƒäº†ç‚¹ï¼Œ èŠ±äº†<code>50</code>ï¼Œ é‚£ä¹ˆè¯·é—®ï¼Œä½ æ—©ä¸Šã€ä¸­åˆã€æ™šä¸Šåˆ†åˆ«å‰©ä¸‹å¤šå°‘é’±å‘¢ï¼Ÿ</li>
</ol>
<p>ä¸ç”¨å˜é‡æ—¶:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// ä¸€å¼€å§‹100RMB</span></span><br><span class="line"></span><br><span class="line"><span class="number">100</span> - <span class="number">10</span>; <span class="comment">/// è¿™æ˜¯æ—©ä¸Šå‰©ä½™çš„</span></span><br><span class="line"></span><br><span class="line"><span class="number">100</span> - <span class="number">10</span> - <span class="number">20</span>; <span class="comment">///è¿™æ˜¯ä¸­åˆå‰©ä½™çš„</span></span><br><span class="line"></span><br><span class="line"><span class="number">100</span> - <span class="number">10</span> - <span class="number">20</span> - <span class="number">50</span>; <span class="comment">///è¿™æ˜¯æ™šä¸Šå‰©ä¸‹çš„</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨å˜é‡:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> total = <span class="number">100</span>; <span class="comment">/// ä¸€å¼€å§‹çš„100RMB</span></span><br><span class="line"></span><br><span class="line">total = total - <span class="number">10</span>; <span class="comment">/// æ—©ä¸Šç”¨æ‰10å…ƒï¼Œ å‰©ä¸‹ total - 10 , ç„¶ååœ¨å§å‰©ä¸‹çš„å€¼è®°å½•åˆ°totalï¼Œ æ­¤æ—¶çš„totalæ‰æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„å‰©ä¸‹çš„é’±</span></span><br><span class="line"></span><br><span class="line">total = total - <span class="number">20</span>; <span class="comment">/// åœ¨æ—©ä¸Šå‰©ä¸‹çš„åŸºç¡€ä¸Šä¸­åˆå†èŠ±20å…ƒ, å‰©ä¸‹çš„å†æ¬¡è®°å½•åˆ°total</span></span><br><span class="line"></span><br><span class="line">total = total - <span class="number">50</span>; <span class="comment">/// ä¸­åˆå‰©ä¸‹çš„é’±æ™šä¸Šå†åˆ’æ‰ 50å…ƒ</span></span><br></pre></td></tr></table></figure>

<p><strong>å¯¹æ¯”å‘ç°:</strong></p>
<ul>
<li>å½“æ²¡æœ‰ä½¿ç”¨å˜é‡æ—¶, å¦‚æœæ˜¯åœ¨åŒä¸€ä¸ªæ¦‚å¿µä¸Šçš„æ•°å€¼æœ‰å˜åŠ¨, æ¯æ¬¡å˜åŠ¨éƒ½è¦æŠŠå®Œæ•´çš„å˜åŠ¨è¿‡ç¨‹å†™ä¸€éï¼Œå˜åŠ¨çš„æ¬¡æ•°è¶Šå¤šï¼Œ ä¹¦å†™çš„è¿‡ç¨‹è¶Šç¹ç, å¦‚æ­¤ä¸‹å»ï¼Œç®€ç›´ç­ç»äººæ€§</li>
<li>ä½¿ç”¨äº†å˜é‡ä»¥å, æˆ‘ä»¬ä¸ä»…å¯ä»¥æŠŠå˜é‡å½“æˆæˆ‘ä»¬çš„åŸå§‹æ•°å€¼ä¸€æ ·è¿›è¡Œè®¡ç®—, è¿˜èƒ½æŠŠè®¡ç®—çš„ç»“æœè¿›è¡Œä¿å­˜ç•™åˆ°åç»­çš„å˜åŠ¨ï¼Œè€Œä¸”ä¸ç®¡å¤šå°‘æ¬¡çš„å˜åŠ¨ï¼Œ è®¡ç®—è¡¨è¾¾å¼çš„è¯­å¥ä¹Ÿèƒ½ä¸€ç›´ä¿æŒå¾ˆç®€æ´</li>
</ul>
<ol start="3">
<li><p>å˜é‡ä¸å˜é‡æœ‰æ—¶å€™æ˜¯ä¼šæœ‰åŒºåˆ«çš„ï¼Œ æ¯”å¦‚ä½ 18å², èº«é«˜1.60ç±³, åå­—å«äºŒæ„£å­, è¿™ç§å˜é‡ä¸å˜é‡ä¹‹é—´çš„åŒºåˆ«å« <code>å˜é‡ç±»å‹</code>ï¼Œ<code>18</code>å²: è¿™æ˜¯ä¸ªæ•´æ•°, <code>1.60</code>ç±³: è¿™æ˜¯å®æ•°ï¼Œ<code>äºŒæ„£å­</code>:è¿™æ˜¯æ–‡æœ¬ä¹Ÿå«å­—ç¬¦ä¸²</p>
</li>
<li><p>å˜é‡æœ‰å“ªäº›ç±»å‹å‘¢ï¼Ÿ åŸºæœ¬çš„å˜é‡ç±»å‹æœ‰ä»¥ä¸‹å‡ ç§:</p>
</li>
</ol>
<ul>
<li><code>æ•´å½¢</code>: å¯¹åº”æ•´æ•° </li>
<li><code>æµ®ç‚¹å‹</code>: å¯¹åº”å®æ•° </li>
<li><code>å¸ƒå°”å‹</code>: è¡¨ç¤ºå…·æœ‰å¯¹ç«‹å±æ€§çš„çŠ¶æ€, ä¸€èˆ¬å¯ä»¥è¡¨ç¤ºä¸º<code>çœŸ</code>/<code>å‡</code>, 0 &lt; 1 çœŸï¼Œ 1 == 2 å‡ </li>
<li><code>å­—ç¬¦å‹</code>: ç”¨æ¥è¡¨ç¤ºæ˜¾ç¤ºåœ¨å±å¹•ä¸Šç»™æˆ‘ä»¬çœ‹çš„æ–‡æœ¬</li>
</ul>
<ol start="5">
<li>å˜é‡ç±»å‹çš„å…·ä½“C/C++è¯­è¨€ä¸­çš„ç±»å‹æœ‰å“ªäº›å‘¢ï¼Ÿ</li>
</ol>
<ul>
<li><code>æ•´å½¢</code>: (unsigned ) char/short/int/long/long long</li>
<li><code>æµ®ç‚¹å‹</code>: float, double</li>
<li><code>å¸ƒå°”å‹</code>: bool</li>
<li><code>å­—ç¬¦å‹</code>: char , wchar</li>
</ul>
<ol start="6">
<li>æœ‰å•¥åŒºåˆ«? æ¯ç§å¤§ç±»å‹é‡Œé¢çš„å…·ä½“ç±»å‹ä¹‹é—´, ä¸€èˆ¬éƒ½åªæœ‰å­˜å‚¨ç©ºé—´å’Œç¬¦å·æ€§çš„åŒºåˆ«, æ¯”å¦‚</li>
</ol>
<ul>
<li><code>æ•´å½¢</code>: </li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span> (<span class="number">1</span>å­—èŠ‚, <span class="number">-2</span>^<span class="number">7</span>~<span class="number">2</span>^<span class="number">7</span><span class="number">-1</span>), <span class="function"><span class="keyword">unsigned</span> <span class="title">char</span> <span class="params">(<span class="number">1</span>å­—èŠ‚, <span class="number">0</span>~<span class="number">2</span>^<span class="number">8</span><span class="number">-1</span>)</span></span></span><br><span class="line">short(2å­—èŠ‚ï¼Œ-2^15~2^15-1), unsigned char(2å­—èŠ‚, 0~2^16-1)</span><br><span class="line"><span class="keyword">int</span> (<span class="number">4</span>å­—èŠ‚, <span class="number">-2</span>^<span class="number">31</span>~ <span class="number">2</span>^<span class="number">31</span><span class="number">-1</span>), <span class="function"><span class="keyword">unsigned</span> <span class="title">int</span><span class="params">(<span class="number">4</span>å­—èŠ‚, <span class="number">0</span>~<span class="number">2</span>^<span class="number">32</span><span class="number">-1</span>)</span></span></span><br><span class="line">long/ unsigned long(å¹³å°ç›¸å…³ï¼Œä¸€èˆ¬ä¸å°äº4å­—èŠ‚ï¼Œä¸å¤§äº long long çš„å­—èŠ‚æ•°)</span><br><span class="line">long long (8å­—èŠ‚ï¼Œ -2^63~2^63-1), unsigned long long(8å­—èŠ‚, 0~2^64-1)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>æµ®ç‚¹å‹</code>:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span>(<span class="number">4</span>å­—èŠ‚), <span class="keyword">double</span>(<span class="number">8</span>å­—èŠ‚)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>å¸ƒå°”å‹</code>:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span>(<span class="number">1</span>å­—èŠ‚), åªæœ‰ä¸¤ä¸ªå€¼, <span class="literal">true</span>: çœŸï¼Œ<span class="literal">false</span>: å‡</span><br></pre></td></tr></table></figure>
<ul>
<li><code>å­—ç¬¦å‹</code>(ä½¿ç”¨å•å¼•å·å¼•ç”¨èµ·æ¥çš„å•ä¸ªå†…å®¹):<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span>(<span class="number">1</span>å­—èŠ‚): <span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'0'</span> ...</span><br><span class="line">wchar_t(2å­—èŠ‚): L'A', L'B', L'C'...</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="7">
<li>åŸºæœ¬ç±»å‹ä¹‹é—´å¯å¦è½¬æ¢?</li>
</ol>
<ul>
<li><code>æ•´å½¢</code> -&gt; <code>å¸ƒå°”å‹</code>: </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span>: <span class="literal">false</span></span><br><span class="line">é<span class="number">0</span>: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>æ•´å½¢</code> -&gt; <code>æµ®ç‚¹å‹</code>: </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span> -&gt; <span class="number">0.0f</span>, <span class="number">0.0</span></span><br><span class="line"><span class="number">1</span> -&gt; <span class="number">1.0f</span>, <span class="number">0.0</span></span><br><span class="line">n -&gt; n<span class="number">.0f</span>, n<span class="number">.0</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>æµ®ç‚¹æ•°</code> -&gt; <code>æ•´æ•°</code>, ç›´æ¥å–æ•´æ•°éƒ¨åˆ†, å°æ•°éƒ¨åˆ†ä¼šç›´æ¥ä¸¢å¼ƒï¼Œ å› æ­¤å¯èƒ½ä¼šæœ‰ç²¾åº¦æŸå¤±, æ¯”å¦‚<code>1.5</code>è½¬åŒ–ä¸º<code>int</code>ä»¥åå€¼ä¸º<code>1</code>, å¹¶ä¸”ä¸ä¼šæœ‰åƒæˆ‘ä»¬æ•°å­¦æ„ä¹‰ä¸Šçš„å››èˆäº”å…¥å‘ç”Ÿ</li>
</ul>
<h3 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h3><ol>
<li>æ“ä½œç¬¦åˆ†ä¸º ä¸€å…ƒæ“ä½œç¬¦ã€äºŒå…ƒæ“ä½œç¬¦ã€ä¸‰å…ƒæ“ä½œç¬¦, æ‰€è°“çš„å…ƒï¼Œ å°±æ˜¯å‚æ•°ï¼Œä¸€å…ƒè¡¨ç¤ºåªæœ‰ä¸€ä¸ªå‚æ•°â€¦ä»¥æ­¤ç±»æ¨</li>
<li>ä¸€å…ƒæ“ä½œç¬¦: <code>-</code>(å–è´Ÿ, a = 1, -a = -1)  <code>~</code>(æŒ‰ä½å–å, ~0b00000000 = 0b11111111) <code>!</code>(é€»è¾‘å–å, !true = false, !false = true)</li>
<li>äºŒå…ƒæ“ä½œç¬¦: <code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>ã€<code>&lt;</code>ã€<code>&gt;</code> ã€<code>&lt;=</code>ã€<code>&gt;=</code> ã€<code>==</code> (ç›¸ç­‰)ã€<code>!=</code>(ä¸ç­‰) ã€<code>&lt;&lt;</code>(å·¦ç§»æˆ–è€…æµè¾“å‡º)ã€<code>&gt;&gt;</code>(å³ç§»æˆ–è€…æµè¾“å…¥) ã€<code>+=</code> (è‡ªå¢)ã€<code>-=</code>(è‡ªå‡)ã€<code>*=</code> ã€<code>/=</code> ã€<code>&amp;</code>(ä½ä¸)ã€<code>|</code>(ä½æˆ–)ã€<code>^</code>(å¼‚æˆ–)ã€<code>&amp;&amp;</code>(é€»è¾‘ä¸)ã€<code>||</code>(é€»è¾‘æˆ–) ã€<code>&amp;=</code> ã€<code>|=</code>ã€<code>&lt;&lt;=</code> ã€<code>&gt;&gt;=</code></li>
<li>ä¸‰å…ƒæ“ä½œç¬¦: <code>?:</code>(ç”¨æ³•, æ¡ä»¶ ? å€¼1: å€¼2, è¡¨è¾¾å«ä¹‰: æ¡ä»¶æˆç«‹æ—¶ï¼Œ è¿”å›å€¼1ï¼Œ ä¸æˆç«‹åˆ™è¿”å›å€¼2) </li>
</ol>
<h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><ol>
<li>å¦‚æœä»æŸäº›å·²æœ‰çš„å€¼ï¼Œè®¡ç®—å¾—åˆ°æŸä¸ªç»“æœå€¼ï¼Œ éœ€è¦æ‰§è¡Œçš„è¯­å¥è¶…è¿‡<code>1æ¡</code>æ—¶, æˆ‘ä»¬è¦æ€ä¹ˆåšå‘¢ï¼Ÿæ¯”å¦‚è®¡ç®—ä¸€ä¸ªä¸¤ä¸ªå®æ•°å’Œçš„å°æ•°éƒ¨åˆ†:</li>
</ol>
<p>å¦‚æœç›´æ¥æŠŠæ¯ä¸€ç»„éƒ½è®¡ç®—ä¸€é</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">double</span> sum = <span class="number">1.5</span> + <span class="number">2.1</span>; <span class="comment">/// ç»“æœä¸º 3.6</span></span><br><span class="line"><span class="keyword">int</span> part = sum; <span class="comment">/// è‡ªåŠ¨å¿½ç•¥å°æ•°éƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">double</span> result1 = sum - part; <span class="comment">/// 3.6 - 3 = 0.6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">///...ä¸­é—´è¿˜æœ‰å¾ˆå¤šç»„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> sum = <span class="number">9.5</span> + <span class="number">0.7</span>; <span class="comment">/// ç»“æœä¸º 10.2</span></span><br><span class="line"><span class="keyword">int</span> part = sum; <span class="comment">/// è‡ªåŠ¨å¿½ç•¥å°æ•°éƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">double</span> resultn = sum - part; <span class="comment">/// 10.2- 10 = 0.2</span></span><br></pre></td></tr></table></figure>

<p>æ”¹ä¸ºä½¿ç”¨å‡½æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">calc</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">double</span> sum = a + b; </span><br><span class="line">  <span class="keyword">int</span> part = sum; <span class="comment">/// è‡ªåŠ¨å¿½ç•¥å°æ•°éƒ¨åˆ†</span></span><br><span class="line">  <span class="keyword">return</span> sum - part; <span class="comment">/// </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> result1 = calc(<span class="number">1.5</span>, <span class="number">2.1</span>); <span class="comment">/// ç»“æœ0.6</span></span><br><span class="line"><span class="comment">/// ...</span></span><br><span class="line"><span class="keyword">double</span> resultn = calc(<span class="number">9.5</span>, <span class="number">0.2</span>); <span class="comment">/// ç»“æœæ—¶0.2</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„<code>calc</code>ä¾¿å«åšå‡½æ•°, æ‰€è°“å‡½æ•°ï¼Œ å…¶å®å°±æ˜¯ç‰¹å®šæµç¨‹çš„å¤šæ¡è¯­å¥çš„åŒ…è£…ï¼Œä½¿ç”¨å‡½æ•°å¯ä»¥é¿å…ç¼–å†™å¤§é‡é‡è¯»çš„ä»£ç </p>
<ol start="2">
<li>å‡½æ•°çš„å£°æ˜ä¸å®šä¹‰</li>
</ol>
<ul>
<li>å‡½æ•°å£°æ˜: å‘ŠçŸ¥ä¸‹æ–‡å‡½æ•°çš„å½¢å¼, ä¸€èˆ¬å¯ä»¥ç¼–å†™æˆ</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">è¿”å›ç±»å‹ å‡½æ•°å(å‚æ•°<span class="number">1</span>ç±»å‹ å‚æ•°<span class="number">1</span>åç§°, ..., å‚æ•°nç±»å‹ å‚æ•°åç§°)ï¼›</span><br></pre></td></tr></table></figure>
<p>æ¯”å¦‚ä¸Šé¢çš„<code>calc</code>å‡½æ•°:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">calc</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span></span>;</span><br></pre></td></tr></table></figure>

<p>è¿”å›ç±»å‹æ˜¯double, æœ‰2ä¸ªå‚æ•°, ç¬¬ä¸€ä¸ªå‚æ•°åå« a, double ç±»å‹, ç¬¬äºŒä¸ªå‚æ•°åå«bï¼Œ ä¹Ÿæ˜¯doubleç±»å‹</p>
<ul>
<li>å‡½æ•°å®šä¹‰: å‡½æ•°çš„å…·ä½“å†…å®¹, å½¢å¼å¤§è‡´ä¸º:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">è¿”å›å€¼ å‡½æ•°å(å‚æ•°<span class="number">1</span>ç±»å‹ å‚æ•°<span class="number">1</span>åç§°, ... , å‚æ•°nç±»å‹ å‚æ•°nåç§°)</span><br><span class="line">&#123;</span><br><span class="line">  å…·ä½“å®ç°ç»†èŠ‚ï¼Œ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚ä¸Šé¢çš„ <code>calc</code>å‡½æ•°çš„å®šä¹‰:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">calc</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">double</span> sum = a + b; </span><br><span class="line">  <span class="keyword">int</span> part = sum; <span class="comment">/// è‡ªåŠ¨å¿½ç•¥å°æ•°éƒ¨åˆ†</span></span><br><span class="line">  <span class="keyword">return</span> sum - part; <span class="comment">/// </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„: åŒä¸€ä¸ªå‡½æ•°ï¼Œ åªèƒ½å®šä¹‰ä¸€æ¬¡ï¼Œ ä½†æ˜¯å¯ä»¥åœ¨å¤šå¤„å£°æ˜</strong></p>
<ol start="3">
<li>åªæœ‰ è¿”å›å€¼ã€å‡½æ•°åã€å‚æ•°çš„ç±»å‹ã€ä¸ªæ•°ã€ä½ç½®å®Œå…¨ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½è¢«ç§°ä¸ºåŒä¸€ä¸ªå‡½æ•°</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"><span class="comment">// ä¸</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> c, <span class="keyword">int</span> d)</span></span>;</span><br><span class="line"><span class="comment">// æ˜¯åŒä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"><span class="comment">// ä¸</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">bool</span> b, <span class="keyword">char</span> c)</span></span>;</span><br><span class="line"><span class="comment">// ä¸æ˜¯åŒä¸€ä¸ªå‡½æ•°</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>åœ¨Cä¸­, åŒä¸€ä¸ªå‡½æ•°ååªèƒ½ç”¨åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œä¸æ”¯æŒä½¿ç”¨åŒä¸€ä¸ªå‡½æ•°åå­—å®šä¹‰å¤šä¸ªå‡½æ•°, ä½†æ˜¯C++ä¸­å´å¯ä»¥åŒä¸€ä¸ªå‡½æ•°åç”¨äºå¤šä¸ªå‡½æ•°, å«åš<code>å‡½æ•°é‡è½½</code>ï¼Œ æ¯”å¦‚:</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a &lt; b ? b: a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">max</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a &lt; b ? b : a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è™½ç„¶ç”¨çš„å‡½æ•°åéƒ½æ˜¯max</span></span><br><span class="line"><span class="comment">//ä½†æ˜¯</span></span><br><span class="line">max(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// ä¸</span></span><br><span class="line">max(<span class="number">2.0</span>, <span class="number">3.0</span>);</span><br><span class="line"><span class="comment">// ä½¿ç”¨çš„ä¸æ˜¯åŒä¸€ä¸ªå‡½æ•°</span></span><br></pre></td></tr></table></figure>



<h3 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h3><h3 id="åŸç”Ÿæ•°ç»„"><a href="#åŸç”Ÿæ•°ç»„" class="headerlink" title="åŸç”Ÿæ•°ç»„"></a>åŸç”Ÿæ•°ç»„</h3><h3 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h3><h3 id="æšä¸¾ã€-ç»“æ„ä½“ã€è”åˆä½“"><a href="#æšä¸¾ã€-ç»“æ„ä½“ã€è”åˆä½“" class="headerlink" title="æšä¸¾ã€ ç»“æ„ä½“ã€è”åˆä½“"></a>æšä¸¾ã€ ç»“æ„ä½“ã€è”åˆä½“</h3><h3 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h3><h1 id="æé«˜ç¯‡"><a href="#æé«˜ç¯‡" class="headerlink" title="æé«˜ç¯‡"></a>æé«˜ç¯‡</h1><h1 id="è¿›é˜¶ç¯‡"><a href="#è¿›é˜¶ç¯‡" class="headerlink" title="è¿›é˜¶ç¯‡"></a>è¿›é˜¶ç¯‡</h1><h1 id="é«˜çº§ç¯‡"><a href="#é«˜çº§ç¯‡" class="headerlink" title="é«˜çº§ç¯‡"></a>é«˜çº§ç¯‡</h1>]]></content>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Gradleä»é›¶å¼€å§‹åˆ›å»ºSpringBooté¡¹ç›®</title>
    <url>/2019/11/16/gradle-create-springboot/</url>
    <content><![CDATA[<h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><h2 id="å®‰è£…gradle"><a href="#å®‰è£…gradle" class="headerlink" title="å®‰è£…gradle"></a>å®‰è£…<code>gradle</code></h2><ol>
<li><a href="https://gradle.org/releases" target="_blank" rel="noopener">ä¸‹è½½</a><code>Gradle</code>çš„å®‰è£…åŒ…(å¯é€‰æ‹©<a href="https://gradle.org/next-steps/?version=6.0&format=bin" target="_blank" rel="noopener">äºŒè¿›åˆ¶åŒ…</a>æˆ–è€…<a href="https://gradle.org/next-steps/?version=6.0&format=all" target="_blank" rel="noopener">å®Œæ•´åŒ…</a></li>
<li>è§£å‹å‹ç¼©åŒ…åˆ°å®‰è£…è·¯å¾„, å¦‚:<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ mkdir -p /usr/local/gradle</span><br><span class="line">~$ cd /usr/local/gradle</span><br><span class="line">~$ unzip ~/Downloads/gradle-6.0-bin.zip</span><br></pre></td></tr></table></figure></li>
<li>å¯¼å…¥ç¯å¢ƒ </li>
</ol><a id="more"></a>
<ul>
<li>å°†<code>Gradle</code>çš„ <code>bin</code>ç›®å½•æ·»åŠ åˆ°<code>PATH</code>ç¯å¢ƒå˜é‡<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ echo "export PATH=$GRADLE_HOME/bin:$PATH" &gt;&gt; ~/.bashrc # ~/.bash_profile ~/.zshrc</span><br><span class="line">~$ source ~/.bashrc</span><br></pre></td></tr></table></figure></li>
<li>æˆ–è€…å°† <code>Gradle</code>çš„å¯æ‰§è¡Œæ–‡ä»¶è½¯è¿æ¥åˆ° <code>/usr/local/bin</code><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">~$ ln -s $GRADLE_HOME/bin/gradle /usr/local/bin/gradle</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>æç¤º: <code>$GRADLE_HOME</code>æŒ‡çš„æ˜¯<code>gradle</code>è§£å‹åçš„ç›®å½•, æ¯”å¦‚ <code>/usr/local/gradle/6.0</code></strong></p>
<h1 id="åˆ›å»ºå·¥ç¨‹"><a href="#åˆ›å»ºå·¥ç¨‹" class="headerlink" title="åˆ›å»ºå·¥ç¨‹"></a>åˆ›å»ºå·¥ç¨‹</h1><h2 id="ä½¿ç”¨gradle-åˆ›å»ºåˆå§‹å·¥ç¨‹"><a href="#ä½¿ç”¨gradle-åˆ›å»ºåˆå§‹å·¥ç¨‹" class="headerlink" title="ä½¿ç”¨gradle åˆ›å»ºåˆå§‹å·¥ç¨‹"></a>ä½¿ç”¨<code>gradle</code> åˆ›å»ºåˆå§‹å·¥ç¨‹</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">âœ  Kotlin mkdir project</span><br><span class="line">âœ  Kotlin cd project</span><br><span class="line">âœ  project gradle init</span><br><span class="line">Configuration on demand is an incubating feature.</span><br><span class="line"></span><br><span class="line">Select type of project to generate:</span><br><span class="line">  1: basic</span><br><span class="line">  2: application</span><br><span class="line">  3: library</span><br><span class="line">  4: Gradle plugin</span><br><span class="line">Enter selection (default: basic) [1..4] 2</span><br><span class="line"></span><br><span class="line">Select implementation language:</span><br><span class="line">  1: C++</span><br><span class="line">  2: Groovy</span><br><span class="line">  3: Java</span><br><span class="line">  4: Kotlin</span><br><span class="line">  5: Swift</span><br><span class="line">Enter selection (default: Java) [1..5] 4</span><br><span class="line"></span><br><span class="line">Select build script DSL:</span><br><span class="line">  1: Groovy</span><br><span class="line">  2: Kotlin</span><br><span class="line">Enter selection (default: Kotlin) [1..2] 2</span><br><span class="line"></span><br><span class="line">Project name (default: project): app</span><br><span class="line"></span><br><span class="line">Source package (default: app): com.oyoung</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BUILD SUCCESSFUL in 24s</span><br><span class="line">2 actionable tasks: 2 executed</span><br><span class="line">âœ  project</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨IntelliJ-Ideaæ‰“å¼€åˆšåˆšåˆ›å»ºçš„é¡¹ç›®"><a href="#ä½¿ç”¨IntelliJ-Ideaæ‰“å¼€åˆšåˆšåˆ›å»ºçš„é¡¹ç›®" class="headerlink" title="ä½¿ç”¨IntelliJ Ideaæ‰“å¼€åˆšåˆšåˆ›å»ºçš„é¡¹ç›®"></a>ä½¿ç”¨<code>IntelliJ Idea</code>æ‰“å¼€åˆšåˆšåˆ›å»ºçš„é¡¹ç›®</h2><p><img src="/assets/images/open_gradle_proj.gif" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="é…ç½®å·¥ç¨‹"><a href="#é…ç½®å·¥ç¨‹" class="headerlink" title="é…ç½®å·¥ç¨‹"></a>é…ç½®å·¥ç¨‹</h1><h2 id="ä¿®æ”¹build-gradle-ktsæ–‡ä»¶"><a href="#ä¿®æ”¹build-gradle-ktsæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹build.gradle.ktsæ–‡ä»¶"></a>ä¿®æ”¹<code>build.gradle.kts</code>æ–‡ä»¶</h2><ol>
<li>ç®€åŒ–<code>kotlin</code>ç›¸å…³çš„ä¾èµ–å¯¼å…¥<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  <span class="comment">// Align versions of all Kotlin components</span></span><br><span class="line">  implementation(platform(<span class="string">"org.jetbrains.kotlin:kotlin-bom"</span>))</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Use the Kotlin JDK 8 standard library.</span></span><br><span class="line">  implementation(<span class="string">"org.jetbrains.kotlin:kotlin-stdlib-jdk8"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Use the Kotlin test library.</span></span><br><span class="line">  testImplementation(<span class="string">"org.jetbrains.kotlin:kotlin-test"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Use the Kotlin JUnit integration.</span></span><br><span class="line">  testImplementation(<span class="string">"org.jetbrains.kotlin:kotlin-test-junit"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
æ”¹ä¸º<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  implementation(kotlin(<span class="string">"stdlib"</span>, <span class="string">"1.3.50"</span>))</span><br><span class="line">  implementation(kotlin(<span class="string">"reflect"</span>, <span class="string">"1.3.50"</span>)) <span class="comment">/// kotlin åå°„æœºåˆ¶éœ€è¦çš„åº“</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/// æš‚æ—¶ä¸éœ€è¦æ”¹åŠ¨</span></span><br><span class="line">  testImplementation(<span class="string">"org.jetbrains.kotlin:kotlin-test"</span>)</span><br><span class="line">  testImplementation(<span class="string">"org.jetbrains.kotlin:kotlin-test-junit"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>å¯¼å…¥<code>springboot</code> ç›¸å…³æ’ä»¶<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">  kotlin(<span class="string">"jvm"</span>) version <span class="string">"1.3.50"</span></span><br><span class="line">  kotlin(<span class="string">"plugin.spring"</span>) version <span class="string">"1.3.50"</span>  </span><br><span class="line">  id(<span class="string">"org.springframework.boot"</span>) version <span class="string">"2.2.1.RELEASE"</span></span><br><span class="line">  id(<span class="string">"io.spring.dependency-management"</span>) version <span class="string">"1.0.8.RELEASE"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
å…¶ä¸­ ä½¿ç”¨ <code>kotlin()</code>æ–¹æ³•åŒ…è£¹çš„, å±äº<code>kotlin</code>æ¨¡å—ï¼Œä½¿ç”¨ <code>id()</code>æ–¹æ³•çš„æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—</li>
<li>å¢åŠ  <code>mavenCentral()</code>ä»“åº“<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">  mavenCentral()</span><br><span class="line">  jcenter()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>å¯¼å…¥ <code>&quot;org.springframework.boot:spring-boot-starter-web&quot;</code><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  <span class="comment">/// ...</span></span><br><span class="line">  implementation(<span class="string">"org.springframework.boot"</span>, <span class="string">"spring-boot-starter-web"</span>)</span><br><span class="line">  <span class="comment">/// implementation("org.springframework.boot:spring-boot-starter-web")</span></span><br><span class="line">  <span class="comment">/// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="æ‰“å¼€æˆ‘ä»¬çš„ç¨‹åºå…¥å£App-kt"><a href="#æ‰“å¼€æˆ‘ä»¬çš„ç¨‹åºå…¥å£App-kt" class="headerlink" title="æ‰“å¼€æˆ‘ä»¬çš„ç¨‹åºå…¥å£App.kt"></a>æ‰“å¼€æˆ‘ä»¬çš„ç¨‹åºå…¥å£<code>App.kt</code></h2><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oyoung</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="keyword">val</span> greeting: String</span><br><span class="line">        <span class="keyword">get</span>() &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"Hello world."</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    println(App().greeting)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹æˆå¦‚ä¸‹:</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oyoung <span class="comment">/// è¿™é‡Œæ”¹æˆè‡ªå·±æ˜æ˜çš„åŒ…</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.runApplication</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">  runApplication&lt;App&gt;(*args)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤åˆ»æˆ‘ä»¬çœ‹åˆ°<code>runApplication</code>è¿™ä¸€è¡Œæœ‰çº¢è‰²æ³¢æµªçº¿ï¼Œé¼ æ ‡ç§»åˆ°ä¸Šé¢æç¤º:<br><img src="/assets/images/run_app_error.png" alt="é”™è¯¯æç¤º"><br>è¿™è¡¨ç¤ºæˆ‘ä»¬çš„kotlin buildçš„å­—èŠ‚ç çš„jvmç‰ˆæœ¬ä¸æˆ‘ä»¬å®é™…è®¾å®šçš„ä¸ä¸€è‡´</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">group = <span class="string">"com.oyoung"</span></span><br><span class="line">version = <span class="string">"0.0.1-SNAPSHOT"</span></span><br><span class="line">java.sourceCompatibility = JavaVersion.VERSION_1_8</span><br></pre></td></tr></table></figure>

<h2 id="æŒ‰æç¤ºå¢åŠ -jvm-target-å‚æ•°"><a href="#æŒ‰æç¤ºå¢åŠ -jvm-target-å‚æ•°" class="headerlink" title="æŒ‰æç¤ºå¢åŠ  -jvm-target å‚æ•°"></a>æŒ‰æç¤ºå¢åŠ  <code>-jvm-target</code> å‚æ•°</h2><ol>
<li>åˆ é™¤æœ€ä¸‹é¢è‡ªåŠ¨ç”Ÿæˆçš„     <code>application</code> ä»»åŠ¡</li>
<li>å¢åŠ ä¸€ä¸ª<code>KotlinCompile</code>ä»»åŠ¡<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">tasks.withType&lt;KotlinCompile&gt;() &#123;</span><br><span class="line">    kotlinOptions &#123;</span><br><span class="line">        jvmTarget = <span class="string">"1.8"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
å»ºè®®è‡ªå·±æ•²ä¸Šé¢çš„ä»£ç , åœ¨æ•²ä»£ç çš„è¿‡ç¨‹ä¸­ä¼šæœ‰ä¸€ä¸ªè‡ªåŠ¨å¯¼å…¥çš„import æ·»åŠ åˆ°æ–‡ä»¶å¼€å¤´<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.jetbrains.kotlin.gradle.tasks.KotlinCompile</span><br></pre></td></tr></table></figure>
å½“ç„¶äº†, å¦‚æœIDEå“åº”å¤ªæ…¢æ²¡æœ‰è‡ªåŠ¨importï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨å¯¼å…¥</li>
</ol>
<h2 id="é¦–æ¬¡å°è¯•å¯åŠ¨"><a href="#é¦–æ¬¡å°è¯•å¯åŠ¨" class="headerlink" title="é¦–æ¬¡å°è¯•å¯åŠ¨"></a>é¦–æ¬¡å°è¯•å¯åŠ¨</h2><p>æ‰“å¼€å®šä½ä¸º<code>App.kt</code>æ–‡ä»¶<br>åœ¨ <code>main</code> å‡½æ•°çš„å·¦ä¾§, æ˜¾ç¤ºè¡Œå·çš„é™„è¿‘æœ‰ä¸€ä¸ª<code>ä¸‰è§’å½¢</code>ç®­å¤´, ç‚¹å‡», ç„¶åä¼šæœ‰å¼¹å‡ºæ¥çš„èœå•, ä¹‹åçš„æ“ä½œ, ä½ æ‡‚çš„â€¦<br><img src="/assets/images/run_main.png" alt="è¿è¡Œ"></p>
<p>æ­¤æ—¶, å¦‚æœä¸€åˆ‡æ­£å¸¸çš„è¯, å°†ä¼šä»¥é»˜è®¤çš„8080ç«¯å£å·å¯åŠ¨ä¸€ä¸ªæ²¡æœ‰ä»»ä½•è·¯ç”±è¯·æ±‚çš„SpringBootåº”ç”¨ç¨‹åº, å¦‚æœéœ€è¦ä¿®æ”¹ä¸ºè‡ªå®šä¹‰çš„ç«¯å£å·, éœ€è¦åœ¨<code>$PROJECT/src/main/resources</code>è·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ª<code>application.yml</code>(æˆ–è€…<code>application.properties</code>)æ–‡ä»¶ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">4000</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¬¬äºŒæ¬¡å¯åŠ¨åº”ç”¨æ—¶ ç«¯å£å·å³å¯æ”¹ä¸ºè‡ªå®šä¹‰çš„ç«¯å£å·</li>
</ul>
<h2 id="å¢åŠ controller"><a href="#å¢åŠ controller" class="headerlink" title="å¢åŠ controller"></a>å¢åŠ controller</h2><ol>
<li>æ–°å»ºä¸€ä¸ª <code>com.oyoung.controller</code>åŒ… (æˆ–è€…ä½¿ç”¨è‡ªå·±çš„åŒ…å‰ç¼€)</li>
<li>æ–°å»ºä¸€ä¸ª <code>Controller</code>ç±», æ¯”å¦‚ <code>TestController</code></li>
<li>åœ¨è‡ªå®šä¹‰çš„Controllerä¸Šé¢æ·»åŠ æ³¨è§£ <code>@RestController</code>ï¼Œ ä¸€èˆ¬ä¼šè‡ªåŠ¨å¯¼å…¥ æ‰€éœ€è¦çš„åŒ…, æ²¡æœ‰è‡ªåŠ¨å¯¼å…¥çš„è¯, å¯ä»¥æŒ‰ç…§æç¤ºæŒ‰ <code>Alt + Enter</code>ç»„åˆæŒ‰é”®æ‰‹åŠ¨å¯¼å…¥</li>
<li>æ·»åŠ ç¬¬ä¸€ä¸ªè·¯ç”±ï¼Œæ¯”å¦‚ /test, è¿”å›ä»»æ„ä¸€ä¸ªå¯¹è±¡</li>
<li>é‡æ–°å¯åŠ¨ç¨‹åº</li>
<li>å¦‚æœåœ¨ä¸Šé¢çš„ä¾èµ–ä¸­æ²¡æœ‰æ·»åŠ  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">	<span class="comment">/// ...</span></span><br><span class="line">	implementation(kotlin(<span class="string">"reflect"</span>, <span class="string">"1.3.50"</span>))</span><br><span class="line">	<span class="comment">/// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
çš„è¯, ä¸€èˆ¬ä¼šå¯åŠ¨å¤±è´¥ï¼Œ è‡³äºä½¿ç”¨ä»€ä¹ˆç‰ˆæœ¬, çœ‹å…·ä½“æƒ…å†µï¼Œæˆ‘è‡ªå·±é€‰æ‹©çš„æ˜¯å½“å‰æœ€æ–°çš„ç¨³å®šç‰ˆ<br>è‡³æ­¤ä¸€ä¸ªå®Œæ•´çš„SpringBootåˆå§‹é¡¹ç›®å°±åˆ›å»ºå®Œæˆäº†, </li>
</ol>
<h2 id="æ’’èŠ±âœ¿âœ¿ãƒ½-Â°â–½Â°-ãƒâœ¿"><a href="#æ’’èŠ±âœ¿âœ¿ãƒ½-Â°â–½Â°-ãƒâœ¿" class="headerlink" title="æ’’èŠ±âœ¿âœ¿ãƒ½(Â°â–½Â°)ãƒâœ¿"></a>æ’’èŠ±âœ¿âœ¿ãƒ½(Â°â–½Â°)ãƒâœ¿</h2>]]></content>
      <tags>
        <tag>Gradle</tag>
        <tag>Kotlin</tag>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³å±å¹•å½•åˆ¶å·¥å…·LICEcapåœ¨macOS 10.15 (Catalina) æ— æ³•å·¥ä½œé—®é¢˜è®°å½•</title>
    <url>/2019/11/01/licecap-not-working/</url>
    <content><![CDATA[<p>ä»å‡çº§macOSå‡çº§åˆ°10.15(Catalina)ä»¥å, é’ˆå¯¹å±å¹•å½•åˆ¶å¢åŠ äº†æƒé™ç®¡ç†, æ‰€æœ‰çš„ä¼šå½•åˆ¶å±å¹•çš„ç¨‹åº, åœ¨é¦–æ¬¡å¼€å§‹å½•åˆ¶å±å¹•æ—¶ï¼Œ éƒ½ä¼šå‡ºç°è¯·æ±‚å±å¹•å½•åˆ¶æƒé™çš„å¼¹çª—</p><p>ä½†æ˜¯å‡çº§LICEcapåˆ°1.29ä»¥å, ç‚¹å‡» <code>record</code> è¾“å…¥æ–‡ä»¶å <strong>æ²¡å¸¦.gifåç¼€, å› ä¸ºæœ‰æ–‡ä»¶ç±»å‹ Gif (*.gif)</strong> ç„¶åç‚¹ <code>Save</code>ï¼Œ å‘ç°å¹¶æ²¡æœ‰å¯åŠ¨å±å¹•å½•åˆ¶ï¼Œ é‡è¯•äº†å¥½å‡ æ¬¡éƒ½æ— æ•ˆ</p><a id="more"></a>

<p>è¿™æ—¶å€™å»çœ‹å±å¹•å½•åˆ¶æƒé™, å‘ç°å¹¶æ²¡æœ‰å‹¾é€‰ LICEcapçš„é€‰é¡¹, ä¹Ÿä¸èƒ½æ‰‹åŠ¨æ·»åŠ </p>
<p>äºæ˜¯åˆ°ç½‘ä¸Šæ‰¾å‰äººç»éªŒå­¦ä¹ , å‘ç°æœ‰éƒ¨åˆ†äººçš„å±å¹•å½•åˆ¶æƒé™é‡Œé¢æœ‰LICEcapé€‰é¡¹å¯ä»¥å‹¾é€‰</p>
<p>æ‰€ä»¥çŒœæƒ³: LICEcapæœ¬èº«è‚¯å®šæœ‰ä»€ä¹ˆæ“ä½œæ˜¯ä¼šè§¦å‘ç³»ç»Ÿå¼¹çª—è¯·æ±‚å±å¹•å½•åˆ¶æƒé™çš„</p>
<p>æœç½—äº†ç½‘ä¸Šçš„å„ç§æ–¹æ³•, å¤§å®¶éƒ½è¯´æœ‰ç”¨çš„è¯´çš„æœ€å¤šçš„æ˜¯éœ€è¦æ‰§è¡Œä¸€æ¡å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ xattr -d com.apple.quarantine /Applications/LICEcap.app</span><br></pre></td></tr></table></figure>

<p>æˆ‘å°è¯•è¾“å…¥ä»¥åå‘ç°, é—®é¢˜ä¾æ—§ï¼Œ ä»æ˜¯ä¸€å¤´é›¾æ°´</p>
<p>ç„¶åè¯•ç€å°†LICEcapç‚¹å‡» <code>record</code> æŒ‰é’®ä»¥åçš„å¼¹çª—é‡Œé¢å„ä¸ªé€‰é¡¹éƒ½åˆ†åˆ«å•ç‹¬å¯ç”¨ä¸€æ¬¡, ä¸€ç›´éƒ½æ²¡ä»€ä¹ˆå˜åŒ–</p>
<p>çªå‘å¥‡æƒ³ï¼Œæƒ³åˆ°æŠŠæ–‡ä»¶åå†™å…¨ (è‡ªå·±æŠŠæ–‡ä»¶åå¸¦ä¸Š <code>.gif</code> åç¼€, æ¯”å¦‚åŸæ¥ä¸€ç›´éƒ½ç”¨ <code>record_yyyymmdd</code> è¿™ç§æ ¼å¼ï¼Œ ç„¶åè¯•ç€å†™æˆ <code>record_yyyymmdd.gif</code>)</p>
<p><img src="/assets/images/licecap_save.png" alt="ç¤ºä¾‹å›¾"></p>
<p>æ­¤æ—¶å¥‡è¿¹å‡ºç°, ç»ˆäºå¼¹å‡ºäº† LICEcap è¯·æ±‚å½•åˆ¶å±å¹•çš„è­¦å‘Šçª—å£äº†, ä½†æ˜¯åªæœ‰æ‹’ç»å’Œè¿›å…¥æƒé™è®¾ç½®ä¸¤ä¸ªé€‰é¡¹</p>
<p>è¿™å½“ç„¶ä¸æ•¢æ‹’ç»å•Šï¼Œ ç‚¹å‡»æƒé™è®¾ç½®åï¼Œ å‘ç°æœç„¶å¤šäº†ä¸€ä¸ª LICEcapçš„å‹¾é€‰å¤„äºæœªé€‰ä¸­çŠ¶æ€, è€Œä¸”æ­¤æ—¶â€¦.LICEcapå¥½åƒå·²ç»åœ¨å½•åˆ¶gifäº†</p>
<p>LICEcapçœŸNB, æˆ‘è¿˜æ²¡æˆæƒå‘¢ï¼Œ éƒ½èƒ½ç›´æ¥å½•åˆ¶äº†ã€‚ã€‚ã€‚å°±å› ä¸ºæˆ‘ <strong>æ–‡ä»¶å¤šè¾“å…¥äº†.gifåç¼€è¡¥å…¨</strong>äº†ï¼Ÿ</p>
<p>æ­¤åˆ»è¡¨ç¤º: é»‘äººé—®å·å°¼å…‹æ¨ï¼ï¼ï¼</p>
<p>ç„¶åå‘ç°, æ²¡æœ‰å‹¾é€‰æƒé™çš„æ—¶å€™, è™½ç„¶èƒ½å¯åŠ¨å½•åˆ¶, ä½†æ˜¯åªèƒ½å½•åˆ¶å±å¹•æ¡Œé¢å£çº¸</p>
<p><img src="/assets/images/licecap_not_working.gif" alt="å±å¹•å£çº¸åŠ¨å›¾"></p>
<p>å‹¾é€‰äº†æƒé™ä»¥å, å¯ä»¥å½•åˆ¶å±å¹•ä¸Šçš„å†…å®¹äº†</p>
<p><img src="/assets/images/licecap_working.gif" alt="å±å¹•å†…å®¹åŠ¨å›¾"></p>
<p>ä¸è¿‡é—®é¢˜æ€»ç®—è§£å†³, å¯ä»¥ç»§ç»­æ„‰å¿«çš„ä½¿ç”¨LICEcapå½•åˆ¶æˆ‘çš„åŠ¨å›¾äº†</p>
]]></content>
      <tags>
        <tag>macOS</tag>
        <tag>licecap</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³ä¸è’œå­(busuanzi)ä¸æ˜¾ç¤ºæ•°å­—é—®é¢˜è®°å½•</title>
    <url>/2019/10/30/busuanzi/</url>
    <content><![CDATA[<h1 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h1><p>åœ¨ä½¿ç”¨hexoå¼€å‘ä¸ªäººåšå®¢æ—¶, å¼€å¯äº†ä¸è’œå­çš„ç»Ÿè®¡é€‰é¡¹ï¼Œ ä½†æ˜¯åœ¨éƒ¨ç½²åˆ°Github Pagesä¸Šæˆ–è€…æœ¬åœ°ä½¿ç”¨serve -s ä»¥åŠpython -m SimpleHTTPServerçš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‡ºç°ä¸æ˜¾ç¤ºæ•°å­—é—®é¢˜<br>ç”±äºå·²ç»æ˜¯ä½¿ç”¨æœ€æ–°çš„åŸŸåæ¥ä¸‹è½½çš„, åº”è¯¥ä¸å­˜åœ¨busuanzi.pure.min.js çš„URLä¸å¯¹çš„æƒ…å†µ<br>ä½¿ç”¨æœ€æ–°çš„URLå¯ä»¥ç›´æ¥å°†è„šæœ¬ä¸‹è½½åˆ°æœ¬åœ°</p><a id="more"></a>
<h1 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h1><p>å°†busuanzi.pure.min.jsä¸‹è½½åˆ°æœ¬åœ°åï¼Œæ˜¾ç¤ºè¿™ä¹ˆä¸€å¤§å¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bszCaller,bszTag;!<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> c,d,e,a=!<span class="number">1</span>,b=[];ready=<span class="function"><span class="keyword">function</span>(<span class="params">c</span>)</span>&#123;<span class="keyword">return</span> a||<span class="string">"interactive"</span>===<span class="built_in">document</span>.readyState||<span class="string">"complete"</span>===<span class="built_in">document</span>.readyState?c.call(<span class="built_in">document</span>):b.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> c.call(<span class="keyword">this</span>)&#125;),<span class="keyword">this</span>&#125;,d=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=<span class="number">0</span>,c=b.length;c&gt;a;a++)b[a].apply(<span class="built_in">document</span>);b=[]&#125;,e=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;a||(a=!<span class="number">0</span>,d.call(<span class="built_in">window</span>),<span class="built_in">document</span>.removeEventListener?<span class="built_in">document</span>.removeEventListener(<span class="string">"DOMContentLoaded"</span>,e,!<span class="number">1</span>):<span class="built_in">document</span>.attachEvent&amp;&amp;(<span class="built_in">document</span>.detachEvent(<span class="string">"onreadystatechange"</span>,e),<span class="built_in">window</span>==<span class="built_in">window</span>.top&amp;&amp;(clearInterval(c),c=<span class="literal">null</span>)))&#125;,<span class="built_in">document</span>.addEventListener?<span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>,e,!<span class="number">1</span>):<span class="built_in">document</span>.attachEvent&amp;&amp;(<span class="built_in">document</span>.attachEvent(<span class="string">"onreadystatechange"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;/loaded|complete/.test(<span class="built_in">document</span>.readyState)&amp;&amp;e()&#125;),<span class="built_in">window</span>==<span class="built_in">window</span>.top&amp;&amp;(c=setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">try</span>&#123;a||<span class="built_in">document</span>.documentElement.doScroll(<span class="string">"left"</span>)&#125;<span class="keyword">catch</span>(b)&#123;<span class="keyword">return</span>&#125;e()&#125;,<span class="number">5</span>)))&#125;(),bszCaller=&#123;<span class="attr">fetch</span>:<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;<span class="keyword">var</span> c=<span class="string">"BusuanziCallback_"</span>+<span class="built_in">Math</span>.floor(<span class="number">1099511627776</span>*<span class="built_in">Math</span>.random());<span class="built_in">window</span>[c]=<span class="keyword">this</span>.evalCall(b),a=a.replace(<span class="string">"=BusuanziCallback"</span>,<span class="string">"="</span>+c),scriptTag=<span class="built_in">document</span>.createElement(<span class="string">"script"</span>),scriptTag.type=<span class="string">"text/javascript"</span>,scriptTag.defer=!<span class="number">0</span>,scriptTag.src=a,<span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(scriptTag)&#125;,<span class="attr">evalCall</span>:<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>)</span>&#123;ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">try</span>&#123;a(b); scriptTag.parentElement.removeChild(scriptTag)&#125;<span class="keyword">catch</span>(c)&#123;bszTag.hides()&#125;&#125;)&#125;&#125;&#125;,bszCaller.fetch(<span class="string">"//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;bszTag.texts(a),bszTag.shows()&#125;),bszTag=&#123;<span class="attr">bszs</span>:[<span class="string">"site_pv"</span>,<span class="string">"page_pv"</span>,<span class="string">"site_uv"</span>],<span class="attr">texts</span>:<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;<span class="keyword">this</span>.bszs.map(<span class="function"><span class="keyword">function</span>(<span class="params">b</span>)</span>&#123;<span class="keyword">var</span> c=<span class="built_in">document</span>.getElementById(<span class="string">"busuanzi_value_"</span>+b);c&amp;&amp;(c.innerHTML=a[b])&#125;)&#125;,<span class="attr">hides</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">this</span>.bszs.map(<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;<span class="keyword">var</span> b=<span class="built_in">document</span>.getElementById(<span class="string">"busuanzi_container_"</span>+a);b&amp;&amp;(b.style.display=<span class="string">"none"</span>)&#125;)&#125;,<span class="attr">shows</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">this</span>.bszs.map(<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;<span class="keyword">var</span> b=<span class="built_in">document</span>.getElementById(<span class="string">"busuanzi_container_"</span>+a);b&amp;&amp;(b.style.display=<span class="string">"inline"</span>)&#125;)&#125;&#125;;</span><br></pre></td></tr></table></figure>
<p>ç»è¿‡æ ¼å¼åŒ–å:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bszCaller, bszTag;</span><br><span class="line">! <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> c, d, e, a = !<span class="number">1</span>,</span><br><span class="line">        b = [];</span><br><span class="line">    ready = <span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a || <span class="string">"interactive"</span> === <span class="built_in">document</span>.readyState || <span class="string">"complete"</span> === <span class="built_in">document</span>.readyState ? c.call(<span class="built_in">document</span>) : b.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> c.call(<span class="keyword">this</span>)</span><br><span class="line">        &#125;), <span class="keyword">this</span></span><br><span class="line">    &#125;, d = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> a = <span class="number">0</span>, c = b.length; c &gt; a; a++) b[a].apply(<span class="built_in">document</span>);</span><br><span class="line">        b = []</span><br><span class="line">    &#125;, e = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        a || (a = !<span class="number">0</span>, d.call(<span class="built_in">window</span>), <span class="built_in">document</span>.removeEventListener ? <span class="built_in">document</span>.removeEventListener(<span class="string">"DOMContentLoaded"</span>, e, !<span class="number">1</span>) : <span class="built_in">document</span>.attachEvent &amp;&amp; (<span class="built_in">document</span>.detachEvent(<span class="string">"onreadystatechange"</span>, e), <span class="built_in">window</span> == <span class="built_in">window</span>.top &amp;&amp; (clearInterval(c), c = <span class="literal">null</span>)))</span><br><span class="line">    &#125;, <span class="built_in">document</span>.addEventListener ? <span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, e, !<span class="number">1</span>) : <span class="built_in">document</span>.attachEvent &amp;&amp; (<span class="built_in">document</span>.attachEvent(<span class="string">"onreadystatechange"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        /loaded|complete/.test(<span class="built_in">document</span>.readyState) &amp;&amp; e()</span><br><span class="line">    &#125;), <span class="built_in">window</span> == <span class="built_in">window</span>.top &amp;&amp; (c = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            a || <span class="built_in">document</span>.documentElement.doScroll(<span class="string">"left"</span>)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (b) &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        e()</span><br><span class="line">    &#125;, <span class="number">5</span>)))</span><br><span class="line">&#125;(), bszCaller = &#123;</span><br><span class="line">    fetch: <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> c = <span class="string">"BusuanziCallback_"</span> + <span class="built_in">Math</span>.floor(<span class="number">1099511627776</span> * <span class="built_in">Math</span>.random());</span><br><span class="line">        <span class="built_in">window</span>[c] = <span class="keyword">this</span>.evalCall(b), a = a.replace(<span class="string">"=BusuanziCallback"</span>, <span class="string">"="</span> + c), scriptTag = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>), scriptTag.type = <span class="string">"text/javascript"</span>, scriptTag.defer = !<span class="number">0</span>, scriptTag.src = a, <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(scriptTag)</span><br><span class="line">    &#125;,</span><br><span class="line">    evalCall: <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123;</span><br><span class="line">            ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    a(b);</span><br><span class="line">                    scriptTag.parentElement.removeChild(scriptTag)</span><br><span class="line">                &#125; <span class="keyword">catch</span> (c) &#123;</span><br><span class="line">                    bszTag.hides()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, bszCaller.fetch(<span class="string">"//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">    bszTag.texts(a), bszTag.shows()</span><br><span class="line">&#125;), bszTag = &#123;</span><br><span class="line">    bszs: [<span class="string">"site_pv"</span>, <span class="string">"page_pv"</span>, <span class="string">"site_uv"</span>],</span><br><span class="line">    texts: <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bszs.map(<span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> c = <span class="built_in">document</span>.getElementById(<span class="string">"busuanzi_value_"</span> + b);</span><br><span class="line">            c &amp;&amp; (c.innerHTML = a[b])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    hides: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bszs.map(<span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> b = <span class="built_in">document</span>.getElementById(<span class="string">"busuanzi_container_"</span> + a);</span><br><span class="line">            b &amp;&amp; (b.style.display = <span class="string">"none"</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    shows: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bszs.map(<span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> b = <span class="built_in">document</span>.getElementById(<span class="string">"busuanzi_container_"</span> + a);</span><br><span class="line">            b &amp;&amp; (b.style.display = <span class="string">"inline"</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>äºæ˜¯åˆ†æ, å…¶ä¸­bszTagèµ·åˆ°äº†æ§åˆ¶æ˜¾ç¤ºå’Œéšè—åŠŸèƒ½<br>æœç´¢ <code>bszTag.hides()</code> è°ƒç”¨<br>å‘ç°äº†è¿™ä¸ªéƒ¨åˆ†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    a(b);</span><br><span class="line">    scriptTag.parentElement.removeChild(scriptTag)</span><br><span class="line">&#125; <span class="keyword">catch</span> (c) &#123;</span><br><span class="line">    bszTag.hides()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>bszTag.hides()</code> å‰åŠ ä¸Šconsoleæ—¥å¿—, </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    a(b);</span><br><span class="line">    scriptTag.parentElement.removeChild(scriptTag)</span><br><span class="line">&#125; <span class="keyword">catch</span> (c) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(c), bszTag.hides()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæŠŠjsçš„èµ„æºURLæ›¿æ¢åˆ°ç«™å†…ï¼Œå†æ¬¡é‡æ–°æ‰“å¼€é¡µé¢æ—¶, æ‰“å°å‡ºäº†æŠ¥é”™ </p>
<p><strong>call removeChild of null</strong></p>
<p>ç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€è°ƒè¯•ç»ˆç«¯, è¾“å…¥ <code>scriptTag</code>, æ‰“å°å‡ºäº†</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">defer</span>=<span class="string">""</span> <span class="attr">src</span>=<span class="string">"//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback_95341178475"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å†è¾“å…¥ <code>scriptTag.parentElement</code>, æ‰“å°å‡ºäº†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p>äºæ˜¯ç¡®å®šé—®é¢˜å‡ºç°åœ¨äº†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">scriptTag.parentElement.removeChild(scriptTag)</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸€è¡Œ</p>
<p>ä¸ºäº†ä¸æ›´æ”¹è¿™ä¸€è¡Œä»£ç çš„åŠŸèƒ½, åˆè¦é¿å…å‡ºç°ä¸Šé¢çš„ <code>removeChild of null</code> é—®é¢˜</p>
<p>äºæ˜¯ä¿®æ”¹ä¸º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    a(b);</span><br><span class="line">    <span class="keyword">if</span>(scriptTag.parentElement) scriptTag.parentElement.removeChild(scriptTag)</span><br><span class="line">&#125; <span class="keyword">catch</span> (c) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(c), bszTag.hides()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€åé‡æ–°buildå¹¶æ‰“å¼€æœ¬åœ°æœåŠ¡å™¨, ç»ˆäºæ˜¾ç¤ºé™¤äº†localhostè¿™ä¸ªä½¿ç”¨æœ€å¹¿çš„ç«™ç‚¹åçš„è®¿é—®æ•°å­—</p>
<p>ç„¶åé‡æ–°å‹ç¼©è„šæœ¬, æ‰”åˆ°ç«™å†…çš„lib/jsç›®å½•ï¼Œ é‡æ–°buildå®Œæ¨é€è‡³Github Pages</p>
<p>åˆ·æ–°é¡µé¢, ç»ˆäºä¸€åˆ‡æ¢å¤æ­£å¸¸</p>
]]></content>
      <tags>
        <tag>busuanzi</tag>
        <tag>ä¸è’œå­</tag>
      </tags>
  </entry>
  <entry>
    <title>C++ç½‘ç»œåº“cpp-netlibçš„ç®€å•ä½¿ç”¨</title>
    <url>/2019/10/29/191029191500/</url>
    <content><![CDATA[<h1 id="å‹æƒ…é“¾æ¥"><a href="#å‹æƒ…é“¾æ¥" class="headerlink" title="å‹æƒ…é“¾æ¥:"></a>å‹æƒ…é“¾æ¥:</h1><p><a href="/2019/10/29/191029190000/">C++ç½‘ç»œåº“cpp-netlibçš„å®‰è£…</a></p><h1 id="ç®€å•ä»‹ç»"><a href="#ç®€å•ä»‹ç»" class="headerlink" title="ç®€å•ä»‹ç»"></a>ç®€å•ä»‹ç»</h1><p><strong>cpp-netlib</strong>æ˜¯åŸºäºasioåº“çš„httpç½‘ç»œåº“, åŒ…å«äº†HTTP/HTTPSå®¢æˆ·ç«¯ã€æœåŠ¡ç«¯çš„æ¥å£æ”¯æŒ</p><h1 id="cpp-netlibå®‰è£…ä½ç½®"><a href="#cpp-netlibå®‰è£…ä½ç½®" class="headerlink" title="cpp-netlibå®‰è£…ä½ç½®"></a>cpp-netlibå®‰è£…ä½ç½®</h1><p>å¤´æ–‡ä»¶ä¸€èˆ¬å®‰è£…åœ¨ </p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">$&#123;CMAKE_INSTALL_PREFIX&#125;/include/boost/network</span><br></pre></td></tr></table></figure><a id="more"></a>



<p>åº“æ–‡ä»¶(.a, .so)ä¸€èˆ¬åœ¨</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">$&#123;CMAKE_INSTALL_PREFIX&#125;/lib/</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>CMAKE_INSTALL_PREFIX</code>æ˜¯æ‰§è¡Œå®‰è£…è„šæœ¬æ—¶å€™è®¾å®šçš„è·¯å¾„ï¼Œ æ¯”å¦‚ CMAKE_INSTALL_PREFIX=/usr/localæ—¶, ä»¥ä¸Šçš„ç›®å½•åˆ™å˜ä¸º</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/include/boost/network</span><br><span class="line">/usr/<span class="built_in">local</span>/lib</span><br></pre></td></tr></table></figure>

<h1 id="å†™æœåŠ¡ç«¯ç¨‹åºæ—¶"><a href="#å†™æœåŠ¡ç«¯ç¨‹åºæ—¶" class="headerlink" title="å†™æœåŠ¡ç«¯ç¨‹åºæ—¶"></a>å†™æœåŠ¡ç«¯ç¨‹åºæ—¶</h1><h2 id="éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶"><a href="#éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶" class="headerlink" title="éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶"></a>éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;network/uri.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/network/protocol/http/server.hpp&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="éœ€è¦å¼•å…¥çš„åº“"><a href="#éœ€è¦å¼•å…¥çš„åº“" class="headerlink" title="éœ€è¦å¼•å…¥çš„åº“"></a>éœ€è¦å¼•å…¥çš„åº“</h2><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">target_link_libraries</span>(app</span><br><span class="line">    boost_system</span><br><span class="line">    network-uri</span><br><span class="line">    cppnetlib-server-parsers</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­<code>cppnetlib-server-parsers</code>æ—¶æœåŠ¡ç«¯è§£æè¯·æ±‚æ—¶æ‰€éœ€è¦çš„åº“<br><code>network-uri</code>æ˜¯æˆ‘ä»¬è‡ªå·±åœ¨è§£æè¯·æ±‚å‚æ•°çš„pathã€queryã€hostã€portã€protocolç­‰å‚æ•°éœ€è¦ç”¨åˆ°çš„åº“<br><code>boost_system</code>æ˜¯cppnetlib-server-parsersä»¥åŠæˆ‘ä»¬åœ¨ä½¿ç”¨cpp-netlibæ˜¯è°ƒç”¨çš„ä¸€äº›å€Ÿå£å†…éƒ¨ä¾èµ–çš„åº“</p>
<h1 id="ç¤ºä¾‹ä»£ç -C-11-cpp-netlib-ç‰ˆæœ¬-0-12-0"><a href="#ç¤ºä¾‹ä»£ç -C-11-cpp-netlib-ç‰ˆæœ¬-0-12-0" class="headerlink" title="ç¤ºä¾‹ä»£ç (C++11, cpp-netlib ç‰ˆæœ¬: 0.12.0)"></a>ç¤ºä¾‹ä»£ç (C++11, cpp-netlib ç‰ˆæœ¬: 0.12.0)</h1><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;network/uri.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;nlohmann/json.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sspdlog/sspdlog.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/network/protocol/http/server.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> http = boost::network::http;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> json = nlohmann::json;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Controller</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> SimpleHTTPServer = http::server&lt;Controller&gt;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Controller</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(SimpleHTTPServer::request <span class="keyword">const</span> &amp;request,</span></span></span><br><span class="line"><span class="function"><span class="params">                     SimpleHTTPServer::connection_ptr response)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( request.method == <span class="string">"GET"</span>) &#123;</span><br><span class="line">            response-&gt;set_status(SimpleHTTPServer::connection::ok);</span><br><span class="line">            response-&gt;set_headers(<span class="built_in">std</span>::<span class="built_in">map</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, <span class="built_in">std</span>::<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">                                      &#123;<span class="string">"Content-Type"</span>, <span class="string">"application/json;charset=utf-8"</span>&#125;</span><br><span class="line">                                  &#125;);</span><br><span class="line">            response-&gt;write(json&#123;</span><br><span class="line">                                &#123;<span class="string">"say"</span>, <span class="string">"Who are you?"</span>&#125;</span><br><span class="line">                            &#125;.dump(<span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[REQ] Source: "</span> &lt;&lt; request.source; <span class="comment">/// client info: &lt;ip&gt;:&lt;port&gt;</span></span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[REQ] Destination: "</span> &lt;&lt; request.destination; <span class="comment">/// path: /index?name=sb</span></span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[REQ] Body: "</span> &lt;&lt; request.body; <span class="comment">/// Body data: &#123;"data": [0, 0]&#125;</span></span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[REQ] Version: "</span> <span class="comment">/// HTTP version</span></span><br><span class="line">                      &lt;&lt; <span class="keyword">static_cast</span>&lt;<span class="keyword">unsigned</span>&gt;(request.http_version_major)</span><br><span class="line">                      &lt;&lt; <span class="string">'.'</span></span><br><span class="line">                      &lt;&lt; <span class="keyword">static_cast</span>&lt;<span class="keyword">unsigned</span>&gt;(request.http_version_minor);</span><br><span class="line"></span><br><span class="line">        network::<span class="function">uri <span class="title">uri</span><span class="params">(<span class="string">"http://localhost:9090"</span> + request.destination)</span></span>;</span><br><span class="line"></span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[URI] Host: "</span> &lt;&lt; uri.host();</span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[URI] Port: "</span> &lt;&lt; uri.port&lt;<span class="keyword">unsigned</span>&gt;();</span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[URI] Query: "</span> &lt;&lt; uri.query();</span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[URI] Route: "</span> &lt;&lt; uri.path();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">log</span><span class="params">(SimpleHTTPServer::string_type <span class="keyword">const</span> &amp;info)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"ERROR: "</span> &lt;&lt; info &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">char</span>**)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    Controller control&#123;&#125;;</span><br><span class="line">    SimpleHTTPServer::<span class="function">options <span class="title">options</span><span class="params">(control)</span></span>;</span><br><span class="line">    <span class="function">SimpleHTTPServer <span class="title">server</span><span class="params">(options.address(<span class="string">"0.0.0.0"</span>).port(<span class="string">"9090"</span>))</span></span>;</span><br><span class="line">    server.run();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ç”¨åˆ°çš„å·¥å…·åº“:<br><a href="https://github.com/nlohmann/json.git" target="_blank" rel="noopener">nlohmann/json</a><br><a href="/downloads/sspdlog_0.1.1-1_amd64.deb">sspdlog</a></p>
]]></content>
      <tags>
        <tag>C++</tag>
        <tag>cpp-netlib</tag>
      </tags>
  </entry>
  <entry>
    <title>C++ç½‘ç»œåº“cpp-netlibçš„å®‰è£…</title>
    <url>/2019/10/29/191029190000/</url>
    <content><![CDATA[<h1 id="å¼€å‘ç¯å¢ƒ-Ubuntu-16-04"><a href="#å¼€å‘ç¯å¢ƒ-Ubuntu-16-04" class="headerlink" title="å¼€å‘ç¯å¢ƒ: Ubuntu 16.04"></a>å¼€å‘ç¯å¢ƒ: Ubuntu 16.04</h1><ol>
<li>å®‰è£…boost</li>
</ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ sudo aptitude install libboost-all-dev</span><br></pre></td></tr></table></figure><ol start="2">
<li>å®‰è£…openssl</li>
</ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ sudo aptitude install openssl libssl-dev</span><br></pre></td></tr></table></figure><h1 id="ä¸‹è½½cpp-netlib"><a href="#ä¸‹è½½cpp-netlib" class="headerlink" title="ä¸‹è½½cpp-netlib"></a>ä¸‹è½½cpp-netlib</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ mkdir -p workspace</span><br><span class="line">~$ <span class="built_in">cd</span> workspace</span><br><span class="line">~$ git <span class="built_in">clone</span> https://github.com/cpp-netlib/cpp-netlib</span><br></pre></td></tr></table></figure><a id="more"></a>







<h1 id="æ›´æ–°cpp-netlibçš„ä¸‰æ–¹ä¾èµ–"><a href="#æ›´æ–°cpp-netlibçš„ä¸‰æ–¹ä¾èµ–" class="headerlink" title="æ›´æ–°cpp-netlibçš„ä¸‰æ–¹ä¾èµ–"></a>æ›´æ–°cpp-netlibçš„ä¸‰æ–¹ä¾èµ–</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ <span class="built_in">cd</span> cpp-netlib</span><br><span class="line">~$ git submodule init</span><br><span class="line">~$ git submodule update</span><br></pre></td></tr></table></figure>

<h1 id="ä¿®æ”¹-build-shè„šæœ¬é€‚åˆè‡ªå·±çš„ç¼–è¯‘-å¦‚å¯åŠ¨å…±äº«åº“ï¼Œ-å¯åŠ¨HTTPSç­‰é€‰é¡¹"><a href="#ä¿®æ”¹-build-shè„šæœ¬é€‚åˆè‡ªå·±çš„ç¼–è¯‘-å¦‚å¯åŠ¨å…±äº«åº“ï¼Œ-å¯åŠ¨HTTPSç­‰é€‰é¡¹" class="headerlink" title="ä¿®æ”¹ build.shè„šæœ¬é€‚åˆè‡ªå·±çš„ç¼–è¯‘(å¦‚å¯åŠ¨å…±äº«åº“ï¼Œ å¯åŠ¨HTTPSç­‰é€‰é¡¹)"></a>ä¿®æ”¹ build.shè„šæœ¬é€‚åˆè‡ªå·±çš„ç¼–è¯‘(å¦‚å¯åŠ¨å…±äº«åº“ï¼Œ å¯åŠ¨HTTPSç­‰é€‰é¡¹)</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">set</span> -e</span><br><span class="line"></span><br><span class="line">cmake -Bbuild -H. \</span><br><span class="line">  -DCMAKE_BUILD_TYPE=Release \</span><br><span class="line">  -DBUILD_SHARED_LIBS=ON \</span><br><span class="line">  -DCPP-NETLIB_ENABLE_HTTPS=ON \</span><br><span class="line">  -DCPP-NETLIB_BUILD_EXAMPLES=OFF \</span><br><span class="line">  -DCPP-NETLIB_BUILD_DOCS=ON \</span><br><span class="line">  -DUri_BUILD_TESTS=OFF \</span><br><span class="line">  -DUri_BUILD_DOCS=ON \</span><br><span class="line">  -DUri_DISABLE_LIBCXX=ON \</span><br><span class="line">  -DCMAKE_CXX_FLAGS=<span class="string">"-std=c++11 <span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span>"</span> \</span><br><span class="line">  -DCMAKE_INSTALL_PREFIX=/usr/<span class="built_in">local</span></span><br><span class="line">cmake --build build</span><br></pre></td></tr></table></figure>

<h1 id="æ‰§è¡Œbuild-shè„šæœ¬ç¼–è¯‘"><a href="#æ‰§è¡Œbuild-shè„šæœ¬ç¼–è¯‘" class="headerlink" title="æ‰§è¡Œbuild.shè„šæœ¬ç¼–è¯‘"></a>æ‰§è¡Œbuild.shè„šæœ¬ç¼–è¯‘</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ ./build.sh</span><br></pre></td></tr></table></figure>

<h1 id="ç¼–è¯‘æ²¡æœ‰æŠ¥é”™çš„è¯-æ‰§è¡Œå®‰è£…-å¯èƒ½è¦åŠ ä¸Š-sudo"><a href="#ç¼–è¯‘æ²¡æœ‰æŠ¥é”™çš„è¯-æ‰§è¡Œå®‰è£…-å¯èƒ½è¦åŠ ä¸Š-sudo" class="headerlink" title="ç¼–è¯‘æ²¡æœ‰æŠ¥é”™çš„è¯, æ‰§è¡Œå®‰è£…(å¯èƒ½è¦åŠ ä¸Š sudo)"></a>ç¼–è¯‘æ²¡æœ‰æŠ¥é”™çš„è¯, æ‰§è¡Œå®‰è£…(å¯èƒ½è¦åŠ ä¸Š <code>sudo</code>)</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~ $  cmake --build build --target install</span><br></pre></td></tr></table></figure>

<h1 id="è‡³æ­¤cpp-netlibå®‰è£…å®Œæˆ"><a href="#è‡³æ­¤cpp-netlibå®‰è£…å®Œæˆ" class="headerlink" title="è‡³æ­¤cpp-netlibå®‰è£…å®Œæˆ"></a>è‡³æ­¤cpp-netlibå®‰è£…å®Œæˆ</h1>]]></content>
      <tags>
        <tag>cpp-netlib</tag>
        <tag>asio</tag>
        <tag>C++ Network</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ¬ç«™å¼•å¯¼</title>
    <url>/2019/10/26/index/</url>
    <content><![CDATA[<h2 id="æˆ‘çš„åšæ–‡"><a href="#æˆ‘çš„åšæ–‡" class="headerlink" title="æˆ‘çš„åšæ–‡"></a>æˆ‘çš„åšæ–‡</h2><h2 id="æˆ‘çš„å¼€æºé¡¹ç›®"><a href="#æˆ‘çš„å¼€æºé¡¹ç›®" class="headerlink" title="æˆ‘çš„å¼€æºé¡¹ç›®"></a>æˆ‘çš„å¼€æºé¡¹ç›®</h2><p>C:<br><a href="https://github.com/oyoungs/libwebsockets" target="_blank" rel="noopener">libwebsockets(å®˜æ–¹repoç¨ä½œæ”¹åŠ¨)</a><br><a href="https://github.com/oyoungs/zbuffer" target="_blank" rel="noopener">zBuffer</a><br>C++:<br><a href="https://github.com/oyoungs/dispatch" target="_blank" rel="noopener">ä¸ªäººé€šç”¨å¼€å‘å·¥å…·åº“</a><br><a href="https://github.com/oyoungs/SoundManager" target="_blank" rel="noopener">åŸºäºlibasoundåº“éŸ³é¢‘æ’­æ”¾</a><br><a href="https://github.com/oyoungs/topice" target="_blank" rel="noopener">åŸºäºrostopicçš„æœåŠ¡è°ƒç”¨å°è£…</a><br>Qt:<br><a href="https://github.com/oyoungs/QAsyncTask" target="_blank" rel="noopener">Qtå¼‚æ­¥äº‹ä»¶åº“</a></p>]]></content>
  </entry>
  <entry>
    <title>ä½¿ç”¨SDL2_mixeråº“æ’­æ”¾MP3éŸ³ä¹</title>
    <url>/2019/10/23/191023102758/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/102696213" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/102696213</a></p><h2 id="è¿è¡Œç¯å¢ƒï¼šUbuntu-16-04"><a href="#è¿è¡Œç¯å¢ƒï¼šUbuntu-16-04" class="headerlink" title="è¿è¡Œç¯å¢ƒï¼šUbuntu:16.04"></a>è¿è¡Œç¯å¢ƒï¼šUbuntu:16.04</h2><h3 id="å¼€å‘ç¯å¢ƒå‡†å¤‡"><a href="#å¼€å‘ç¯å¢ƒå‡†å¤‡" class="headerlink" title="å¼€å‘ç¯å¢ƒå‡†å¤‡"></a>å¼€å‘ç¯å¢ƒå‡†å¤‡</h3><p>å®‰è£…libsdl2-mixer-dev </p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ sudo apt install libsdl2-mixer-dev</span><br></pre></td></tr></table></figure><h3 id="éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶"><a href="#éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶" class="headerlink" title="éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶"></a>éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶</h3><a id="more"></a>



<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;SDL2/SDL.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;SDL2/SDL_mixer.h&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="éœ€è¦é“¾æ¥çš„åº“æ–‡ä»¶"><a href="#éœ€è¦é“¾æ¥çš„åº“æ–‡ä»¶" class="headerlink" title="éœ€è¦é“¾æ¥çš„åº“æ–‡ä»¶"></a>éœ€è¦é“¾æ¥çš„åº“æ–‡ä»¶</h3><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">"-pthread $&#123;CMAKE_CXX_FLAGS&#125;"</span>)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(app</span><br><span class="line">    SDL2</span><br><span class="line">    SDL2_mixer</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<h3 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h3><p>-&gt; <strong>Mix_Init</strong><br>-&gt; <strong>Mix_OpenAudio</strong><br>-&gt; <strong>Mix_LoadMUS / Mix_LoadWAV</strong><br>-&gt; <strong>Mix_PlayMusic / Mix_FadeInMusic / Mix_PlayChanel / Mix_FadeInChannel</strong><br>-&gt; <strong>Others User Operations</strong><br>-&gt; <strong>Mix_HaltMusic / Mix_FadeOutMusic / Mix_HaltChannel / Mix_FaleOutChannel</strong><br>-&gt; <strong>Mix_CloseAudio</strong><br>-&gt; <strong>Mix_Quit</strong></p>
<h3 id="é’©å­å‡½æ•°"><a href="#é’©å­å‡½æ•°" class="headerlink" title="é’©å­å‡½æ•°"></a>é’©å­å‡½æ•°</h3><ul>
<li><strong>Mix_HookMusic</strong>: ç”¨äºè®¾ç½®éŸ³ä¹æ’­æ”¾è¿‡ç¨‹ä¸­çš„å›è°ƒ</li>
<li><strong>Mix_HookMusicFinished</strong>:  ç”¨äºè®¾ç½®éŸ³ä¹æ’­æ”¾ç»“æŸæ—¶çš„å›è°ƒ</li>
</ul>
<h2 id="ç¤ºä¾‹ä»£ç -C-11"><a href="#ç¤ºä¾‹ä»£ç -C-11" class="headerlink" title="ç¤ºä¾‹ä»£ç (C++11)"></a>ç¤ºä¾‹ä»£ç (C++11)</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;SDL2/SDL.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;SDL2/SDL_mixer.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;oyoung/defer.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sspdlog/sspdlog.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;csignal&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">std</span>::function&lt;<span class="keyword">void</span>()&gt; on_signal;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">signal_TERM_handle</span><span class="params">(<span class="keyword">int</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(on_signal) on_signal();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">char</span>**)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    USE_DEFER;</span><br><span class="line"></span><br><span class="line">    on_signal = [&amp;] &#123;</span><br><span class="line">        __defer__.~Defer();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::signal(SIGTERM, signal_TERM_handle);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> n = Mix_Init(MIX_INIT_OGG | MIX_INIT_MP3 | MIX_INIT_FLAC);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">0</span>) &#123;</span><br><span class="line">        SSPD_LOG_ERROR &lt;&lt; <span class="string">"[Mix_Init] Failed initialization: "</span> &lt;&lt; Mix_GetError();</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    SSPD_LOG_INFO &lt;&lt; <span class="string">"[Mix_Init] Mix initialize successfully"</span>;</span><br><span class="line"></span><br><span class="line">    defer [=] &#123;</span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[Mix_Quit] Mix will quit"</span>;</span><br><span class="line">        Mix_Quit();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    n = Mix_OpenAudio(MIX_DEFAULT_FREQUENCY, MIX_DEFAULT_FORMAT, MIX_DEFAULT_CHANNELS, <span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        SSPD_LOG_ERROR &lt;&lt; <span class="string">"[Mix_OpenAudio] Failed open audio: "</span> &lt;&lt; Mix_GetError();</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    SSPD_LOG_INFO &lt;&lt; <span class="string">"[Mix_OpenAudio] Open Audio successfully"</span>;</span><br><span class="line"></span><br><span class="line">    defer [=] &#123;</span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[Mix_CloseAudio] Mix will close audio"</span>;</span><br><span class="line">        Mix_CloseAudio();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> music = Mix_LoadMUS(<span class="string">"/home/oyoung/Music/8.mp3"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(music == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        SSPD_LOG_ERROR &lt;&lt; <span class="string">"[Mix_LoadMUS] Failed load music: "</span> &lt;&lt; Mix_GetError();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    SSPD_LOG_INFO &lt;&lt; <span class="string">"[Mix_LoadMUS] Load music successfully"</span>;</span><br><span class="line"></span><br><span class="line">    defer [=] &#123;</span><br><span class="line">       SSPD_LOG_INFO &lt;&lt; <span class="string">"[Mix_FreeMusic] Music will be free"</span>;</span><br><span class="line">       Mix_FreeMusic(music);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    n = Mix_FadeInMusic(music, <span class="number">0</span>, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    Mix_HookMusicFinished([] &#123;</span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[Main] Music play finished"</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        SSPD_LOG_ERROR &lt;&lt; <span class="string">"[Mix_FadeInMusic] Failed fade in music: "</span> &lt;&lt; Mix_GetError();</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    SSPD_LOG_INFO &lt;&lt; <span class="string">"[Mix_FadeInMusic] Music start playing"</span>;</span><br><span class="line"></span><br><span class="line">    defer [=] &#123;</span><br><span class="line">        SSPD_LOG_INFO &lt;&lt; <span class="string">"[Mix_FadeOutMusic] Mix will fade out music"</span>;</span><br><span class="line">        Mix_FadeOutMusic(<span class="number">1000</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (Mix_PlayingMusic()) &#123;</span><br><span class="line">        SDL_Delay(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ§åˆ¶å°è¾“å‡º:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[2019-10-23 10:30:55.443]-[info]- [Mix_Init] Mix initialize successfully (main.cc <span class="comment">#32 main)</span></span><br><span class="line">[2019-10-23 10:30:55.458]-[info]- [Mix_OpenAudio] Open Audio successfully (main.cc <span class="comment">#46 main)</span></span><br><span class="line">[2019-10-23 10:30:55.458]-[info]- [Mix_LoadMUS] Load music successfully (main.cc <span class="comment">#60 main)</span></span><br><span class="line">[2019-10-23 10:30:55.458]-[info]- [Mix_FadeInMusic] Music start playing (main.cc <span class="comment">#79 main)</span></span><br><span class="line">[2019-10-23 10:31:00.712]-[info]- [Mix_FadeOutMusic] Mix will fade out music (main.cc <span class="comment">#82 operator())</span></span><br><span class="line">[2019-10-23 10:31:00.713]-[info]- [Mix_FreeMusic] Music will be free (main.cc <span class="comment">#63 operator())</span></span><br><span class="line">[2019-10-23 10:31:01.724]-[info]- [Main] Music play finished (main.cc <span class="comment">#70 operator())</span></span><br><span class="line">[2019-10-23 10:31:01.739]-[info]- [Mix_CloseAudio] Mix will close audio (main.cc <span class="comment">#49 operator())</span></span><br><span class="line">[2019-10-23 10:31:01.755]-[info]- [Mix_Quit] Mix will quit (main.cc <span class="comment">#35 operator())</span></span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>SDL</tag>
        <tag>SDL_mixer</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux æŒ‰æ–‡ä»¶åˆ—è¡¨æ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•å¹¶ä¿æŒåŸæœ‰çš„ç›®å½•ç»“æ„</title>
    <url>/2019/10/18/191018095419/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/102619309" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/102619309</a></p><h2 id="éœ€æ±‚è¯´æ˜"><a href="#éœ€æ±‚è¯´æ˜" class="headerlink" title="éœ€æ±‚è¯´æ˜"></a>éœ€æ±‚è¯´æ˜</h2><p>å½“éœ€è¦æ‹·è´å¤šä¸ªæ–‡ä»¶å¹¶ä¸”éœ€è¦ä¿ç•™æºæ–‡ä»¶çš„ç›®å½•æ ‘ç»“æ„æ—¶ï¼Œ å¦‚æœæºç›®å½•çš„æ–‡ä»¶æ¯”è¾ƒçº¯å‡€ï¼Œæ²¡æœ‰å…¶ä»–ç›¸å…³çš„æ–‡ä»¶æˆ–ç›®å½•æ—¶ï¼Œ æˆ‘ä»¬åªéœ€è¦æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ <span class="comment">#cp -r &lt;æºç›®å½•&gt; &lt;æ–°ç›®å½•&gt;</span></span><br><span class="line">~$ cp -r workspace/project workspace/Cpp</span><br></pre></td></tr></table></figure><a id="more"></a>


<p>ä½†æ˜¯, å¦‚æœæˆ‘ä»¬éœ€è¦æ‹·è´çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•é‡ŒåŒ…å«äº†å…¶ä»–é¡¹ç›®æˆ–ç¨‹åºçš„æ–‡ä»¶æˆ–ç›®å½•, é‚£æˆ‘ä»¬å°±ä¸èƒ½è¿™ä¹ˆå¹²</p>
<p>æ¯”å¦‚, </p>
<ul>
<li>åœ¨  /etcæˆ–è€…/usr/local/binä¸‹é¢æœ‰å¾ˆå¤šæˆ‘ä»¬è‡ªå·±é¡¹ç›®çš„ç›¸å…³é…ç½®æ–‡ä»¶å’Œç¨‹åºæ–‡ä»¶, å¹¶ä¸”æˆ‘ä»¬çŸ¥é“è¿™äº›æ–‡ä»¶è·¯å¾„</li>
<li>åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶å, æ¯”å¦‚ *.log</li>
<li>æˆ‘ä»¬è‡ªå·±åˆ¶ä½œæˆ–è€…æˆ‘ä»¬æ¯”è¾ƒæ„Ÿå…´è¶£çš„å…¶ä»–å‚å•†çš„ *.debç¨‹åºåŒ…(Ubuntuä½¿ç”¨è½¯ä»¶åŒ…)</li>
</ul>
<h2 id="é’ˆå¯¹è‡ªå·±çš„é¡¹ç›®é…ç½®æ–‡ä»¶"><a href="#é’ˆå¯¹è‡ªå·±çš„é¡¹ç›®é…ç½®æ–‡ä»¶" class="headerlink" title="é’ˆå¯¹è‡ªå·±çš„é¡¹ç›®é…ç½®æ–‡ä»¶"></a>é’ˆå¯¹è‡ªå·±çš„é¡¹ç›®é…ç½®æ–‡ä»¶</h2><p>æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£, é‡Œé¢æŠŠæˆ‘ä»¬æ‰€å…³å¿ƒçš„æ–‡ä»¶åˆ—å‡ºæ¥</p>
<p>list.txt</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/etc/app/app.cnf</span><br><span class="line">/etc/app/conf.d/a.cnf</span><br><span class="line">/etc/app/conf.d/b.cnf</span><br><span class="line">/etc/app/conf.d/c.cnf</span><br><span class="line">/etc/app/conf.d/d.cnf</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä½¿ç”¨ cat list.txt è·å–åˆ°æˆ‘ä»¬çš„æ–‡ä»¶è·¯å¾„åˆ—è¡¨</p>
<p>æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ cp --parent $(cat list.txt) .</span><br></pre></td></tr></table></figure>
<p>å°±å¯ä»¥å°†åˆ—è¡¨é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶æŒ‰ç…§åŸæœ‰çš„ç›®å½•æ ‘ç»“æ„æ‹·è´åˆ°å½“å‰ç›®å½•(æˆ–è€…ä½¿ç”¨å…¶ä»–ç›®å½•)</p>
<h2 id="é’ˆå¯¹åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶åæˆ‘ä»¬å¯ä»¥ç”¨-find-å‘½ä»¤è·å–åˆ°æ–‡ä»¶åˆ—è¡¨"><a href="#é’ˆå¯¹åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶åæˆ‘ä»¬å¯ä»¥ç”¨-find-å‘½ä»¤è·å–åˆ°æ–‡ä»¶åˆ—è¡¨" class="headerlink" title="é’ˆå¯¹åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶åæˆ‘ä»¬å¯ä»¥ç”¨ find å‘½ä»¤è·å–åˆ°æ–‡ä»¶åˆ—è¡¨"></a>é’ˆå¯¹åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶åæˆ‘ä»¬å¯ä»¥ç”¨ find å‘½ä»¤è·å–åˆ°æ–‡ä»¶åˆ—è¡¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ find /opt/ros/ -name *.a</span><br><span class="line">/opt/ros/kinetic/lib/liboctomath.a</span><br><span class="line">/opt/ros/kinetic/lib/libcsm-static.a</span><br><span class="line">/opt/ros/kinetic/lib/liboptions.a</span><br><span class="line">/opt/ros/kinetic/lib/libegsl.a</span><br><span class="line">/opt/ros/kinetic/lib/liboctomap.a</span><br><span class="line">~$</span><br></pre></td></tr></table></figure>
<p>ç„¶å, å˜¿å˜¿ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ cp --parent $(find /opt/ros -name *.a) .</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸å°±éƒ½æŒ‰ç…§æºç›®å½•ç»“æ„æ‹·è´åˆ°å½“å‰ç›®å½•äº†å˜›</p>
<h2 id="é’ˆå¯¹-debåŒ…çš„æ–‡ä»¶åˆ—è¡¨-æˆ‘ä»¬ä¹Ÿæœ‰å‘½ä»¤å¯ä»¥è·å–åˆ°è·¯å¾„åˆ—è¡¨"><a href="#é’ˆå¯¹-debåŒ…çš„æ–‡ä»¶åˆ—è¡¨-æˆ‘ä»¬ä¹Ÿæœ‰å‘½ä»¤å¯ä»¥è·å–åˆ°è·¯å¾„åˆ—è¡¨" class="headerlink" title="é’ˆå¯¹.debåŒ…çš„æ–‡ä»¶åˆ—è¡¨, æˆ‘ä»¬ä¹Ÿæœ‰å‘½ä»¤å¯ä»¥è·å–åˆ°è·¯å¾„åˆ—è¡¨"></a>é’ˆå¯¹.debåŒ…çš„æ–‡ä»¶åˆ—è¡¨, æˆ‘ä»¬ä¹Ÿæœ‰å‘½ä»¤å¯ä»¥è·å–åˆ°è·¯å¾„åˆ—è¡¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ dpkg -L mysql-server-5.7 </span><br><span class="line">/etc</span><br><span class="line">/etc/mysql</span><br><span class="line">/etc/mysql/mysql.conf.d</span><br><span class="line">/etc/mysql/mysql.conf.d/mysqld_safe_syslog.cnf</span><br><span class="line">/etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class="line">/etc/mysql/debian-start</span><br><span class="line">/etc/mysql/mysql.cnf</span><br><span class="line">/etc/apparmor.d</span><br><span class="line">/etc/apparmor.d/usr.sbin.mysqld</span><br><span class="line">/etc/logrotate.d</span><br><span class="line">/etc/logrotate.d/mysql-server</span><br><span class="line">/etc/init.d</span><br><span class="line">/etc/init.d/mysql</span><br><span class="line">/etc/logcheck</span><br><span class="line">/etc/logcheck/ignore.d.server</span><br><span class="line">/etc/logcheck/ignore.d.server/mysql-server-5_7</span><br><span class="line">/etc/logcheck/ignore.d.workstation</span><br><span class="line">/etc/logcheck/ignore.d.workstation/mysql-server-5_7</span><br><span class="line">/etc/logcheck/ignore.d.paranoid</span><br><span class="line">/etc/logcheck/ignore.d.paranoid/mysql-server-5_7</span><br><span class="line">/etc/init</span><br><span class="line">/etc/init/mysql.conf</span><br><span class="line">~$</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥â€¦. -_- å˜¿å˜¿å˜¿ , ä½ æ‡‚çš„</p>
]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL C/C++å®¢æˆ·ç«¯api(libmysqlclient-dev) çš„ä½¿ç”¨ç¬”è®°</title>
    <url>/2019/09/20/190920182322/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/101072215" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/101072215</a></p><h2 id="MySQL-å®¢æˆ·ç«¯-api-libmysqlclient-dev-çš„ç®€å•ä½¿ç”¨"><a href="#MySQL-å®¢æˆ·ç«¯-api-libmysqlclient-dev-çš„ç®€å•ä½¿ç”¨" class="headerlink" title="MySQL å®¢æˆ·ç«¯ api (libmysqlclient-dev)çš„ç®€å•ä½¿ç”¨"></a>MySQL å®¢æˆ·ç«¯ api (libmysqlclient-dev)çš„ç®€å•ä½¿ç”¨</h2><h2 id="å‡ ä¸ªå¸¸ç”¨é‡è¦æ¥å£"><a href="#å‡ ä¸ªå¸¸ç”¨é‡è¦æ¥å£" class="headerlink" title="å‡ ä¸ªå¸¸ç”¨é‡è¦æ¥å£"></a>å‡ ä¸ªå¸¸ç”¨é‡è¦æ¥å£</h2><ul>
<li>mysql_library_init()</li>
<li>mysql_library_end()</li>
<li>mysql_init()</li>
<li>mysql_connect() / mysql_real_connect()</li>
<li>mysql_query() / mysql_real_query()</li>
<li>mysql_num_fileds()</li>
<li>mysql_num_rows()</li>
<li>mysql_fetch_field() / mysql_fetch_fields()</li>
<li>mysql_fetch_row()</li>
<li>mysql_affected_row()</li>
</ul><a id="more"></a>

<h2 id="å‡ ä¸ªé‡è¦æ•°æ®ç±»å‹"><a href="#å‡ ä¸ªé‡è¦æ•°æ®ç±»å‹" class="headerlink" title="å‡ ä¸ªé‡è¦æ•°æ®ç±»å‹"></a>å‡ ä¸ªé‡è¦æ•°æ®ç±»å‹</h2><ul>
<li>MYSQL</li>
<li>MYSQL_RES</li>
<li>MYSQL_ROW</li>
<li>MYSQL_FIELD</li>
</ul>
<h2 id="ç¼–è¯‘é€‰é¡¹"><a href="#ç¼–è¯‘é€‰é¡¹" class="headerlink" title="ç¼–è¯‘é€‰é¡¹"></a>ç¼–è¯‘é€‰é¡¹</h2><p>cmake</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span>(CMAKE_CXX_FLAGS <span class="string">"-g -lmysqlclient -pthread -lz -lm -lrt -ldl <span class="variable">$CMAKE_CXX_FLAGS</span>"</span>)</span><br></pre></td></tr></table></figure>

<p>g++ build</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">g++ -o mysql -lmysqlclient -I/usr/include/mysql -L/usr/lib/x86_64-linux-gnu -pthread -lz -lm -lrt -ldl -g main.cc</span><br></pre></td></tr></table></figure>

<h2 id="ç¤ºä¾‹ç¨‹åº"><a href="#ç¤ºä¾‹ç¨‹åº" class="headerlink" title="ç¤ºä¾‹ç¨‹åº"></a>ç¤ºä¾‹ç¨‹åº</h2><p>å°æç¤º:</p>
<blockquote>
<p>ç¤ºä¾‹ä»£ç ä¸­ä½¿ç”¨åˆ°äº†å¦å¤–ä¸¤ä¸ªä¸‰æ–¹åº“<br>ä¸€ä¸ªä¸‰æ–¹åº“æ—¶sspdlog, æ—¥å¿—åº“<br>#include &lt;sspdlog/sspdlog.h&gt; å¯ä»¥æ›¿æ¢æˆ &lt;iostream&gt;,<br>SSPD_LOG_INFOå¯ä»¥æ›¿æ¢ä¸ºstd::cout,<br>SSPD_LOG_ERRORå¯ä»¥æ›¿æ¢ä¸ºstd::cerr<br>å¦ä¸€ä¸ªä¸‰æ–¹åº“ ä¸º è‡ªå·±çš„ å·¥å…·åº“ <a href="https://github.com/oyoungs/dispatch" target="_blank" rel="noopener">oyoungs/dispatch</a>, å¯ä»¥åˆ°githubä¸Šä¸‹è½½</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mysql/mysql.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sspdlog/sspdlog.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;oyoung/format.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> mysql &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">library</span> &#123;</span></span><br><span class="line">        library(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, <span class="keyword">char</span> **groups) &#123;</span><br><span class="line">            <span class="keyword">if</span>(mysql_library_init(argc, argv, groups)) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="built_in">std</span>::runtime_error(<span class="string">"MYSQL Initialize failed"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ~library() &#123;</span><br><span class="line">            mysql_library_end();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">row</span> &#123;</span></span><br><span class="line"></span><br><span class="line">        row(MYSQL_ROW row): m_row(row) &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ~row() &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">operator</span> <span class="title">bool</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> m_row;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">string</span> <span class="keyword">operator</span>[](<span class="built_in">std</span>::<span class="keyword">size_t</span> index) <span class="keyword">const</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> m_row[index];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        row(<span class="keyword">const</span> row&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">        row(row&amp;&amp; other): m_row(other.m_row) &#123;</span><br><span class="line">            other.m_row = <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        MYSQL_ROW m_row&#123;<span class="literal">nullptr</span>&#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">field</span> &#123;</span></span><br><span class="line"></span><br><span class="line">        field(MYSQL_FIELD *field): m_field(field) &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">name</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> m_field-&gt;name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">catalog</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">std</span>::<span class="built_in">string</span>(m_field-&gt;catalog, m_field-&gt;catalog_length);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ~field() &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        field(<span class="keyword">const</span> field&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">        field(field&amp;&amp; other): m_field(other.m_field) &#123;</span><br><span class="line">            other.m_field = <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">        MYSQL_FIELD *m_field&#123;<span class="literal">nullptr</span>&#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">fields</span> :</span> field &#123;</span><br><span class="line"></span><br><span class="line">        fields(MYSQL_FIELD *f) : field(f) &#123;&#125;</span><br><span class="line"></span><br><span class="line">        field <span class="keyword">operator</span>[](<span class="built_in">std</span>::<span class="keyword">size_t</span> index) &#123;</span><br><span class="line">            <span class="keyword">return</span> m_field + index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">result</span> &#123;</span></span><br><span class="line">        result() = <span class="keyword">default</span>;</span><br><span class="line">        result(MYSQL_RES *res): m_result(res) &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ~result() &#123;</span><br><span class="line">            <span class="keyword">if</span>(m_result) &#123;</span><br><span class="line">                ::mysql_free_result(m_result);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        result(<span class="keyword">const</span> result&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">        result(result&amp;&amp; other): m_result(other.m_result) &#123;</span><br><span class="line">            other.m_result = <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">row <span class="title">fetch_row</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> mysql_fetch_row(m_result);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="keyword">uint64_t</span> rows() <span class="keyword">const</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mysql_num_rows(m_result);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">unsigned</span> <span class="title">field_count</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> ::mysql_num_fields(m_result);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">fields <span class="title">fetch_fields</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> mysql_fetch_fields(m_result);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        MYSQL_RES *m_result &#123;<span class="literal">nullptr</span>&#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">client</span> &#123;</span></span><br><span class="line">        client()</span><br><span class="line">            : m_client(mysql_init(<span class="literal">nullptr</span>)) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">good</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span> != m_client;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">not_good</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span> == m_client;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">connect</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; host, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; user, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; password, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; database,</span></span></span><br><span class="line"><span class="function"><span class="params">                     <span class="keyword">unsigned</span> <span class="keyword">short</span> port = <span class="number">3306</span>)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> mysql_real_connect(m_client, host.c_str(), user.c_str(), password.c_str(), database.c_str(), port, <span class="literal">nullptr</span>, <span class="number">0</span>) != <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">query</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; sql)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> mysql_real_query(m_client, sql.c_str(), sql.length()) == <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="keyword">uint64_t</span> affected_rows() <span class="keyword">const</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mysql_affected_rows(m_client);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="keyword">uint64_t</span> inserted_id() <span class="keyword">const</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mysql_insert_id(m_client);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">result <span class="title">use_result</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> result(mysql_use_result(m_client));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ~client() &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">error</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> mysql_error(m_client);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        MYSQL *m_client;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>**argv)</span> <span class="keyword">try</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    mysql::<span class="function">library <span class="title">library</span><span class="params">(argc, argv, <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    mysql::client client&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(client.not_good()) &#123;</span><br><span class="line">        SSPD_LOG_ERROR &lt;&lt; <span class="string">"Create MySQL client failed"</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!client.connect(<span class="string">"172.17.0.2"</span>, <span class="string">"blog"</span>, <span class="string">"blog.123"</span>, <span class="string">"blog"</span>)) &#123;</span><br><span class="line">        SSPD_LOG_ERROR &lt;&lt; <span class="string">"MySQL connect failed: "</span> &lt;&lt; client.error();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!client.query(<span class="string">"INSERT INTO user set name='blog', email='blog@hotmail.com'"</span>)) &#123;</span><br><span class="line">        SSPD_LOG_ERROR &lt;&lt; <span class="string">"MySQL query INSERT failed: "</span> &lt;&lt; client.error();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    SSPD_LOG_INFO &lt;&lt; <span class="string">"MySQL affected rows after insert: "</span> &lt;&lt; client.affected_rows();</span><br><span class="line">    SSPD_LOG_INFO &lt;&lt; <span class="string">"MySQL last inserted ID: "</span> &lt;&lt; client.inserted_id();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!client.query(<span class="string">"SELECT id, name, email FROM user"</span>)) &#123;</span><br><span class="line">        SSPD_LOG_ERROR &lt;&lt; <span class="string">"MySQL query SELECT failed: "</span> &lt;&lt; client.error();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> result = client.use_result();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> field_count = result.field_count();</span><br><span class="line">    <span class="keyword">auto</span> fields      = result.fetch_fields();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">auto</span> row = result.fetch_row()) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i = <span class="number">0</span>; i &lt; field_count; ++i) &#123;</span><br><span class="line">            SSPD_LOG_INFO &lt;&lt; fields[i].name() &lt;&lt; <span class="string">": "</span> &lt;&lt; row[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!client.query(oyoung::format(<span class="string">"DELETE FROM user WHERE id=%1"</span>).arg(client.inserted_id()).to_string())) &#123;</span><br><span class="line">        SSPD_LOG_ERROR &lt;&lt; <span class="string">"MySQL query DELETE failed: "</span> &lt;&lt; client.error();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    SSPD_LOG_INFO &lt;&lt; <span class="string">"MySQL affected rows after delete: "</span> &lt;&lt; client.affected_rows();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span>(<span class="keyword">const</span> <span class="built_in">std</span>::exception&amp; e) &#123;</span><br><span class="line">    SSPD_LOG_ERROR &lt;&lt; e.what();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>C/C++</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>C++11å®ç°defer</title>
    <url>/2018/05/24/C-11%E5%AE%9E%E7%8E%B0defer/</url>
    <content><![CDATA[<h1 id="é—®é¢˜æå‡º"><a href="#é—®é¢˜æå‡º" class="headerlink" title="é—®é¢˜æå‡º"></a>é—®é¢˜æå‡º</h1><p>ä½¿ç”¨è¿‡swiftå¼€å‘è¿‡iOSåº”ç”¨çš„å¹¿å¤§æ¬ç –å·¥éƒ½çŸ¥é“ï¼Œ åœ¨swiftè¯­è¨€é‡Œï¼Œ æœ‰ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å…³é”®å­— defer<br>è¿™ä¸ªdeferæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ<br>åœ¨æŸä¸ªå‡½æ•°æˆ–è€…ä»£ç å—ä¸­ï¼Œ å¦‚æœä½¿ç”¨äº†defer æ·»åŠ äº†ä¸€æ®µä»£ç ï¼Œ ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ<br>å“ˆå“ˆï¼Œ å½“ç„¶æ˜¯ åœ¨ä»£ç å—ç»“æŸæ—¶ï¼Œ ä¸€å®šä¼šè°ƒç”¨è¿™æ®µä»£ç äº†ã€‚<br>è¿™æ ·æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ<br>æˆ‘ä»¬çŸ¥é“ï¼Œ æœ‰äº›æ“ä½œéœ€è¦å¾ˆå¤šæ­¥éª¤ï¼Œå…¶ä¸­ä¸€æ­¥å‡ºé”™ï¼Œå°±å¯èƒ½éœ€è¦æ˜¯æ•´ä¸ªæ“ä½œæµç¨‹ç»“æŸï¼Œ ä½†æ˜¯ç»“æŸä¹‹å‰é‚£äº›å·²ç»ç”³è¯·çš„èµ„æºæ€ä¹ˆåŠå‘¢ï¼Ÿ å¦‚æœä¸å¤„ç†è‚¯å®šä¼šå‡ºç°èµ„æºæ³„éœ²çš„å•Šã€‚è¿™æ˜¯deferå°±æ´¾ä¸Šç”¨åœºäº†ï¼Œä½¿ç”¨defer ä¹‹åï¼Œ åœ¨åé¢çš„ä»£ç å—ä¸­å»é‡Šæ”¾ç”³è¯·å ç”¨çš„èµ„æºï¼Œ å°±ä¼šä¿è¯åœ¨ä»£ç å—ç»“æŸä¹‹å‰ä¸€å®šä¼šè°ƒç”¨è¿™ä¸ªdeferä»£ç å—æ¥é‡Šæ”¾èµ„æºï¼Œ ä¿è¯äº†ä¸€å®šçš„å®‰å…¨æ€§</p><a id="more"></a>
<h1 id="é—®é¢˜æ€è·¯"><a href="#é—®é¢˜æ€è·¯" class="headerlink" title="é—®é¢˜æ€è·¯"></a>é—®é¢˜æ€è·¯</h1><p>é‚£ä½œä¸ºä¸€åC++å¼€å‘è€…æ¥è¯´ï¼Œæœ‰æ²¡æœ‰è¿™ä¸ªä¾¿åˆ©çš„å·¥å…·å‘¢ï¼Ÿ<br>è€å®è¯´ï¼Œ ä»åŸç”ŸC++è§’åº¦æ¥è¯´ï¼Œ æ˜¯æ²¡æœ‰è¿™ä¸ªå·¥å…·çš„ï¼Œæœ‰ç‚¹å¯æƒœï¼ é‚£æˆ‘ä»¬èƒ½ä¸èƒ½è‡ªå·±å®ç°å‘¢ï¼Ÿ</p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><pre><code>1.  defer åŠŸèƒ½æ˜¯é€€å‡ºä»£ç å—æ—¶å¿…å®šä¼šæ‰§è¡Œä»£ç ï¼Œ C++é‡Œé¢æœ‰è¿™ç§æœºåˆ¶å—ï¼Ÿ å½“ç„¶æœ‰å•Šï¼Œ å±€éƒ¨å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œ å¯è¡Œæ€§ +1
2.  defer åé¢æ¥çš„æ˜¯ä»£ç å—ï¼Œ C++11ä»¥åï¼Œ ä¹Ÿæœ‰äº†lambdaè¡¨è¾¾å¼çš„æ”¯æŒï¼Œ å¯è¡Œæ€§å†æ¬¡ +1
3.  defer åé¢æ‰€æ¥çš„ä»£ç å—æ˜¯ä¸å¸¦æ‹¬å·å°¾éƒ¨é—­åŒ…æ ¼å¼ï¼Œ C++ æœ‰ä»€ä¹ˆæ–¹å¼å¯ä»¥ä»¥å‡½æ•°å¯¹è±¡ä¸ºå‚æ•°ä¸”ä¸éœ€è¦æ‹¬å·å°±èƒ½è°ƒç”¨çš„å‘¢ï¼Ÿ å“ˆå“ˆï¼Œ æœ‰ï¼Œ + - * /  &lt;&lt; &gt;&gt; +=  -= ç­‰ç­‰æ“ä½œç¬¦è°ƒç”¨æ—¶ä¸éœ€è¦åŠ æ‹¬å·ï¼Œ å¯è¡Œæ€§å†æ¬¡ +1</code></pre><h1 id="å¦‚ä½•å®ç°"><a href="#å¦‚ä½•å®ç°" class="headerlink" title="å¦‚ä½•å®ç°"></a>å¦‚ä½•å®ç°</h1><ul>
<li>éœ€è¦å®šä¹‰ä¸€ä¸ªç±»</li>
<li>è¿™ä¸ªç±»å¯ä»¥é€šè¿‡è°ƒç”¨æ“ä½œç¬¦çš„æ–¹å¼å¾€å†…éƒ¨è¿½åŠ ä¸€ä¸ªä»£ç å—</li>
<li>è¯¥ç±»çš„å¯¹è±¡ææ„æ—¶ï¼Œ ä¸€å®šä¼šå»è°ƒç”¨å†…éƒ¨ä¿å­˜çš„ä»£ç å—</li>
</ul>
<h2 id="åŠ¨æ‰‹è¯•è¯•"><a href="#åŠ¨æ‰‹è¯•è¯•" class="headerlink" title="åŠ¨æ‰‹è¯•è¯•"></a>åŠ¨æ‰‹è¯•è¯•</h2><p>ä¸å¦‚æˆ‘ä»¬å°±å®šä¹‰ä¸€ä¸ªç±»å«Deferå¥½äº†ï¼Œ è‡³äºç”¨å“ªä¸ªæ“ä½œç¬¦å‘¢ï¼Ÿ å‡­è‡ªå·±å–œå¥½å•Šï¼Œ æˆ‘è¿™é‡Œä½¿ç”¨äº† += è¡¨ç¤ºå¾€é‡Œå¤´è¿½åŠ ï¼Œ å“ˆå“ˆ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Defer</span> &#123;</span></span><br><span class="line">    Defer&amp; <span class="keyword">operator</span>+=(<span class="built_in">std</span>::function&lt;<span class="keyword">void</span>()&gt; block) &#123;</span><br><span class="line">        m_defers.emplace_back(<span class="built_in">std</span>::move(block));</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Defer() &#123;</span><br><span class="line">        <span class="keyword">while</span> (!m_defers.empty()) &#123;</span><br><span class="line">            <span class="keyword">if</span>(m_defers.back()) m_defers.back()();</span><br><span class="line">            m_defers.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::function&lt;<span class="keyword">void</span>()&gt;&gt; m_defers;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> USE_DEFER Defer __defer__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> defer __defer__ +=</span></span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•çœ‹çœ‹ï¼Ÿ"><a href="#æµ‹è¯•çœ‹çœ‹ï¼Ÿ" class="headerlink" title="æµ‹è¯•çœ‹çœ‹ï¼Ÿ"></a>æµ‹è¯•çœ‹çœ‹ï¼Ÿ</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  USE_DEFER;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">auto</span> a = <span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">10</span>);</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"new a"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  defer [=] &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"delete a"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">delete</span> a;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">auto</span> b = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">100</span>];</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"new [] b"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  defer [=] &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"delete [] b"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">delete</span> [] b;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœæ˜¯ä¸æ˜¯é¢„æœŸçš„å‘¢ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">new a</span><br><span class="line">new [] b</span><br><span class="line">delete [] b</span><br><span class="line">delete a</span><br></pre></td></tr></table></figure>

<p>å“ˆå“ˆï¼Œ è¿˜çœŸæ˜¯ï¼ï¼ åŠŸèƒ½å®ç°äº†</p>
<h2 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h2><p>è¿™é‡Œçš„ defer è¿˜èƒ½ç”¨åœ¨ç±»ä¸­ï¼Œ ç¡®ä¿èµ„æºåœ¨ç±»å¯¹è±¡ææ„çš„æ—¶å€™èƒ½æ­£ç¡®çš„é‡Šæ”¾èµ„æº</p>
<p>æ¯”å¦‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">File</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    File(<span class="built_in">std</span>::<span class="built_in">string</span> path)</span><br><span class="line">        : m_path(<span class="built_in">std</span>::move(path)) &#123;</span><br><span class="line">        defer [=] &#123;</span><br><span class="line">            <span class="keyword">if</span>(m_descriptor &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"close file "</span> &lt;&lt; m_path &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">                ::close(m_descriptor);</span><br><span class="line">                m_descriptor = <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">open</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"open file "</span> &lt;&lt; m_path &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        m_descriptor = ::open(m_path.c_str(), O_RDONLY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    USE_DEFER;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> m_path;</span><br><span class="line">    <span class="keyword">int</span> m_descriptor&#123;<span class="number">-1</span>&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">char</span>**)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">File <span class="title">file</span><span class="params">(<span class="string">"./test.log"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    file.open();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¢„æœŸç»“æœ<br>â‘  å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">open file ./test.log</span><br></pre></td></tr></table></figure>
<p>â‘¡ å½“æ–‡ä»¶å­˜åœ¨æ—¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">open file ./test.log</span><br><span class="line">close file ./test.log</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>C++11</tag>
        <tag>defer</tag>
      </tags>
  </entry>
  <entry>
    <title>é›¶åŸºç¡€å­¦iOSç³»åˆ—ä¹‹swiftè¯­æ³•åŸºç¡€</title>
    <url>/2017/11/15/171115190448/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/78543979" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/78543979</a></p><h1 id="1-å˜é‡ä¸æ•°æ®ç±»å‹"><a href="#1-å˜é‡ä¸æ•°æ®ç±»å‹" class="headerlink" title="1.  å˜é‡ä¸æ•°æ®ç±»å‹"></a>1.  å˜é‡ä¸æ•°æ®ç±»å‹</h1><h2 id="a-æ•°æ®ç±»å‹"><a href="#a-æ•°æ®ç±»å‹" class="headerlink" title="a)   æ•°æ®ç±»å‹"></a>a)   æ•°æ®ç±»å‹</h2><h3 id="i-åŸºæœ¬æ•°æ®ç±»å‹"><a href="#i-åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="i.     åŸºæœ¬æ•°æ®ç±»å‹"></a>i.     åŸºæœ¬æ•°æ®ç±»å‹</h3><p>æ•´æ•°ç±»å‹ </p><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Int</span>, <span class="type">UInt</span>, <span class="type">Int8</span>, <span class="type">UInt8</span>, <span class="type">Int16</span>,<span class="type">UInt16</span>, <span class="type">Int32</span>, <span class="type">UInt32</span>, <span class="type">Int64</span>, <span class="type">UInt64</span></span><br></pre></td></tr></table></figure><a id="more"></a>


<p>å®æ•°ç±»å‹ </p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Double</span>, <span class="type">CGFloat</span></span><br></pre></td></tr></table></figure>
<p>å­—ç¬¦ä¸² </p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span></span><br></pre></td></tr></table></figure>
<p>é›†åˆç±»å‹ </p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Array</span>, <span class="type">Dictionary</span></span><br></pre></td></tr></table></figure>
<h3 id="ii-ç±»å‹ä¹‹é—´çš„è½¬æ¢-è°ƒç”¨ç›®æ ‡ç±»å‹çš„æ„é€ å‡½æ•°"><a href="#ii-ç±»å‹ä¹‹é—´çš„è½¬æ¢-è°ƒç”¨ç›®æ ‡ç±»å‹çš„æ„é€ å‡½æ•°" class="headerlink" title="ii.     ç±»å‹ä¹‹é—´çš„è½¬æ¢(è°ƒç”¨ç›®æ ‡ç±»å‹çš„æ„é€ å‡½æ•°)"></a>ii.     ç±»å‹ä¹‹é—´çš„è½¬æ¢(è°ƒç”¨ç›®æ ‡ç±»å‹çš„æ„é€ å‡½æ•°)</h3><p>æ•´æ•°ç±»å‹ â€“&gt; å®æ•°ç±»å‹:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> n: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> b: <span class="type">Double</span> = <span class="type">Double</span>(n)</span><br></pre></td></tr></table></figure>
<p>æ•°å­—ç±»å‹ -&gt; å­—ç¬¦ä¸²ç±»å‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">4</span></span><br><span class="line"><span class="keyword">let</span> stringValue = <span class="type">String</span>(number)</span><br></pre></td></tr></table></figure>
<h2 id="b-å˜é‡çš„å£°æ˜"><a href="#b-å˜é‡çš„å£°æ˜" class="headerlink" title="b)   å˜é‡çš„å£°æ˜"></a>b)   å˜é‡çš„å£°æ˜</h2><h3 id="i-åŸºæœ¬å£°æ˜æ–¹æ³•"><a href="#i-åŸºæœ¬å£°æ˜æ–¹æ³•" class="headerlink" title="i.     åŸºæœ¬å£°æ˜æ–¹æ³•"></a>i.     åŸºæœ¬å£°æ˜æ–¹æ³•</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span>/<span class="keyword">var</span> name[: <span class="type">Type</span>][ = <span class="type">Initialization</span>]</span><br></pre></td></tr></table></figure>
<p>ä¸­æ‹¬å·å†…è¡¨ç¤ºå¯çœç•¥, ä½†ç¬¬ä¸€ä¸ªä¸­æ‹¬å·ä¸ç¬¬äºŒä¸ªä¸­æ‹¬å·å†…çš„å†…å®¹åªèƒ½çœç•¥ä¸€å¤„ï¼Œ é™¤äº†ç±»æˆå‘˜å±æ€§æœ‰é»˜è®¤å€¼çš„æƒ…å†µä¸éœ€è¦çœç•¥ï¼Œå…¶ä»–å‡å»ºè®®é‡‡ç”¨çœç•¥å½¢å¼ï¼Œ å¦‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> string: <span class="type">String?</span></span><br></pre></td></tr></table></figure>
<h3 id="ii-ä½¿ç”¨letå£°æ˜"><a href="#ii-ä½¿ç”¨letå£°æ˜" class="headerlink" title="ii.     ä½¿ç”¨letå£°æ˜"></a>ii.     ä½¿ç”¨letå£°æ˜</h3><p>è¡¨ç¤ºå¸¸é‡ï¼Œå£°æ˜ä¹‹ååªå…è®¸æœ‰ä¸€æ¬¡èµ‹å€¼ï¼Œ å¦‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">10</span></span><br><span class="line">x = <span class="number">100</span> <span class="comment">//ç¼–è¯‘ä¸é€šè¿‡</span></span><br></pre></td></tr></table></figure>
<h3 id="iii-ä½¿ç”¨varå£°æ˜"><a href="#iii-ä½¿ç”¨varå£°æ˜" class="headerlink" title="iii.     ä½¿ç”¨varå£°æ˜"></a>iii.     ä½¿ç”¨varå£°æ˜</h3><p>è¡¨ç¤ºå˜é‡ï¼Œ ä¸€æ¬¡å£°æ˜ï¼Œå¯ä»¥å¤šæ¬¡ä¿®æ”¹å…¶å€¼ï¼Œ ä½†æ•ˆç‡æ²¡æœ‰leté«˜</p>
<h3 id="iv-let-ä¸varçš„åŒºåˆ«ä¸ä½¿ç”¨è§„åˆ™"><a href="#iv-let-ä¸varçš„åŒºåˆ«ä¸ä½¿ç”¨è§„åˆ™" class="headerlink" title="iv.     let ä¸varçš„åŒºåˆ«ä¸ä½¿ç”¨è§„åˆ™"></a>iv.     let ä¸varçš„åŒºåˆ«ä¸ä½¿ç”¨è§„åˆ™</h3><p>åŒºåˆ«åœ¨äºå‰è€…å£°æ˜çš„å˜é‡ä¸ºå€¼ä¸å¯å˜ï¼Œåè€…å€¼å¯å˜ï¼Œå‰è€…æ•ˆç‡æ›´é«˜ï¼Œä½¿ç”¨åŸåˆ™ï¼š<br>æ–¹æ³•ä½“ä¸­ï¼Œ<strong>ä¼˜å…ˆä½¿ç”¨let, å½“éœ€è¦ä¿®æ”¹å˜é‡å€¼çš„æ—¶å€™ï¼Œ æ ¹æ®ç¼–è¯‘å™¨æç¤ºå’Œä¿®æ”¹å»ºè®®è¿›è¡Œä¿®æ”¹å³å¯</strong></p>
<h3 id="v-è¯­æ³•ç³–"><a href="#v-è¯­æ³•ç³–" class="headerlink" title="v.     è¯­æ³•ç³–"></a>v.     è¯­æ³•ç³–</h3><p>é€‚ç”¨äºArrayï¼ŒDictionaryå’ŒOptionalï¼Œ ä½†å†™æ³•æ›´ç®€æ´ï¼Œ<br>å¯¹äºæ•°ç»„ï¼Œ åº”è¯¥å†™æˆ</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> array: [<span class="type">Int</span>]</span><br></pre></td></tr></table></figure>
<p>è€Œä¸å»ºè®®å†™æˆ</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> array: <span class="type">Array</span>&lt;<span class="type">Int</span>&gt;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå­—å…¸ï¼Œ åº”è¯¥å†™æˆ</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> dict: [<span class="type">String</span>: <span class="type">String</span>]</span><br></pre></td></tr></table></figure>
<p>è€Œä¸åº”è¯¥å†™æˆ</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> dict: <span class="type">Dictionary</span>&lt;<span class="type">String</span>,<span class="type">String</span>&gt;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºOptionalï¼Œä»åå­—ä¸Šçœ‹å«å¯é€‰å€¼ï¼Œ ä¹Ÿå°±æ˜¯å¯ç©ºå€¼ï¼Œ è¡¨ç¤ºè¯¥ç±»å‹çš„å˜é‡çš„å€¼å¯ä»¥æ˜¯nil(æˆ–è€….None)ï¼Œ å»ºè®®ä½¿ç”¨ç®€æ´å½¢å¼å£°æ˜å¯é€‰ç±»å‹å˜é‡, å¦‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name: <span class="type">String?</span></span><br></pre></td></tr></table></figure>
<p>è€Œä¸è¦ä½¿ç”¨</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name: <span class="type">Optional</span>(<span class="type">String</span>)</span><br></pre></td></tr></table></figure>
<h3 id="c-åŒºé—´"><a href="#c-åŒºé—´" class="headerlink" title="c)  åŒºé—´"></a>c)  åŒºé—´</h3><p>åŒºé—´åˆ†ä¸ºåŠå¼€åŒºé—´å’Œé—­åŒºé—´ï¼ŒåŒºé—´å€¼å¿…é¡»ä¸ºæ•´æ•°ï¼Œ åŠå¼€åŒºé—´ç”¨..&lt;è¡¨ç¤ºï¼Œ å¦‚0åˆ°99ï¼Œ åˆ™å¯ä»¥è¡¨ç¤ºä¸º</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span> ..&lt; <span class="number">100</span></span><br></pre></td></tr></table></figure>

<p>é—­åŒºé—´ç”¨â€¦è¡¨ç¤ºï¼Œ å¦‚0åˆ°99è¡¨ç¤ºä¸º </p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span> â€¦ <span class="number">99</span></span><br></pre></td></tr></table></figure>

<p>æ—©æœŸç‰ˆæœ¬ä¸­, <code>..&lt;</code> å’Œ<code>...</code>åé¢çš„æ•°å­—æˆ–è€…å˜é‡éœ€è¦ç´§è·Ÿï¼Œä¸å¾—æœ‰ç©ºæ ¼, æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬ä¸­å»æ‰äº†è¿™ä¸ªé™åˆ¶</p>
<h1 id="2-æ§åˆ¶è¯­å¥"><a href="#2-æ§åˆ¶è¯­å¥" class="headerlink" title="2.  æ§åˆ¶è¯­å¥"></a>2.  æ§åˆ¶è¯­å¥</h1><h2 id="a-æ¡ä»¶è¯­å¥"><a href="#a-æ¡ä»¶è¯­å¥" class="headerlink" title="a) æ¡ä»¶è¯­å¥"></a>a) æ¡ä»¶è¯­å¥</h2><h3 id="i-if-elseè¯­å¥"><a href="#i-if-elseè¯­å¥" class="headerlink" title="i. if elseè¯­å¥"></a>i. if elseè¯­å¥</h3><p>æœ€åŸºæœ¬çš„æ¡ä»¶åˆ¤æ–­ï¼Œ</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> æ¡ä»¶ &#123;</span><br><span class="line">    <span class="comment">//æ¡ä»¶ä¸ºçœŸçš„æ—¶å€™çš„æ“ä½œ</span></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//æ¡ä»¶ä¸ºå‡æ—¶çš„æ“ä½œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>else åä»å¯æ¥ifelseå®Œæˆè¯­å¥ï¼Œå¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> æ¡ä»¶<span class="number">1</span> &#123;</span><br><span class="line">    <span class="comment">//æ¡ä»¶1ä¸ºçœŸçš„æ—¶å€™çš„æ“ä½œ</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> æ¡ä»¶<span class="number">2</span> &#123;</span><br><span class="line">    <span class="comment">//æ¡ä»¶2ä¸ºçœŸçš„æ—¶å€™çš„æ“ä½œ</span></span><br><span class="line">&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//æ¡ä»¶ä¸ºå‡æ—¶çš„æ“ä½œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ii-guard-else-è¯­å¥"><a href="#ii-guard-else-è¯­å¥" class="headerlink" title="ii. guard else è¯­å¥"></a>ii. guard else è¯­å¥</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">guard</span> æ¡ä»¶ <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span>/<span class="keyword">break</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¡¨ç¤ºç¡®ä¿æ¡ä»¶æˆç«‹çš„æƒ…å†µä¸‹ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå¦åˆ™æ‰§è¡Œå®Œelseä¸­çš„å†…å®¹åé€€å‡ºï¼Œbreak/returnè¦æ±‚å¿…é¡»å†™ä¸€ä¸ªï¼Œå› æ­¤guardè¯­å¥ä¸€èˆ¬åœ¨æ–¹æ³•ä½“ä¸­æˆ–è€…å¾ªç¯ä¸­ä½¿ç”¨ï¼Œå…·ä½“çœ‹ä½¿ç”¨æƒ…å†µï¼Œguardelseè¯­å¥ä¸€èˆ¬ç”¨æ¥é¿å…åµŒå¥—ifelse è¯­å¥é€ æˆçš„ä»£ç ç»“æ„æ··ä¹±</p>
<h3 id="iii-if-let-è¯­å¥"><a href="#iii-if-let-è¯­å¥" class="headerlink" title="iii. if let è¯­å¥"></a>iii. if let è¯­å¥</h3><p>è¡¨ç¤ºå¯é€‰å€¼çš„ç»‘å®šï¼Œå¦‚æœå¯é€‰å€¼éç©ºï¼Œå¯ä»¥ç»‘å®šæˆåŠŸï¼Œåˆ™æ‰§è¡Œåé¢{ }ä¸­çš„è¯­å¥ï¼Œå¦åˆ™è·³è¿‡{ }<br>å½¢å¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> some = someOptioal &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœsomeOptionalçš„å€¼ä¸æ˜¯nilï¼Œåˆ™æ‰§è¡Œæ­¤å¤„ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>if letè¯­å¥ä¹Ÿå¯ä»¥å’Œif elseè¯­å¥ä¸€æ ·ï¼Œå¯ä»¥æœ‰elseåˆ†æ”¯ï¼Œå¦‚æœæœ‰å¤šä¸ªå¯é€‰å€¼éœ€è¦ç»‘å®šï¼Œåªéœ€è¦åœ¨{ }å‰é¢å¢åŠ let è¯­å¥å³å¯ï¼Œç„¶åä¸å‰é¢çš„è¯­å¥ç”¨è‹±æ–‡é€—å·éš”å¼€<br><strong>if let è¯­å¥å¯ä»¥ç”¨æ¥é¿å…ä½¿ç”¨ï¼è¿›è¡Œå¼ºåˆ¶æ‹†åŒ…å¯¼è‡´çš„nilå¼‚å¸¸</strong></p>
<h3 id="iv-guard-let-â€¦-elseè¯­å¥"><a href="#iv-guard-let-â€¦-elseè¯­å¥" class="headerlink" title="iv. guard let â€¦ elseè¯­å¥"></a>iv. guard let â€¦ elseè¯­å¥</h3><p>ç±»ä¼¼äºif letï¼ŒåŒæ ·ç”¨äºå¯é€‰å€¼ç»‘å®šï¼Œç»‘å®šå¤±è´¥åˆ™æ‰§è¡Œelse åé¢çš„{ }é‡Œé¢çš„è¯­å¥å¹¶é€€å‡º</p>
<h2 id="b-é€‰æ‹©è¯­å¥"><a href="#b-é€‰æ‹©è¯­å¥" class="headerlink" title="b)   é€‰æ‹©è¯­å¥"></a>b)   é€‰æ‹©è¯­å¥</h2><p>switch caseè¯­å¥<br>ä½¿ç”¨å½¢å¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> some &#123;</span><br><span class="line"><span class="keyword">case</span> value1:</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">case</span> value2:</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">default</span>: <span class="keyword">break</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¦æ±‚ï¼Œ å¦‚æœsomeä¸ºæšä¸¾ç±»å‹çš„å˜é‡ï¼Œåˆ™ä¸å»ºè®®ä½¿ç”¨defaultåˆ†æ”¯, åº”è¯¥å°†æ‰€æœ‰æšä¸¾å€¼case å‡ºæ¥ï¼Œ å¦‚æœsomeä¸ºéæšä¸¾ç±»å‹å˜é‡ï¼Œåˆ™è¦æ±‚å¿…é¡»æœ‰defaultåˆ†æ”¯ï¼Œä¸”æ¯ä¸€ä¸ªcaseåˆ†æ”¯ä¸‹å¦‚æœè¯­å¥éç©ºï¼Œ åˆ™ä¸éœ€è¦ä½¿ç”¨breakï¼Œå¦åˆ™éœ€è¦åœ¨è¯¥åˆ†æ”¯ä½¿ç”¨breakï¼Œcase åˆ†æ”¯çš„å€¼é™¤äº†å¯ä»¥æ˜¯å•ä¸ªçš„å€¼ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒºé—´</p>
<h2 id="c-å¾ªç¯è¯­å¥"><a href="#c-å¾ªç¯è¯­å¥" class="headerlink" title="c) å¾ªç¯è¯­å¥"></a>c) å¾ªç¯è¯­å¥</h2><h3 id="i-ä¼ ç»Ÿçš„forå¾ªç¯ï¼Œ-ä¸å»ºè®®ä½¿ç”¨"><a href="#i-ä¼ ç»Ÿçš„forå¾ªç¯ï¼Œ-ä¸å»ºè®®ä½¿ç”¨" class="headerlink" title="i.  ä¼ ç»Ÿçš„forå¾ªç¯ï¼Œ ä¸å»ºè®®ä½¿ç”¨"></a>i.  ä¼ ç»Ÿçš„forå¾ªç¯ï¼Œ ä¸å»ºè®®ä½¿ç”¨</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">init</span>; condition; change&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ii-ç”¨äºå¯¹é›†åˆç±»å‹çš„éå†-å»ºè®®ä½¿ç”¨"><a href="#ii-ç”¨äºå¯¹é›†åˆç±»å‹çš„éå†-å»ºè®®ä½¿ç”¨" class="headerlink" title="ii. ç”¨äºå¯¹é›†åˆç±»å‹çš„éå†, å»ºè®®ä½¿ç”¨"></a>ii. ç”¨äºå¯¹é›†åˆç±»å‹çš„éå†, å»ºè®®ä½¿ç”¨</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> some <span class="keyword">in</span> collection &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="iii-whileå¾ªç¯"><a href="#iii-whileå¾ªç¯" class="headerlink" title="iii.  whileå¾ªç¯"></a>iii.  whileå¾ªç¯</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">while</span> condition &#123;</span><br><span class="line"><span class="comment">///å¾ªç¯ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="iv-repeat-whileå¾ªç¯"><a href="#iv-repeat-whileå¾ªç¯" class="headerlink" title="iv.  repeat whileå¾ªç¯"></a>iv.  repeat whileå¾ªç¯</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">repeat</span> &#123;</span><br><span class="line"><span class="comment">//å¾ªç¯ä½“</span></span><br><span class="line">&#125; <span class="keyword">while</span> condition</span><br></pre></td></tr></table></figure>
<p>ä¸whileå¾ªç¯åŠŸèƒ½ç›¸åŒï¼Œ ä½†æ˜¯åŒºåˆ«åœ¨äºwhileå¾ªç¯å…ˆåˆ¤æ–­åœ¨æ‰§è¡Œï¼Œ repeat whileè¯­å¥å…ˆæ‰§è¡Œååˆ¤æ–­</p>
<h2 id="d-å¾ªç¯ä¸­çš„è·³è½¬"><a href="#d-å¾ªç¯ä¸­çš„è·³è½¬" class="headerlink" title="d)   å¾ªç¯ä¸­çš„è·³è½¬"></a>d)   å¾ªç¯ä¸­çš„è·³è½¬</h2><p>è·³è¿‡å½“å‰å¾ªç¯ï¼Œä½¿ç”¨continue, ç»ˆæ­¢å½“å‰å¾ªç¯ï¼Œä½¿ç”¨breakï¼Œ breakå¯ä»¥ç»ˆæ­¢å¤šå±‚å¾ªç¯ï¼Œé…åˆæ ‡ç­¾ä½¿ç”¨ï¼Œ å¦‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">lp:</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="number">5</span> &#123;</span><br><span class="line">       <span class="keyword">if</span> i* i == j * j * j &#123;</span><br><span class="line">           <span class="keyword">break</span> lp</span><br><span class="line">       &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-è‡ªå®šä¹‰ç±»å‹"><a href="#3-è‡ªå®šä¹‰ç±»å‹" class="headerlink" title="3.  è‡ªå®šä¹‰ç±»å‹"></a>3.  è‡ªå®šä¹‰ç±»å‹</h1><h2 id="a-typealiasä½¿ç”¨"><a href="#a-typealiasä½¿ç”¨" class="headerlink" title="a)   typealiasä½¿ç”¨"></a>a)   typealiasä½¿ç”¨</h2><p>ç»™å·²æœ‰ç±»å‹å–åˆ«åï¼Œ å¦‚ </p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typealias</span> <span class="type">Point</span> = (<span class="type">Double</span>, <span class="type">Double</span>)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç¤ºå°†(Doubleï¼Œ Double)ç±»å‹çš„å…ƒç»„å–åˆ«åä¸ºPoint</p>
<h2 id="b-enum"><a href="#b-enum" class="headerlink" title="b)   enum"></a>b)   enum</h2><p>å®šä¹‰æšä¸¾ç±»å‹ï¼Œ æšä¸¾å€¼ä»¥case ä¸ºå‰ç¼€åˆ—ä¸¾, å¦‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">School</span></span>&#123;</span><br><span class="line"><span class="keyword">case</span> primary</span><br><span class="line"><span class="keyword">case</span> middleSchool</span><br><span class="line"><span class="keyword">case</span> university</span><br><span class="line"><span class="keyword">case</span> college</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸å…¶ä»–è¯­è¨€ä¸åŒï¼Œ æšä¸¾å€¼ä¸­ä¹Ÿå¯ä»¥æœ‰åŒ…æ‹¬æ„é€ æ–¹æ³•åœ¨å†…çš„æ–¹æ³•å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥ä»¥å…¶ä»–å¦‚Int ç±»å‹ä¸ºçˆ¶ç±»è¿›è¡Œç»§æ‰¿<br>é™¤æ­¤ä¹‹å¤– Swiftä¸­çš„æšä¸¾ç±»å‹è¿˜å¯ä»¥æœ‰é™„åŠ å€¼, æ¯”å¦‚:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Property</span> </span>&#123;</span><br><span class="line">	<span class="keyword">case</span> name(<span class="type">String</span>)</span><br><span class="line">	<span class="keyword">case</span> age(<span class="type">Int</span>)</span><br><span class="line">	<span class="keyword">case</span> gender(<span class="type">Bool</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ä½¿ç”¨switchè¯­å¥çš„æ—¶å€™ï¼Œé™¤äº†å¯ä»¥æ ¹æ®ç±»å‹é€‰æ‹©åˆ†æ”¯ï¼Œ è¿˜èƒ½è·å–åˆ°æ”¹æšä¸¾ç±»å‹çš„é™„åŠ å€¼, æ¯”å¦‚:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> prop = <span class="type">Property</span>.name(<span class="string">"Who"</span>)</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">switch</span> prop &#123;</span><br><span class="line">	<span class="keyword">case</span> .name(<span class="keyword">let</span> name): &#123;</span><br><span class="line">		<span class="built_in">print</span>(name)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">case</span> .age(<span class="keyword">let</span> age): &#123;</span><br><span class="line">		<span class="built_in">print</span>(age)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">case</span> .gender(<span class="keyword">let</span> gender): &#123;</span><br><span class="line">		<span class="built_in">print</span>(gender)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="c-struct"><a href="#c-struct" class="headerlink" title="c)   struct"></a>c)   struct</h2><p>å£°æ˜ä¸€ä¸ªç±»ï¼Œä½†æ˜¯è¯¥ç±»å±äºå€¼ç±»å‹ï¼Œæ¯ä¸€ä¸ªè¯¥ç±»å‹çš„å˜é‡ä¹‹é—´äº’ä¸ç›¸å…³ï¼Œä¿®æ”¹ä»»ä½•ä¸€ä¸ªè¯¥ç±»å‹å˜é‡ä¸ä¼šå½±å“åˆ°å…¶ä»–åŒç±»å‹å˜é‡çš„å€¼</p>
<h2 id="d-class"><a href="#d-class" class="headerlink" title="d)   class"></a>d)   class</h2><p>ä¸structç›¸åŒï¼Œä¹Ÿæ˜¯å£°æ˜ä¸€ä¸ªç±»ï¼Œ ä½†åŒºåˆ«åœ¨äºï¼Œ å£°æ˜çš„ç±»ä¸ºå¼•ç”¨ç±»å‹ï¼Œå¦‚æœå°†è¯¥ç±»å‹çš„ä¸€ä¸ªå˜é‡èµ‹å€¼ç»™å¦ä¸€ä¸ªåŒç±»å‹å˜é‡ï¼Œåˆ™è¿™ä¸¤ä¸ªå˜é‡æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå®ä½“ï¼Œå¦‚æœæœ‰å…¶ä¸­ä¸€ä¸ªå˜é‡ä¿®æ”¹äº†å®ä½“çš„æŸä¸ªå€¼ï¼Œ å¦ä¸€ä¸ªå˜é‡çš„å®ä½“çš„å€¼ä¼šè·Ÿç€ä¿®æ”¹</p>
<h2 id="e-protocol"><a href="#e-protocol" class="headerlink" title="e)   protocol"></a>e)   protocol</h2><p>è¡¨ç¤ºåè®®ï¼Œ ç”¨æ¥å£°æ˜æ¥å£ï¼Œ å£°æ˜åä¸å¯ç›´æ¥ä½¿ç”¨ï¼Œåªèƒ½ä½¿ç”¨classæˆ–è€…structå£°æ˜çš„ç±»å®ç°è¯¥åè®®</p>
]]></content>
      <tags>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title>cocos2d-xçš„è¿è¡Œæ¡†æ¶æ€ç»´å¯¼å›¾</title>
    <url>/2017/11/09/171109110650/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/78487313" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/78487313</a></p><p>èŠ±äº†ç‚¹æ—¶é—´ç”¨æ€ç»´å¯¼å›¾å°†cocos2d-xæ¸¸æˆå¼€å‘è¿‡ç¨‹ä¸­cocos2d-xæ¡†æ¶çš„å¤§è‡´çš„æ•´ä¸ªè¿è¡Œæµç¨‹ï¼Œä»¥ä¸‹å†…å®¹ä¸ºæ€ç»´å¯¼å›¾æˆªå›¾<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcxMTA5MTEwNDE1NDEw?x-oss-process=image/format,png" alt="æ€ç»´å¯¼å›¾"></p>]]></content>
      <tags>
        <tag>cocos2dx</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§‘å¤§è®¯é£è¯­éŸ³SDKä½¿ç”¨æµç¨‹</title>
    <url>/2017/07/31/170731114031/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/76423309" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/76423309</a></p><h2 id="è¯­éŸ³è¯†åˆ«éƒ¨åˆ†"><a href="#è¯­éŸ³è¯†åˆ«éƒ¨åˆ†" class="headerlink" title="è¯­éŸ³è¯†åˆ«éƒ¨åˆ†"></a>è¯­éŸ³è¯†åˆ«éƒ¨åˆ†</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">MSPLogin <span class="comment">// ç™»å½•è®¯é£æœåŠ¡å™¨ </span></span><br><span class="line">MSPUploadData <span class="comment">//(å¯é€‰): ä¸Šä¼ è¯­æ³•æ–‡ä»¶</span></span><br><span class="line">QISRSessionBegin <span class="comment">// åˆ›å»ºè¯­éŸ³è¯†åˆ«ä¼šè¯</span></span><br><span class="line">QISRAudioWrite <span class="comment">// ä¸Šä¼ è¯­éŸ³æ•°æ®</span></span><br><span class="line">QISRGetResult <span class="comment">// è·å–è¯†åˆ«çš„æ–‡æœ¬ç»“æœ</span></span><br><span class="line">QISRSessionEnd <span class="comment">// ç»“æŸä¼šè¯</span></span><br><span class="line">MSPLogout <span class="comment">// æ³¨é”€ç™»å½•</span></span><br></pre></td></tr></table></figure><a id="more"></a>

<h2 id="è¯­éŸ³åˆæˆéƒ¨åˆ†"><a href="#è¯­éŸ³åˆæˆéƒ¨åˆ†" class="headerlink" title="è¯­éŸ³åˆæˆéƒ¨åˆ†"></a>è¯­éŸ³åˆæˆéƒ¨åˆ†</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">MSPLogin <span class="comment">// ç™»å½•è®¯é£æœåŠ¡å™¨</span></span><br><span class="line">QTTSSessionBegin <span class="comment">// åˆ›å»ºè¯­éŸ³åˆæˆä¼šè¯</span></span><br><span class="line">QTTSTextPut <span class="comment">// ä¸Šä¼ éœ€è¦åˆæˆè¯­éŸ³çš„æ–‡æœ¬</span></span><br><span class="line">QTTSAudioGet <span class="comment">// è·å–æœåŠ¡å™¨åˆæˆçš„è¯­éŸ³æ•°æ®ï¼Œæ•°æ®æ ¼å¼ä¸ºPCMæˆ–wav</span></span><br><span class="line">QTTSSessonEnd <span class="comment">// ç»“æŸè¯­éŸ³åˆæˆä¼šè¯</span></span><br><span class="line">MSPLogout <span class="comment">// æ³¨é”€ç™»å½•</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç§‘å¤§è®¯é£</tag>
        <tag>è¯­éŸ³è¯†åˆ«</tag>
        <tag>è¯­éŸ³åˆæˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>ç©è½¬æ ‘è“æ´¾ä¹‹ROSä¸‹æ›´æ–°booståº“</title>
    <url>/2017/07/31/170731112804/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/76422821" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/76422821</a></p><h2 id="1-é¦–å…ˆä½ éœ€è¦ä¸‹è½½boostçš„æºç -ä¸‹è½½å®Œæˆè§£å‹"><a href="#1-é¦–å…ˆä½ éœ€è¦ä¸‹è½½boostçš„æºç -ä¸‹è½½å®Œæˆè§£å‹" class="headerlink" title="1. é¦–å…ˆä½ éœ€è¦ä¸‹è½½boostçš„æºç ,ä¸‹è½½å®Œæˆè§£å‹"></a>1. é¦–å…ˆä½ éœ€è¦ä¸‹è½½boostçš„æºç ,ä¸‹è½½å®Œæˆè§£å‹</h2><h2 id="2-æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥åˆ°è§£å‹ç›®å½•ï¼Œ-æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯¹boostè¿›è¡Œç¼–è¯‘"><a href="#2-æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥åˆ°è§£å‹ç›®å½•ï¼Œ-æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯¹boostè¿›è¡Œç¼–è¯‘" class="headerlink" title="2. æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥åˆ°è§£å‹ç›®å½•ï¼Œ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯¹boostè¿›è¡Œç¼–è¯‘"></a>2. æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥åˆ°è§£å‹ç›®å½•ï¼Œ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯¹boostè¿›è¡Œç¼–è¯‘</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~ $ ./bootstrap.sh â€”prefix=/usr</span><br><span class="line">~ $ ./b2 -j2</span><br></pre></td></tr></table></figure><a id="more"></a>

<h2 id="3-å®‰è£…booståº“"><a href="#3-å®‰è£…booståº“" class="headerlink" title="3. å®‰è£…booståº“"></a>3. å®‰è£…booståº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~ $ sudo ./bjam install</span><br></pre></td></tr></table></figure>
<h2 id="4-ç”±äºæ˜¯åœ¨å·²å®‰è£…rosç¯å¢ƒä¸‹æ›´æ–°booståº“ï¼Œæ‰€ä»¥æ›´æ–°ä¹‹åéœ€è¦é‡æ–°ç¼–è¯‘rosï¼Œé‡æ–°å®‰è£…rosä¹‹å‰éœ€è¦åˆ é™¤æ—§çš„"><a href="#4-ç”±äºæ˜¯åœ¨å·²å®‰è£…rosç¯å¢ƒä¸‹æ›´æ–°booståº“ï¼Œæ‰€ä»¥æ›´æ–°ä¹‹åéœ€è¦é‡æ–°ç¼–è¯‘rosï¼Œé‡æ–°å®‰è£…rosä¹‹å‰éœ€è¦åˆ é™¤æ—§çš„" class="headerlink" title="4. ç”±äºæ˜¯åœ¨å·²å®‰è£…rosç¯å¢ƒä¸‹æ›´æ–°booståº“ï¼Œæ‰€ä»¥æ›´æ–°ä¹‹åéœ€è¦é‡æ–°ç¼–è¯‘rosï¼Œé‡æ–°å®‰è£…rosä¹‹å‰éœ€è¦åˆ é™¤æ—§çš„:"></a>4. ç”±äºæ˜¯åœ¨å·²å®‰è£…rosç¯å¢ƒä¸‹æ›´æ–°booståº“ï¼Œæ‰€ä»¥æ›´æ–°ä¹‹åéœ€è¦é‡æ–°ç¼–è¯‘rosï¼Œé‡æ–°å®‰è£…rosä¹‹å‰éœ€è¦åˆ é™¤æ—§çš„:</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~ $ sudo rm -rf /opt/ros/*</span><br></pre></td></tr></table></figure>
<h2 id="5-æœ€åä¸€æ­¥å°±æ˜¯è¿›å…¥åˆ°ros-wså®‰è£…æºç ç›®å½•é‡æ–°å®‰è£…rosäº†"><a href="#5-æœ€åä¸€æ­¥å°±æ˜¯è¿›å…¥åˆ°ros-wså®‰è£…æºç ç›®å½•é‡æ–°å®‰è£…rosäº†" class="headerlink" title="5. æœ€åä¸€æ­¥å°±æ˜¯è¿›å…¥åˆ°ros_wså®‰è£…æºç ç›®å½•é‡æ–°å®‰è£…rosäº†"></a>5. æœ€åä¸€æ­¥å°±æ˜¯è¿›å…¥åˆ°ros_wså®‰è£…æºç ç›®å½•é‡æ–°å®‰è£…rosäº†</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~ $ ./src/catkin/bin/catkin_make_isolated --install </span><br><span class="line">-DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/opt/ros/kinetic -j2</span><br></pre></td></tr></table></figure>
<p><strong>å®‰è£…å®Œæˆä¹‹åå¯ä»¥æ‰§è¡Œrosçš„ä¸€äº›å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</strong></p>
]]></content>
      <tags>
        <tag>æ ‘è“æ´¾</tag>
        <tag>ROS</tag>
        <tag>Boost</tag>
      </tags>
  </entry>
  <entry>
    <title>ç©è½¬æ ‘è“æ´¾ä¹‹åœ¨æ ‘è“æ´¾Jessieç³»ç»Ÿä¸­å®‰è£…ROS</title>
    <url>/2017/07/31/170731111833/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/76422994" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/76422994</a></p><h3 id="0-è¿›å…¥ROSWIKIå®˜ç½‘"><a href="#0-è¿›å…¥ROSWIKIå®˜ç½‘" class="headerlink" title="0. è¿›å…¥ROSWIKIå®˜ç½‘"></a>0. è¿›å…¥ROSWIKIå®˜ç½‘</h3><p>é“¾æ¥: <a href="http://wiki.ros.org/kinetic/Installation/Debian" target="_blank" rel="noopener">http://wiki.ros.org/kinetic/Installation/Debian</a>,<br>è¿™é‡Œæœ‰è‹±æ–‡æ–‡æ¡£ï¼Œä»¥ä¸‹éƒ¨åˆ†ä¸ºä¸ªäººç†è§£ä¸‹çš„ä¸­æ–‡æ­¥éª¤</p><a id="more"></a>

<h3 id="1-å»ºç«‹ä½ çš„sources-listæ–‡ä»¶ï¼Œä½¿ä½ çš„æ ‘è“æ´¾æ”¯æŒä»ROSå®˜æ–¹-ç«™ç‚¹ä¸‹è½½è½¯ä»¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š"><a href="#1-å»ºç«‹ä½ çš„sources-listæ–‡ä»¶ï¼Œä½¿ä½ çš„æ ‘è“æ´¾æ”¯æŒä»ROSå®˜æ–¹-ç«™ç‚¹ä¸‹è½½è½¯ä»¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š" class="headerlink" title="1. å»ºç«‹ä½ çš„sources.listæ–‡ä»¶ï¼Œä½¿ä½ çš„æ ‘è“æ´¾æ”¯æŒä»ROSå®˜æ–¹``ç«™ç‚¹ä¸‹è½½è½¯ä»¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š"></a>1. å»ºç«‹ä½ çš„sources.listæ–‡ä»¶ï¼Œä½¿ä½ çš„æ ‘è“æ´¾æ”¯æŒä»ROSå®˜æ–¹``ç«™ç‚¹ä¸‹è½½è½¯ä»¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pi@raspberrypi: ~ $ sudo <span class="built_in">echo</span> â€œdeb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) mainâ€ &gt; /etc/apt/sources.list.d/ros-latest.list</span><br></pre></td></tr></table></figure>
<h3 id="2-è®¾ç½®ä¸€ä¸‹ä½ çš„key"><a href="#2-è®¾ç½®ä¸€ä¸‹ä½ çš„key" class="headerlink" title="2. è®¾ç½®ä¸€ä¸‹ä½ çš„key"></a>2. è®¾ç½®ä¸€ä¸‹ä½ çš„key</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pi@raspberrypi: ~ $ sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers\.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116</span><br></pre></td></tr></table></figure>
<h3 id="3-æ‰§è¡Œsudo-apt-get-updateæ›´æ–°ä¸€ä¸‹ï¼Œç„¶åæ‰§è¡Œå®‰è£…å‘½ä»¤"><a href="#3-æ‰§è¡Œsudo-apt-get-updateæ›´æ–°ä¸€ä¸‹ï¼Œç„¶åæ‰§è¡Œå®‰è£…å‘½ä»¤" class="headerlink" title="3. æ‰§è¡Œsudo apt-get updateæ›´æ–°ä¸€ä¸‹ï¼Œç„¶åæ‰§è¡Œå®‰è£…å‘½ä»¤"></a>3. æ‰§è¡Œsudo apt-get updateæ›´æ–°ä¸€ä¸‹ï¼Œç„¶åæ‰§è¡Œå®‰è£…å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pi@raspberrypi: ~ $ sudo apt-get install ros-kinetic-desktop-full</span><br></pre></td></tr></table></figure>
<h3 id="4-åˆå§‹åŒ–rosdep"><a href="#4-åˆå§‹åŒ–rosdep" class="headerlink" title="4. åˆå§‹åŒ–rosdep"></a>4. åˆå§‹åŒ–rosdep</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pi@raspberrypi: ~ $ sudo rosdep init</span><br><span class="line">pi@raspberrypi: ~ $ rosdep update</span><br></pre></td></tr></table></figure>
<h3 id="5-å¦‚æœä½ å¸Œæœ›æ¯æ¬¡å¼€å¯ç»ˆç«¯éƒ½å¯ä»¥ä½¿ç”¨rosç¯å¢ƒçš„è¯ï¼Œå»ºè®®æ‰§è¡Œä¸€ä¸‹ä»¥ä¸‹å‘½ä»¤"><a href="#5-å¦‚æœä½ å¸Œæœ›æ¯æ¬¡å¼€å¯ç»ˆç«¯éƒ½å¯ä»¥ä½¿ç”¨rosç¯å¢ƒçš„è¯ï¼Œå»ºè®®æ‰§è¡Œä¸€ä¸‹ä»¥ä¸‹å‘½ä»¤" class="headerlink" title="5. å¦‚æœä½ å¸Œæœ›æ¯æ¬¡å¼€å¯ç»ˆç«¯éƒ½å¯ä»¥ä½¿ç”¨rosç¯å¢ƒçš„è¯ï¼Œå»ºè®®æ‰§è¡Œä¸€ä¸‹ä»¥ä¸‹å‘½ä»¤"></a>5. å¦‚æœä½ å¸Œæœ›æ¯æ¬¡å¼€å¯ç»ˆç«¯éƒ½å¯ä»¥ä½¿ç”¨rosç¯å¢ƒçš„è¯ï¼Œå»ºè®®æ‰§è¡Œä¸€ä¸‹ä»¥ä¸‹å‘½ä»¤</h3><figure class="highlight zsh"><table><tr><td class="code"><pre><span class="line">pi@raspberrypi: ~ $ <span class="built_in">echo</span> <span class="string">"source /opt/ros/kinetic/setup.bash"</span> &gt;&gt; ~/.bashrc</span><br><span class="line">pi@raspberrypi: ~ $ <span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>
<h3 id="6-å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨æ¯æ¬¡å¯åŠ¨ç»ˆç«¯åæ‰‹åŠ¨æ‰§è¡Œç¯å¢ƒé…ç½®å‘½ä»¤"><a href="#6-å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨æ¯æ¬¡å¯åŠ¨ç»ˆç«¯åæ‰‹åŠ¨æ‰§è¡Œç¯å¢ƒé…ç½®å‘½ä»¤" class="headerlink" title="6. å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨æ¯æ¬¡å¯åŠ¨ç»ˆç«¯åæ‰‹åŠ¨æ‰§è¡Œç¯å¢ƒé…ç½®å‘½ä»¤"></a>6. å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨æ¯æ¬¡å¯åŠ¨ç»ˆç«¯åæ‰‹åŠ¨æ‰§è¡Œç¯å¢ƒé…ç½®å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pi@raspberrypi: ~ \$ <span class="built_in">source</span> /opt/ros/kinetic/setup.bash</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨: å¦‚æœä½ æ˜¯ç”¨çš„æ˜¯zshç»ˆç«¯ï¼Œåˆ™åº”è¯¥è®²ç¬¬5æ­¥ä¸­çš„.bashrcæ–‡ä»¶æ›´æ”¹ä¸º .zshrcæ–‡ä»¶</strong></p>
]]></content>
      <tags>
        <tag>æ ‘è“æ´¾</tag>
        <tag>ROS</tag>
      </tags>
  </entry>
  <entry>
    <title>ç©è½¬æ ‘è“æ´¾ä¹‹æ ‘è“æ´¾å®‰è£…jessieç³»ç»Ÿ</title>
    <url>/2017/07/31/170731110822/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/76423140" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/76423140</a></p><h3 id="è¿›å…¥å®˜ç½‘ä¸‹è½½é¡µé¢ï¼Œä¸‹è½½ä½ éœ€è¦çš„é•œåƒ-ä¸‹è½½é“¾æ¥"><a href="#è¿›å…¥å®˜ç½‘ä¸‹è½½é¡µé¢ï¼Œä¸‹è½½ä½ éœ€è¦çš„é•œåƒ-ä¸‹è½½é“¾æ¥" class="headerlink" title="è¿›å…¥å®˜ç½‘ä¸‹è½½é¡µé¢ï¼Œä¸‹è½½ä½ éœ€è¦çš„é•œåƒ, ä¸‹è½½é“¾æ¥:"></a>è¿›å…¥å®˜ç½‘ä¸‹è½½é¡µé¢ï¼Œä¸‹è½½ä½ éœ€è¦çš„é•œåƒ, ä¸‹è½½é“¾æ¥:</h3><p><a href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="noopener">https://www.raspberrypi.org/downloads/raspbian/</a><br><img src="https://img-blog.csdnimg.cn/20191027104250810.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L295b3VuZ18yMDEy,size_16,color_FFFFFF,t_70" alt="æ ‘è“æ´¾ä¸‹è½½é¡µé¢"></p><h3 id="å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸Šé¢ä¸¤ä¸ªçš„jessieä¸ºå¸¦GUIæ¡Œé¢çš„ï¼Œä¸‹é¢ä¸€ä¸ªä¸ºçº¯å‘½ä»¤è¡Œçš„ï¼Œå¯ä»¥æ ¹æ®ä¸ªäººçˆ±å¥½é€‰æ‹©"><a href="#å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸Šé¢ä¸¤ä¸ªçš„jessieä¸ºå¸¦GUIæ¡Œé¢çš„ï¼Œä¸‹é¢ä¸€ä¸ªä¸ºçº¯å‘½ä»¤è¡Œçš„ï¼Œå¯ä»¥æ ¹æ®ä¸ªäººçˆ±å¥½é€‰æ‹©" class="headerlink" title="å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸Šé¢ä¸¤ä¸ªçš„jessieä¸ºå¸¦GUIæ¡Œé¢çš„ï¼Œä¸‹é¢ä¸€ä¸ªä¸ºçº¯å‘½ä»¤è¡Œçš„ï¼Œå¯ä»¥æ ¹æ®ä¸ªäººçˆ±å¥½é€‰æ‹©"></a>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸Šé¢ä¸¤ä¸ªçš„jessieä¸ºå¸¦GUIæ¡Œé¢çš„ï¼Œä¸‹é¢ä¸€ä¸ªä¸ºçº¯å‘½ä»¤è¡Œçš„ï¼Œå¯ä»¥æ ¹æ®ä¸ªäººçˆ±å¥½é€‰æ‹©</h3><a id="more"></a>

<h3 id="å¦‚æœæ˜¯windowsç³»ç»Ÿï¼Œåªéœ€è¦ä½¿ç”¨UtralISOä¹‹ç±»çš„è½¯ä»¶å°†é•œåƒæ–‡ä»¶çƒ§å½•åˆ°SDå³å¯ï¼Œå¦‚æœæ˜¯åœ¨Mac-OSæˆ–è€…Linuxç³»ç»Ÿï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤"><a href="#å¦‚æœæ˜¯windowsç³»ç»Ÿï¼Œåªéœ€è¦ä½¿ç”¨UtralISOä¹‹ç±»çš„è½¯ä»¶å°†é•œåƒæ–‡ä»¶çƒ§å½•åˆ°SDå³å¯ï¼Œå¦‚æœæ˜¯åœ¨Mac-OSæˆ–è€…Linuxç³»ç»Ÿï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤" class="headerlink" title="å¦‚æœæ˜¯windowsç³»ç»Ÿï¼Œåªéœ€è¦ä½¿ç”¨UtralISOä¹‹ç±»çš„è½¯ä»¶å°†é•œåƒæ–‡ä»¶çƒ§å½•åˆ°SDå³å¯ï¼Œå¦‚æœæ˜¯åœ¨Mac OSæˆ–è€…Linuxç³»ç»Ÿï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤:"></a>å¦‚æœæ˜¯windowsç³»ç»Ÿï¼Œåªéœ€è¦ä½¿ç”¨UtralISOä¹‹ç±»çš„è½¯ä»¶å°†é•œåƒæ–‡ä»¶çƒ§å½•åˆ°SDå³å¯ï¼Œå¦‚æœæ˜¯åœ¨Mac OSæˆ–è€…Linuxç³»ç»Ÿï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤:</h3><ol>
<li>æ‰“å¼€ç»ˆç«¯(ubuntuä¸‹çš„å¿«æ·é”®ä¸ºCtrl+Alt+T);</li>
<li>æ•²å‘½ä»¤ï¼š df -h, æŸ¥çœ‹SDå¡æ‰€åœ¨çš„åˆ†åŒºï¼Œ å¦‚åœ¨Macä¸‹æˆ‘çš„SDå¡åˆ†åŒºä¸º/dev/disk5,Ubuntuä¸‹æˆ‘çš„SDå¡åˆ†åŒºä¸º/dev/sdc,å…·ä½“æ ¹æ®ä¸ªäººæƒ…å†µè€Œå®šï¼Œåªéœ€è¦è‡ªå·±èƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”åˆ†åŒºå³å¯</li>
<li>ä½¿ç”¨umountå‘½ä»¤å¸è½½åˆ†åŒºï¼ŒUbuntuä¸‹ä¸ºâ€sudo umount /dev/sdc1â€, macOSä¸‹ä¸ºâ€diskutil umount /dev/disk5s1â€</li>
<li>ä½¿ç”¨cdå‘½ä»¤è¿›å…¥åˆ°ä½ ä¸‹è½½çš„jessieé•œåƒæ‰€åœ¨ç›®å½•ï¼Œå¦‚æˆ‘çš„ä¸‹è½½ç›®å½•åœ¨/home/oyoung/downloads,ç„¶åæ‰§è¡Œå‘½ä»¤sudo dd bs=4m if=&lt;ä½ çš„é•œåƒæ–‡ä»¶&gt; of=&lt;ä½ çš„SDå¯¹åº”çš„å—è®¾å¤‡&gt;ï¼Œæ¯”å¦‚æˆ‘ä¸Šé¢æåˆ°çš„ï¼ŒUbuntuä¸‹çš„/dev/sdcä»¥åŠmacOSä¸‹çš„/dev/disk5, ç„¶åç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå…·ä½“è§†ä½ çš„SDå¡å†™å…¥é€Ÿåº¦è€Œå®šï¼Œæ¯•ç«Ÿé•œåƒæ–‡ä»¶è¶…è¿‡1G</li>
<li>ä»¥ä¸Šæ­¥éª¤å®Œæˆåï¼Œé•œåƒçš„çƒ§å½•å·¥ä½œåŸºæœ¬å®Œæˆï¼Œå‰©ä¸‹çš„ä¸€äº›éœ€è¦åšçš„å°†SDå¡æ’å…¥æ ‘è“æ´¾å¹¶å¯åŠ¨ç³»ç»Ÿä¹‹åè¦åšçš„ç³»ç»Ÿè®¾å®šå·¥ä½œï¼Œæ¯”å¦‚æ˜¯å¦å¼€å¯SSHï¼Œæ˜¯å¦å¼€å¯VNCï¼Œä»¥åŠä¸ªåˆ«æƒ…å†µä¸‹éœ€è¦è®¾ç½®ç³»ç»Ÿå¯åŠ¨å±å¹•åˆ†åˆ«ç‡ï¼Œä¸€èˆ¬è§¦æ‘¸å±å‚å•†çš„æ–‡æ¡£é‡Œé¢ä¼šæåˆ°å¦‚ä½•è®¾ç½®</li>
</ol>
<h3 id="ä¿®æ”¹ç³»ç»Ÿè®¾ç½®ï¼Œ-å¼€æœºä¹‹åï¼Œä½¿ç”¨HDMIå°†æ ‘è“æ´¾æ¥ä¸Šæ˜¾ç¤ºå™¨ï¼Œç„¶åæ’å…¥USBé¼ æ ‡é”®ç›˜ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥sudo-raspi-configå‘½ä»¤å¯åŠ¨ç³»ç»Ÿé…ç½®ç•Œé¢ï¼Œå…·ä½“é…ç½®è‡ªå·±æ‘¸ç´¢ï¼Œç„¶åè¿æ¥ä¸Šæ ‘è“æ´¾çš„æ— çº¿ç½‘ï¼Œé€šè¿‡ifconfigå‘½ä»¤è·å–åˆ°æ ‘è“æ´¾çš„ipåœ°å€ï¼Œè®°ä¸‹æ¥ï¼Œåé¢ä¸€å®šä¼šç”¨åˆ°"><a href="#ä¿®æ”¹ç³»ç»Ÿè®¾ç½®ï¼Œ-å¼€æœºä¹‹åï¼Œä½¿ç”¨HDMIå°†æ ‘è“æ´¾æ¥ä¸Šæ˜¾ç¤ºå™¨ï¼Œç„¶åæ’å…¥USBé¼ æ ‡é”®ç›˜ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥sudo-raspi-configå‘½ä»¤å¯åŠ¨ç³»ç»Ÿé…ç½®ç•Œé¢ï¼Œå…·ä½“é…ç½®è‡ªå·±æ‘¸ç´¢ï¼Œç„¶åè¿æ¥ä¸Šæ ‘è“æ´¾çš„æ— çº¿ç½‘ï¼Œé€šè¿‡ifconfigå‘½ä»¤è·å–åˆ°æ ‘è“æ´¾çš„ipåœ°å€ï¼Œè®°ä¸‹æ¥ï¼Œåé¢ä¸€å®šä¼šç”¨åˆ°" class="headerlink" title="ä¿®æ”¹ç³»ç»Ÿè®¾ç½®ï¼Œ å¼€æœºä¹‹åï¼Œä½¿ç”¨HDMIå°†æ ‘è“æ´¾æ¥ä¸Šæ˜¾ç¤ºå™¨ï¼Œç„¶åæ’å…¥USBé¼ æ ‡é”®ç›˜ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥sudo raspi-configå‘½ä»¤å¯åŠ¨ç³»ç»Ÿé…ç½®ç•Œé¢ï¼Œå…·ä½“é…ç½®è‡ªå·±æ‘¸ç´¢ï¼Œç„¶åè¿æ¥ä¸Šæ ‘è“æ´¾çš„æ— çº¿ç½‘ï¼Œé€šè¿‡ifconfigå‘½ä»¤è·å–åˆ°æ ‘è“æ´¾çš„ipåœ°å€ï¼Œè®°ä¸‹æ¥ï¼Œåé¢ä¸€å®šä¼šç”¨åˆ°"></a>ä¿®æ”¹ç³»ç»Ÿè®¾ç½®ï¼Œ å¼€æœºä¹‹åï¼Œä½¿ç”¨HDMIå°†æ ‘è“æ´¾æ¥ä¸Šæ˜¾ç¤ºå™¨ï¼Œç„¶åæ’å…¥USBé¼ æ ‡é”®ç›˜ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥sudo raspi-configå‘½ä»¤å¯åŠ¨ç³»ç»Ÿé…ç½®ç•Œé¢ï¼Œå…·ä½“é…ç½®è‡ªå·±æ‘¸ç´¢ï¼Œç„¶åè¿æ¥ä¸Šæ ‘è“æ´¾çš„æ— çº¿ç½‘ï¼Œé€šè¿‡ifconfigå‘½ä»¤è·å–åˆ°æ ‘è“æ´¾çš„ipåœ°å€ï¼Œè®°ä¸‹æ¥ï¼Œåé¢ä¸€å®šä¼šç”¨åˆ°</h3>]]></content>
      <tags>
        <tag>æ ‘è“æ´¾</tag>
      </tags>
  </entry>
  <entry>
    <title>macOSä¸‹æ­å»ºopenGLå¼€å‘ç¯å¢ƒ</title>
    <url>/2017/07/31/170731105358/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/76422589" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/76422589</a></p><h2 id="1-ä¸‹è½½å¹¶å®‰è£…GLFW"><a href="#1-ä¸‹è½½å¹¶å®‰è£…GLFW" class="headerlink" title="1. ä¸‹è½½å¹¶å®‰è£…GLFW"></a>1. ä¸‹è½½å¹¶å®‰è£…GLFW</h2><p>è¿™é‡Œç»™ä¸ªå®˜ç½‘é“¾æ¥: <a href="http://www.glfw.org/download.html" target="_blank" rel="noopener">http://www.glfw.org/download.html</a><br>æ‰“å¼€è¯¥é¡µé¢åï¼Œ ç‚¹å‡»Source Packageåä¼šå¯åŠ¨ä¸‹è½½ï¼Œä¸‹è½½å®Œæˆåè§£å‹åˆ°ä½ è‡ªå·±æŒ‡å®šçš„ç›®å½•<br>ï¼Œæ¯”å¦‚ç¬”è€…çš„è§£å‹è·¯å¾„ä¸º: ~/Downloads/glfw-3.2.1<br>æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p><a id="more"></a>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ <span class="built_in">cd</span> ~/Downloads/glfw-3.2.1</span><br><span class="line">~$ cmake -Bbuild -H. -DCMAKE_INSTALL_PREFIX=/usr/<span class="built_in">local</span> </span><br><span class="line">~$ sudo cmake --build build --target install</span><br></pre></td></tr></table></figure>
<h2 id="2-ä¸‹è½½å®‰è£…GLEW"><a href="#2-ä¸‹è½½å®‰è£…GLEW" class="headerlink" title="2. ä¸‹è½½å®‰è£…GLEW"></a>2. ä¸‹è½½å®‰è£…GLEW</h2><p>ä¸‹è½½é“¾æ¥: <a href="http://glew.sourceforge.net/index.html" target="_blank" rel="noopener">http://glew.sourceforge.net/index.html</a><br>æ‰“å¼€é¡µé¢ï¼Œç‚¹å‡»Sourceåé¢çš„ZIP æˆ–è€…TGZ, ä¸‹è½½æºç å‹ç¼©åŒ…å¹¶è§£å‹<br>æ¯”å¦‚ç¬”è€…è§£å‹ç›®å½•ä¸º: ~/Downloads/glew-2.0.0<br>ç»§ç»­åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~$ <span class="built_in">cd</span> ~/Downloads/glew-2.0.0</span><br><span class="line">~$ make GLEW_DEST=/usr/<span class="built_in">local</span> -j4</span><br><span class="line">~$ sudo make install</span><br></pre></td></tr></table></figure>
<h2 id="3-ä½¿ç”¨Xcodeæ–°å»ºC-Command-Lineé¡¹ç›®-å¹¶åœ¨é¡¹ç›®çš„Build-Settingä¸­è®¾ç½®User-Header-Search-Paths-æ·»åŠ ä¸€ä¸ª-usr-local-include-å’ŒLibrary-Search-Paths-æ·»åŠ ä¸€ä¸ª-usr-local-lib"><a href="#3-ä½¿ç”¨Xcodeæ–°å»ºC-Command-Lineé¡¹ç›®-å¹¶åœ¨é¡¹ç›®çš„Build-Settingä¸­è®¾ç½®User-Header-Search-Paths-æ·»åŠ ä¸€ä¸ª-usr-local-include-å’ŒLibrary-Search-Paths-æ·»åŠ ä¸€ä¸ª-usr-local-lib" class="headerlink" title="3. ä½¿ç”¨Xcodeæ–°å»ºC++ Command Lineé¡¹ç›®,å¹¶åœ¨é¡¹ç›®çš„Build Settingä¸­è®¾ç½®User Header Search Paths(æ·»åŠ ä¸€ä¸ª/usr/local/include)å’ŒLibrary Search Paths(æ·»åŠ ä¸€ä¸ª/usr/local/lib)"></a>3. ä½¿ç”¨Xcodeæ–°å»ºC++ Command Lineé¡¹ç›®,å¹¶åœ¨é¡¹ç›®çš„Build Settingä¸­è®¾ç½®User Header Search Paths(æ·»åŠ ä¸€ä¸ª/usr/local/include)å’ŒLibrary Search Paths(æ·»åŠ ä¸€ä¸ª/usr/local/lib)</h2><h2 id="4-åœ¨Build-Phasesçš„Link-Library-With-Librariesé‡Œé¢æ·»åŠ ä¾èµ–åº“"><a href="#4-åœ¨Build-Phasesçš„Link-Library-With-Librariesé‡Œé¢æ·»åŠ ä¾èµ–åº“" class="headerlink" title="4. åœ¨Build Phasesçš„Link Library With Librariesé‡Œé¢æ·»åŠ ä¾èµ–åº“"></a>4. åœ¨Build Phasesçš„Link Library With Librariesé‡Œé¢æ·»åŠ ä¾èµ–åº“</h2><p>å…¶ä¸­ä»¥ä¸‹çš„ä¾èµ–åº“ä¸ºå¿…éœ€çš„:</p>
<pre><code>IOKit.framework
CoreVideo.framework
Cocoa.framework
OpenGL.framework
libglfw3.a
libGLEW.a</code></pre><h3 id="5-åœ¨mainå‡½æ•°ä¸­è°ƒç”¨glfwInit-ç¼–è¯‘ï¼Œçœ‹æ˜¯å¦æŠ¥é”™ï¼Œ-æ²¡æœ‰æŠ¥é”™åˆ™è¡¨ç¤ºæ‰€éœ€è¦çš„åº“éƒ½å·²ç»å¼•å…¥-å®‰è£…ç¯å¢ƒå°±æ­å»ºå¥½äº†ï¼Œæ¥ä¸‹æ¥ä½ å°±å¯ä»¥å°½æƒ…äº«å—openGLå¸¦æ¥çš„ä¹è¶£äº†"><a href="#5-åœ¨mainå‡½æ•°ä¸­è°ƒç”¨glfwInit-ç¼–è¯‘ï¼Œçœ‹æ˜¯å¦æŠ¥é”™ï¼Œ-æ²¡æœ‰æŠ¥é”™åˆ™è¡¨ç¤ºæ‰€éœ€è¦çš„åº“éƒ½å·²ç»å¼•å…¥-å®‰è£…ç¯å¢ƒå°±æ­å»ºå¥½äº†ï¼Œæ¥ä¸‹æ¥ä½ å°±å¯ä»¥å°½æƒ…äº«å—openGLå¸¦æ¥çš„ä¹è¶£äº†" class="headerlink" title="5. åœ¨mainå‡½æ•°ä¸­è°ƒç”¨glfwInit(); ç¼–è¯‘ï¼Œçœ‹æ˜¯å¦æŠ¥é”™ï¼Œ æ²¡æœ‰æŠ¥é”™åˆ™è¡¨ç¤ºæ‰€éœ€è¦çš„åº“éƒ½å·²ç»å¼•å…¥,å®‰è£…ç¯å¢ƒå°±æ­å»ºå¥½äº†ï¼Œæ¥ä¸‹æ¥ä½ å°±å¯ä»¥å°½æƒ…äº«å—openGLå¸¦æ¥çš„ä¹è¶£äº†"></a>5. åœ¨mainå‡½æ•°ä¸­è°ƒç”¨glfwInit(); ç¼–è¯‘ï¼Œçœ‹æ˜¯å¦æŠ¥é”™ï¼Œ æ²¡æœ‰æŠ¥é”™åˆ™è¡¨ç¤ºæ‰€éœ€è¦çš„åº“éƒ½å·²ç»å¼•å…¥,å®‰è£…ç¯å¢ƒå°±æ­å»ºå¥½äº†ï¼Œæ¥ä¸‹æ¥ä½ å°±å¯ä»¥å°½æƒ…äº«å—openGLå¸¦æ¥çš„ä¹è¶£äº†</h3>]]></content>
      <tags>
        <tag>macOS</tag>
        <tag>OpenGL</tag>
      </tags>
  </entry>
  <entry>
    <title>C#è°ƒç”¨C/C++çš„dllé¡»çŸ¥</title>
    <url>/2017/01/20/170120143234/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/54631165" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/54631165</a></p><h2 id="1-C-ç±»å‹ä¸C-C-ç±»å‹çš„å¯¹åº”å…³ç³»"><a href="#1-C-ç±»å‹ä¸C-C-ç±»å‹çš„å¯¹åº”å…³ç³»" class="headerlink" title="1. C#ç±»å‹ä¸C/C++ç±»å‹çš„å¯¹åº”å…³ç³»"></a>1. C#ç±»å‹ä¸C/C++ç±»å‹çš„å¯¹åº”å…³ç³»</h2><h3 id="åŸºæœ¬æ•°æ®ç±»å‹-C-lt-â€”-gt-C-C"><a href="#åŸºæœ¬æ•°æ®ç±»å‹-C-lt-â€”-gt-C-C" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹(C# &lt;â€”&gt; C/C++)"></a>åŸºæœ¬æ•°æ®ç±»å‹(C# &lt;â€”&gt; C/C++)</h3><ul>
<li>System.Int32,int &lt;â€”&gt; int, long</li>
<li>System.Int64,int64 &lt;â€”&gt; long long, __int64</li>
<li>System.Char, char &lt;â€”&gt; char, byte, unsigned char</li>
<li>System.Int16, short &lt;â€”&gt; short</li>
<li>System.UInt32, uint &lt;â€”&gt; unsigned int, unsigned long</li>
<li>System.UInt16, ushort &lt;â€”&gt; unsigned short, DWORD</li>
<li>System.String, string &lt;â€”&gt; char[], char *, const char *</li>
<li>System.IntPtr &lt;â€”&gt; void *, [Type]* </li>
<li>Sytem.Boolean, bool &lt;â€”&gt; bool, BOOL</li>
</ul><a id="more"></a>

<h2 id="2-C-C-å‡½æ•°å‚æ•°ç±»å‹ä¸C-ç±»å‹å¯¹åº”å…³ç³»"><a href="#2-C-C-å‡½æ•°å‚æ•°ç±»å‹ä¸C-ç±»å‹å¯¹åº”å…³ç³»" class="headerlink" title="2.C/C++å‡½æ•°å‚æ•°ç±»å‹ä¸C#ç±»å‹å¯¹åº”å…³ç³»"></a>2.C/C++å‡½æ•°å‚æ•°ç±»å‹ä¸C#ç±»å‹å¯¹åº”å…³ç³»</h2><pre><code>â‘  åŸºæœ¬çš„æ•°æ®ç±»å‹å¯¹åº”å…³ç³»ä¸1ç›¸åŒï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ä¸ä¸€æ ·çš„åœ°æ–¹
â‘¡ const char * ä¸€èˆ¬ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œ C#ç›´æ¥ä½¿ç”¨stringç±»å‹å³å¯(StringBuilderä¹Ÿå¯ä»¥)
â‘¢ char *ä½œä¸ºè¾“å…¥å‚æ•°çš„æ—¶å€™ï¼Œ C#éœ€è¦ä½¿ç”¨ref stringç±»å‹æˆ–è€…StringBuilderç±»å‹
â‘£ ç»“æ„ä½“æŒ‡é’ˆåšè¾“å…¥å‚æ•°çš„æ—¶å€™ï¼Œ C#ä¸€èˆ¬ä½¿ç”¨ref + å¯¹åº”çš„ç»“æ„ä½“ç±»å‹</code></pre><h2 id="3-C-C-ç»“æ„ä½“ä¸C-ç»“æ„ä½“çš„æˆå‘˜ç±»å‹å¯¹åº”å…³ç³»"><a href="#3-C-C-ç»“æ„ä½“ä¸C-ç»“æ„ä½“çš„æˆå‘˜ç±»å‹å¯¹åº”å…³ç³»" class="headerlink" title="3. C/C++ç»“æ„ä½“ä¸C#ç»“æ„ä½“çš„æˆå‘˜ç±»å‹å¯¹åº”å…³ç³»"></a>3. C/C++ç»“æ„ä½“ä¸C#ç»“æ„ä½“çš„æˆå‘˜ç±»å‹å¯¹åº”å…³ç³»</h2><h3 id="A-å¦‚æœC-C-ç»“æ„ä½“æˆå‘˜ç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œ-C-ä¸­å¯¹åº”çš„ç»“æ„ä½“æˆå‘˜ç±»å‹ä½¿ç”¨1ä¸­çš„å¯¹åº”å…³ç³»å³å¯ï¼Œ-å¦‚"><a href="#A-å¦‚æœC-C-ç»“æ„ä½“æˆå‘˜ç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œ-C-ä¸­å¯¹åº”çš„ç»“æ„ä½“æˆå‘˜ç±»å‹ä½¿ç”¨1ä¸­çš„å¯¹åº”å…³ç³»å³å¯ï¼Œ-å¦‚" class="headerlink" title="A. å¦‚æœC/C++ç»“æ„ä½“æˆå‘˜ç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œ C#ä¸­å¯¹åº”çš„ç»“æ„ä½“æˆå‘˜ç±»å‹ä½¿ç”¨1ä¸­çš„å¯¹åº”å…³ç³»å³å¯ï¼Œ å¦‚:"></a>A. å¦‚æœC/C++ç»“æ„ä½“æˆå‘˜ç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œ C#ä¸­å¯¹åº”çš„ç»“æ„ä½“æˆå‘˜ç±»å‹ä½¿ç”¨1ä¸­çš„å¯¹åº”å…³ç³»å³å¯ï¼Œ å¦‚:</h3><p>C/C++ä»£ç </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Some</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> number;</span><br><span class="line">	<span class="keyword">char</span> character;</span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">32</span>];	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>C#ä»£ç </p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> Some</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> number;</span><br><span class="line">	<span class="keyword">char</span> charactor;</span><br><span class="line">	[<span class="meta">MarshalAs(UnmanagedType.ByValTStr, SizeConst=32)</span>]</span><br><span class="line">	<span class="keyword">string</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="B-å¦‚æœC-C-çš„ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«çš„æˆå‘˜ä»ç„¶æ˜¯ç»“æ„ä½“-å•ä¸ªï¼Œéæ•°ç»„-åˆ™å¯¹åº”çš„C-ç»“æ„ä½“åªéœ€è¦åŒæ ·åŒ…å«ç»“æ„ä½“ï¼Œ-å¦‚ï¼š"><a href="#B-å¦‚æœC-C-çš„ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«çš„æˆå‘˜ä»ç„¶æ˜¯ç»“æ„ä½“-å•ä¸ªï¼Œéæ•°ç»„-åˆ™å¯¹åº”çš„C-ç»“æ„ä½“åªéœ€è¦åŒæ ·åŒ…å«ç»“æ„ä½“ï¼Œ-å¦‚ï¼š" class="headerlink" title="B. å¦‚æœC/C++çš„ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«çš„æˆå‘˜ä»ç„¶æ˜¯ç»“æ„ä½“(å•ä¸ªï¼Œéæ•°ç»„), åˆ™å¯¹åº”çš„C#ç»“æ„ä½“åªéœ€è¦åŒæ ·åŒ…å«ç»“æ„ä½“ï¼Œ å¦‚ï¼š"></a>B. å¦‚æœC/C++çš„ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«çš„æˆå‘˜ä»ç„¶æ˜¯ç»“æ„ä½“(å•ä¸ªï¼Œéæ•°ç»„), åˆ™å¯¹åº”çš„C#ç»“æ„ä½“åªéœ€è¦åŒæ ·åŒ…å«ç»“æ„ä½“ï¼Œ å¦‚ï¼š</h3><p>C/C++ä»£ç </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> number;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">B</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">A</span> <span class="title">a</span>;</span></span><br><span class="line">	<span class="keyword">int</span> otherNumber;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å¯¹åº”çš„C#ä»£ç </p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> A</span><br><span class="line">&#123;</span><br><span class="line">	 <span class="keyword">public</span> <span class="keyword">int</span> number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> B</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">public</span> A a;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> otherNumber;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="C-å¦‚æœC-C-ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«æ•°ç»„-é•¿åº¦å›ºå®š-ï¼Œåˆ™C-ç»“æ„ä½“ä¸­ä¹Ÿä½¿ç”¨æ•°ç»„å¯¹åº”çš„ç±»å‹ï¼Œ-å¦‚ï¼š"><a href="#C-å¦‚æœC-C-ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«æ•°ç»„-é•¿åº¦å›ºå®š-ï¼Œåˆ™C-ç»“æ„ä½“ä¸­ä¹Ÿä½¿ç”¨æ•°ç»„å¯¹åº”çš„ç±»å‹ï¼Œ-å¦‚ï¼š" class="headerlink" title="C. å¦‚æœC/C++ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«æ•°ç»„(é•¿åº¦å›ºå®š)ï¼Œåˆ™C#ç»“æ„ä½“ä¸­ä¹Ÿä½¿ç”¨æ•°ç»„å¯¹åº”çš„ç±»å‹ï¼Œ å¦‚ï¼š"></a>C. å¦‚æœC/C++ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«æ•°ç»„(é•¿åº¦å›ºå®š)ï¼Œåˆ™C#ç»“æ„ä½“ä¸­ä¹Ÿä½¿ç”¨æ•°ç»„å¯¹åº”çš„ç±»å‹ï¼Œ å¦‚ï¼š</h3><p>C/C++ä»£ç <br> <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> number;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">B</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> numbers[<span class="number">10</span>];</span><br><span class="line"> 	<span class="class"><span class="keyword">struct</span> <span class="title">A</span> <span class="title">alist</span>[5];</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br>å¯¹åº”çš„C#ä»£ç </p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> A </span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> number;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> B</span><br><span class="line">&#123;</span><br><span class="line">	[<span class="meta">MarshalAs(UnmanagedType.ByValArray, SizeConst=10, ArraySubType=UnmanagedType.SysInt)</span>]	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span>[] numbers;</span><br><span class="line">	[<span class="meta">MarshalAs(UnmanagedType.ByValArray, SizeConst=10, ArraySubType=UnmanagedType.Struct)</span>]</span><br><span class="line">	<span class="keyword">public</span> A[] alist;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="D-å¦‚æœC-C-çš„ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«å¦ä¸€ä¸ªç»“æ„ä½“çš„æŒ‡é’ˆï¼ŒC-å¯¹åº”çš„ç»“æ„ä½“ä¸­ä¸€å¾‹ä½¿ç”¨IntPtrç±»å‹ï¼Œ-å¦‚ï¼š"><a href="#D-å¦‚æœC-C-çš„ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«å¦ä¸€ä¸ªç»“æ„ä½“çš„æŒ‡é’ˆï¼ŒC-å¯¹åº”çš„ç»“æ„ä½“ä¸­ä¸€å¾‹ä½¿ç”¨IntPtrç±»å‹ï¼Œ-å¦‚ï¼š" class="headerlink" title="D. å¦‚æœC/C++çš„ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«å¦ä¸€ä¸ªç»“æ„ä½“çš„æŒ‡é’ˆï¼ŒC#å¯¹åº”çš„ç»“æ„ä½“ä¸­ä¸€å¾‹ä½¿ç”¨IntPtrç±»å‹ï¼Œ å¦‚ï¼š"></a>D. å¦‚æœC/C++çš„ç»“æ„ä½“æˆå‘˜ä¸­åŒ…å«å¦ä¸€ä¸ªç»“æ„ä½“çš„æŒ‡é’ˆï¼ŒC#å¯¹åº”çš„ç»“æ„ä½“ä¸­ä¸€å¾‹ä½¿ç”¨IntPtrç±»å‹ï¼Œ å¦‚ï¼š</h3><p>C/C++ä»£ç </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> number;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">B</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> tag;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">A</span> *<span class="title">pA</span>;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹åº”çš„C#ä»£ç </p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> A</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> number;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> B</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> tag;</span><br><span class="line">	<span class="keyword">public</span> IntPtr pA;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> ç„¶ååœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦ç”¨åˆ°Marshalç±»çš„StructureToPtrå’ŒPtrToStructureæ–¹æ³•è¿›è¡Œè½¬æ¢<br>è½¬æ¢æ–¹æ³•å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰ç»“æ„ä½“è½¬æ¢æˆIntPtr</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">A a = <span class="keyword">new</span> A();</span><br><span class="line">B b = <span class="keyword">new</span> B();</span><br><span class="line">IntPtr pA= Marshal.AllocHGlobal(Marshal.SizeOf(a));</span><br><span class="line">Marshal.StructureToPtr(a, pA, <span class="literal">false</span>);</span><br><span class="line">b.pA = pA;</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰IntPtr è½¬æ¢æˆç»“æ„ä½“</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">B b = <span class="keyword">new</span> B();</span><br><span class="line"><span class="comment">//...çœç•¥ä¸­é—´çš„æ“ä½œè¿‡ç¨‹</span></span><br><span class="line">A aInB = (A)Marshal.PtrToStructure(b.pA, <span class="keyword">typeof</span>(A))</span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line">A aInB = <span class="keyword">new</span> A();</span><br><span class="line">Marshal.PtrToStructure(b.pA, aInB);</span><br></pre></td></tr></table></figure>
<h2 id="4-å…³äºç±»å‹è½¬æ¢ä¸­çš„æ•°ç»„é•¿åº¦"><a href="#4-å…³äºç±»å‹è½¬æ¢ä¸­çš„æ•°ç»„é•¿åº¦" class="headerlink" title="4. å…³äºç±»å‹è½¬æ¢ä¸­çš„æ•°ç»„é•¿åº¦"></a>4. å…³äºç±»å‹è½¬æ¢ä¸­çš„æ•°ç»„é•¿åº¦</h2><ul>
<li><p>C/C++ä¸­ï¼Œå¦‚æœæ˜¯charç±»å‹çš„æ•°ç»„ï¼ˆä¸€èˆ¬è¡¨ç¤ºæœ€å¤§é•¿åº¦ä¸è¶…è¿‡æŸä¸ªæ•°å­—çš„å­—ç¬¦ä¸²ï¼‰ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œå‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œå¦‚æœC#ä¸­çš„stringå­—ç¬¦ä¸²å­—èŠ‚æ•°è¶…è¿‡äº†C/C++ä¸­çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œåˆ™ä¼šå‘ç”Ÿæˆªæ–­ï¼Œ å¦‚C/C++ä¸­ï¼Œ char name[3]; ä½†æ˜¯åœ¨C#ä¸­å´ä½¿ç”¨äº†string name = â€œJackâ€,å®é™…ä¼ åˆ°C/C++ä¸­ï¼Œ nameä¸­çš„å†…å®¹ä¸ºâ€œJaâ€,å¤šä½™çš„éƒ¨åˆ†æ²¡æœ‰å¡«å……è¿›æ¥</p>
</li>
<li><p>C/C++ä¸­ä½¿ç”¨çš„æ•°ç»„ä¸ºå®šé•¿æ•°ç»„ï¼Œåœ¨å‚æ•°ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œå¦‚æœC#ä¸­ä½¿ç”¨çš„æ•°ç»„é•¿åº¦æ¯”C/C++ä¸­æ•°ç»„é•¿åº¦çŸ­ï¼Œåˆ™ä¼šå‘ç”ŸSystem.ArgumentExceptionå¼‚å¸¸ï¼Œæç¤ºâ€œæœªèƒ½å°é€ç±»å‹ï¼Œå› ä¸ºåµŒå…¥æ•°ç»„å®ä¾‹çš„é•¿åº¦ä¸å¸ƒå±€ä¸­å£°æ˜çš„é•¿åº¦ä¸åŒ¹é…â€œ(C#çš„stringåˆ°C/C++çš„char æ•°ç»„ä¸ä¼šï¼Œä½†æ˜¯C#char[]åˆ°C/C++çš„charæ•°ç»„ä¼šæœ‰æ­¤å¼‚å¸¸)ï¼Œå› æ­¤, æˆ‘ä»¬è¦å®šä¹‰ç›¸åŒé•¿åº¦çš„æ•°ç»„æ‰èƒ½æ­£å¸¸å·¥ä½œï¼ˆC#æ•°ç»„é•¿åº¦æ›´å¤§çš„æ—¶å€™ï¼Œä¼šå¿½ç•¥å¤šä½™çš„éƒ¨åˆ†ï¼‰</p>
</li>
</ul>
]]></content>
      <tags>
        <tag>C/C++</tag>
        <tag>C#</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»Cåˆ°C++çœ‹é¢ç›¸å¯¹è±¡(æ·±å…¥äº†è§£C++çš„æˆå‘˜å‡½æ•°)</title>
    <url>/2017/01/18/170118150250/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/54601314" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/54601314</a></p><p> æˆ‘ä»¬éƒ½çŸ¥é“Cæ˜¯ä¸€é—¨é¢ç›¸è¿‡ç¨‹çš„è¯­è¨€ï¼Œåœ¨Cçš„ä¸–ç•Œé‡Œæ˜¯æ²¡æœ‰é¢ç›¸å¯¹è±¡è¿™ä¸ªæ¦‚å¿µçš„ï¼Œä½†æ˜¯Cè¯­è¨€ä¸ºæˆ‘ä»¬æä¾›çš„ç¥å…µåˆ©å™¨ï¼Œä»æ—§å¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨é¢ç›¸å¯¹è±¡çš„æ€ç»´æ–¹å¼<br>åœ¨Cè¯­è¨€é‡Œï¼Œæˆ‘ä»¬æ¯åšä¸€ä¸ªæ“ä½œï¼Œéƒ½éœ€è¦å†™ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯è¯¥å‡½æ•°éƒ½æ˜¯è¿‡ç¨‹åŒ–çš„ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰ä¸¤ç§ç¥å…µåˆ©å™¨ï¼Œä¸€ä¸ªå«æŒ‡é’ˆï¼Œä¸€ä¸ªå«ç»“æ„ä½“<br>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ<br>é¢ç›¸å¯¹è±¡çš„æœ€åŸºæœ¬çš„åŠŸèƒ½å°±æ˜¯å¯¹æ•°æ®çš„å°è£…ï¼Œåœ¨Cè¯­è¨€çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬æœ‰ç»“æ„ä½“è¿™ä¸ªæ³•å®ï¼ŒåŒæ ·å¯ä»¥å°†æ•°æ®æ‰“åŒ…æ•´æ•´ä½“ï¼Œç„¶åé€šè¿‡æŒ‡é’ˆçš„æ–¹å¼ï¼Œå°†ç»“æ„ä½“ä½œä¸ºå‚æ•°åœ¨å‡½æ•°ä¸­è¿›è¡Œä¼ é€’<br>ä¸¾ä¸ªä¾‹å­</p><a id="more"></a>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Book</span> &#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">32</span>]; <span class="comment">//ä¹¦å</span></span><br><span class="line">	<span class="keyword">char</span> author[<span class="number">32</span>]; <span class="comment">//ä½œè€…å</span></span><br><span class="line">	<span class="keyword">int</span> total; <span class="comment">//æ€»é¡µæ•°</span></span><br><span class="line">	<span class="keyword">int</span> price;<span class="comment">//ä»·æ ¼</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Book</span> <span class="title">Book</span>;</span></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">book_init</span><span class="params">(Book *book, <span class="keyword">const</span> <span class="keyword">char</span> *name, <span class="keyword">const</span> <span class="keyword">char</span> *author, <span class="keyword">int</span> total, <span class="keyword">int</span> price)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">strcpy</span>(book-&gt;name, name);</span><br><span class="line">	<span class="built_in">strcpy</span>(book-&gt;author, author);</span><br><span class="line">	book-&gt;total = total;</span><br><span class="line">	book-&gt;price = price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">book_update_price</span><span class="params">(Book *book, <span class="keyword">int</span> newPrice)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	book-&gt;price = price;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šçš„ä¾‹å­å¾ˆç®€å•ï¼Œåˆå§‹åŒ–ä¸€æœ¬ä¹¦ä»¥åŠæ›´æ–°ä¹¦ä»·ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦åƒä»¥ä¸‹æ–¹å¼è°ƒç”¨</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Book book;</span><br><span class="line">book_init(&amp;book, <span class="string">"WPF ç¼–ç¨‹å®å…¸"</span>, <span class="string">"Matthew MacDonald"</span>, <span class="number">934</span>, <span class="number">128</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">book_update_price(&amp;book, <span class="number">100</span>); <span class="comment">//é™ä»·</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šçš„è¿™äº›ä½¿ç”¨çš„éƒ½æ˜¯é¢ç›¸è¿‡ç¨‹çš„æ€ç»´ã€‚<br>æ‰€è°“é¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼Œå°±å¥½æ¯”â€œè®©æŸæŸå»åšæŸäº‹â€ï¼Œè€Œé¢å‘å¯¹è±¡å‘¢ï¼Œå°±å¥½æ¯”â€œæŸæŸå»åšæŸäº‹â€ã€‚ä»å­—é¢æ„æ€æ¥çœ‹ï¼Œé¢å‘è¿‡ç¨‹è²Œä¼¼å¤šäº†ä¸ªâ€œé«˜çº§é¢†å¯¼â€ï¼Œè€Œé¢å‘å¯¹è±¡æ˜¾å¾—æ›´è‡ªç”±ã€‚<br>###æˆ‘ä»¬å†å˜ä¸€ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Book</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">32</span>];</span><br><span class="line">	<span class="keyword">char</span> author[<span class="number">32</span>];</span><br><span class="line">	<span class="keyword">int</span> price;</span><br><span class="line">	<span class="keyword">void</span> (*init)(Book *book, <span class="keyword">const</span> <span class="keyword">char</span> *name, <span class="keyword">const</span> <span class="keyword">char</span> *author, <span class="keyword">int</span> price);</span><br><span class="line">	<span class="keyword">void</span> (*update_price)(Book *book, <span class="keyword">int</span> newPrice);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">book_init</span><span class="params">(Book *book, <span class="keyword">const</span> <span class="keyword">char</span> *name, <span class="keyword">const</span> <span class="keyword">char</span> *author, <span class="keyword">int</span> price)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">strcpy</span>(book-&gt;name, name);</span><br><span class="line">	<span class="built_in">strcpy</span>(book-&gt;author, author);</span><br><span class="line">	book-&gt;total = total;</span><br><span class="line">	book-&gt;price = price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">book_update_price</span><span class="params">(Book *book, <span class="keyword">int</span> newPrice)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	book-&gt;price = price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">book_create</span><span class="params">(Book *book)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	book-&gt;init = book_init;</span><br><span class="line">	book-&gt;update_price = book_update_price;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åä½ å°±å¯ä»¥åƒä»¥ä¸‹ä¸€æ ·ä½¿ç”¨äº†</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Book book;</span><br><span class="line">book_create(&amp;book);</span><br><span class="line"></span><br><span class="line">book.init(&amp;book, <span class="string">"WPF ç¼–ç¨‹å®å…¸"</span>, <span class="string">"Matthew MacDonald"</span>, <span class="number">128</span>);</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">book.update_price(&amp;book, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¿™ç§æ–¹å¼æ¥è°ƒç”¨ï¼Œçœ‹èµ·æ¥æœ‰äº†ä¸€ç§â€œä¹¦åšäº†æŸæŸäº‹â€çš„é¢å‘å¯¹è±¡çš„é”™è§‰<br>###C++æ­£æ˜¯å€Ÿé‰´äº†è¿™ä¸€ç‚¹ï¼Œä»è€Œäº§ç”Ÿäº†Classï¼ˆç±»ï¼‰<br>å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªclassçš„æ—¶å€™ï¼Œæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æˆå‘˜å‡½æ•°å°±ä½¿ç”¨äº†æˆ‘ä»¬ä¸Šé¢çš„æ€æƒ³ï¼Œå‚è€ƒå¦‚ä¸‹ä»£ç </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span> &#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">32</span>];</span><br><span class="line">	<span class="keyword">char</span> author[<span class="number">32</span>;</span><br><span class="line">	<span class="keyword">int</span> price;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name, <span class="keyword">const</span> <span class="keyword">char</span> *author, <span class="keyword">int</span> price)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">strcpy</span>(<span class="keyword">this</span>-&gt;name, name);</span><br><span class="line">		<span class="built_in">strcpy</span>(<span class="keyword">this</span>-&gt;author, author);</span><br><span class="line">		<span class="keyword">this</span>-&gt;price = price;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">updatePrice</span><span class="params">(<span class="keyword">int</span> price)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;price = price;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ˜¯ç”¨èµ·æ¥æ˜¾å¾—æ›´ç®€å•</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Book book;</span><br><span class="line">book.init(<span class="string">"WPF ç¼–ç¨‹å®å…¸"</span>, <span class="string">"Matthew MacDonald"</span>, <span class="number">128</span>):</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">book.updatePrice(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<p>çœ‹èµ·æ¥ä¸æˆ‘ä»¬ä½¿ç”¨Cè¯­è¨€æ¨¡ä»¿çš„é¢å‘å¯¹è±¡æ˜¯ä¸æ˜¯å¾ˆåƒï¼Ÿ<br>æ¥ä¸‹æ¥æˆ‘ä»¬æ³¨æ„åˆ°ä¸€ä¸ªå…³é”®å­—this, æŒ‡çš„æ˜¯è°ƒç”¨å‡½æ•°çš„æŸä¸ªå¯¹è±¡ï¼Œè°è°ƒç”¨äº†ï¼ŒthisæŒ‡çš„å°±æ˜¯è°ï¼Œä¸Šé¢çš„bookè°ƒç”¨initå’ŒupdatePriceçš„æ—¶å€™ï¼ŒthisæŒ‡çš„å°±æ˜¯bookè¿™ä¸ªå¯¹è±¡ã€‚</p>
<p>æˆ‘æƒ³ä½ åº”è¯¥æ˜ç™½äº†ï¼ŒC++çš„é¢å‘å¯¹è±¡ï¼Œå°±æ˜¯ä½¿ç”¨äº†æˆ‘ä»¬çš„ä¸Šè¿°æ¨¡æ‹Ÿé¢å‘å¯¹è±¡çš„æ€ç»´ï¼Œç„¶åC++è‡ªå·±å°†å¯¹è±¡æœ¬èº«ä½œä¸ºä¸€ä¸ªéšå«çš„å‚æ•°ä¼ é€’ç»™äº†æˆ‘ä»¬çš„æˆå‘˜å‡½æ•°ï¼Œå½“ç„¶ï¼Œè¿™äº›å¹¶ä¸åŒ…æ‹¬C++é¢å‘å¯¹è±¡ä¸­æ›´å¼ºå¤§çš„ç»§æ‰¿å’Œå¤šæ€ã€‚<br>åˆ°æ­¤æˆ‘è§‰å¾—ä½ åº”è¯¥æ˜ç™½äº†C++æˆå‘˜å‡½æ•°ä¸æ™®é€šå‡½æ•°ä¹‹é—´çš„åŒºåˆ«ä»¥åŠå…¶å†…éƒ¨çš„åŸç†ã€‚<br>å†çœ‹ä¸‹é¢ä»£ç </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Student(<span class="keyword">const</span> <span class="keyword">char</span> *name) &#123; <span class="built_in">strcpy</span>(<span class="keyword">this</span>-&gt;name, name);&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">makeTest</span><span class="params">()</span> </span>&#123; <span class="built_in">std</span>::<span class="built_in">cout</span>&lt;&lt;<span class="string">"æˆ‘åœ¨è€ƒè¯•"</span>&lt;&lt;<span class="built_in">std</span>::<span class="built_in">endl</span>;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">appear</span><span class="params">()</span> </span>&#123; <span class="built_in">std</span>::<span class="built_in">cout</span>&lt;&lt;<span class="string">"My name is "</span>&lt;&lt;name&lt;&lt;<span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">32</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨çœ‹å¦‚ä¸‹è°ƒç”¨</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Student *pStu;</span><br><span class="line"></span><br><span class="line">pStu-&gt;makeTest(); <span class="comment">// â‘ </span></span><br><span class="line">pStu-&gt;appear(); <span class="comment">// â‘¡</span></span><br></pre></td></tr></table></figure>
<p>å¾ˆå¤šäººéƒ½ä¼šæƒ³åˆ°ï¼ŒpStuæ˜¯ä¸€ä¸ªæœªåˆå§‹åŒ–çš„å˜é‡ï¼Œä»¥ä¸Šâ‘ â‘¡ä¸¤ç§è°ƒç”¨éƒ½ä¼šå¯¼è‡´å´©æºƒã€‚å†ä»”ç»†æƒ³æƒ³çœ‹ï¼ŒçœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿ<br>æ¯”è¾ƒç»†å¿ƒçš„åŒå­¦ä¼šå‘ç°ï¼Œåœ¨æŸäº›ç¼–è¯‘å™¨ä¸Šè¿è¡Œï¼Œæˆ‘ä»¬å´å¯ä»¥çœ‹åˆ°â‘ è°ƒç”¨åçš„æ‰“å°ä¿¡æ¯ï¼Œè€Œè¿è¡Œâ‘¡ä»¥åï¼Œç¨‹åºå´©æºƒæ‰äº†ï¼Œæˆ‘æƒ³ç»†å¿ƒçš„ä½ åº”è¯¥çŸ¥é“è¿™æ˜¯ä»€ä¹ˆåŸå› äº†ã€‚<br>å¾ˆç®€å•ï¼Œæˆ‘ä»¬åœ¨â‘ å¤„è°ƒç”¨çš„makeTest()å‡½æ•°ï¼Œç¿»è¯‘æˆCè¯­è¨€çš„å½¢å¼åº”è¯¥æ˜¯</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">makeTest</span><span class="params">(Student *<span class="keyword">this</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//æ‰“å°â€œæˆ‘åœ¨è€ƒè¯•â€</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">makeTest(pStu);</span><br></pre></td></tr></table></figure>
<p>åœ¨ä»£ç é‡Œé¢ï¼ŒpStuè™½ç„¶æ²¡æœ‰åˆå§‹åŒ–ï¼Œä½†æ˜¯åœ¨ä¸Šé¢çš„Cè¯­è¨€ç‰ˆçš„makeTestä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°thisè¿™ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å³ä½¿è¿™ä¸ªå‚æ•°æŒ‡é’ˆæ˜¯ä¸€ä¸ªé‡æŒ‡é’ˆæˆ–è€…ç©ºæŒ‡é’ˆï¼Œéƒ½ä¸ä¼šå‡ºç°å´©æºƒç°è±¡ï¼Œä½†æ˜¯å¯¹äºâ‘¡å¤„çš„è°ƒç”¨ï¼Œä½¿ç”¨çš„appear()å‡½æ•°ä¸­ä½¿ç”¨åˆ°äº†this, ä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶çš„thisæ˜¯ä¸€ä¸ªæœªåˆå§‹åŒ–çš„æŒ‡é’ˆï¼ˆæˆ‘ä»¬ç§°ä¸ºé‡æŒ‡é’ˆï¼Œä¸æ˜¯ç©ºæŒ‡é’ˆï¼‰ï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ä»€ä¹ˆåœ°æ–¹æˆ‘ä»¬å¹¶ä¸çŸ¥é“ï¼Œå¯èƒ½æ˜¯æ²¡æœ‰æƒé™æ“ä½œçš„ä¸€å—å†…å­˜ï¼Œä¹Ÿå¯èƒ½æ­£å¥½æ˜¯ç©ºæŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯å·²ç»åˆ†é…çš„æŸä¸ªå†…å­˜</p>
<p>æˆ‘ä»¬å†åšä¸€ä¸ªå°å®éªŒ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span> != <span class="literal">nullptr</span>) <span class="comment">//C++11ä¸­å¼•å…¥çš„nullptrï¼Œ è¡¨ç¤ºç©ºæŒ‡é’ˆï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å»å¤šå¤šäº†è§£C++11</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span>&lt;&lt;<span class="string">"æˆ‘ä¸æ˜¯ç©ºçš„"</span>&lt;&lt;<span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span>&lt;&lt;<span class="string">"æˆ‘æ˜¯ç©ºçš„"</span>&lt;&lt;<span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Test t;</span><br><span class="line">	Test *p = <span class="literal">nullptr</span>; <span class="comment">//è®¾ç½®åˆå§‹å€¼ï¼Œé˜²æ­¢ä½¿ç”¨æœªåˆå§‹åŒ–æŒ‡é’ˆ	</span></span><br><span class="line">	p-&gt;test();</span><br><span class="line">	</span><br><span class="line">	p = &amp;t;</span><br><span class="line">	p-&gt;test();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ èƒ½çŒœå‡ºæœ€ç»ˆçš„æ‰“å°ä¿¡æ¯å—ï¼Ÿ(</p>
]]></content>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>é’ˆå¯¹ç¬¬ä¸‰æ–¹SDKä¸­ä¸æ°å½“çš„char *ç±»å‹çš„å‡ ç‚¹çœ‹æ³•</title>
    <url>/2017/01/10/170110173549/</url>
    <content><![CDATA[<p>åŸæ–‡é“¾æ¥:<br><a href="https://blog.csdn.net/oyoung_2012/article/details/54315963" target="_blank" rel="noopener">https://blog.csdn.net/oyoung_2012/article/details/54315963</a></p><h2 id="å¾ˆå¤šæ—¶å€™ï¼Œä¼šé‡åˆ°ç¬¬ä¸‰æ–¹æ¥å£ä¸­æœ¬æ¥éœ€è¦ä½¿ç”¨const-char-ç±»å‹å‚æ•°çš„æ—¶å€™ï¼Œå´ä½¿ç”¨äº†char-ç±»å‹ï¼Œä»¥è‡³äºæˆ‘ä»¬åŸæœ¬å¯ä»¥ä½¿ç”¨å¦‚someFunction-â€œsomeâ€-å´ç¼–è¯‘æŠ¥é”™ï¼ˆå¦‚æŸåº·çš„SDKï¼‰"><a href="#å¾ˆå¤šæ—¶å€™ï¼Œä¼šé‡åˆ°ç¬¬ä¸‰æ–¹æ¥å£ä¸­æœ¬æ¥éœ€è¦ä½¿ç”¨const-char-ç±»å‹å‚æ•°çš„æ—¶å€™ï¼Œå´ä½¿ç”¨äº†char-ç±»å‹ï¼Œä»¥è‡³äºæˆ‘ä»¬åŸæœ¬å¯ä»¥ä½¿ç”¨å¦‚someFunction-â€œsomeâ€-å´ç¼–è¯‘æŠ¥é”™ï¼ˆå¦‚æŸåº·çš„SDKï¼‰" class="headerlink" title="å¾ˆå¤šæ—¶å€™ï¼Œä¼šé‡åˆ°ç¬¬ä¸‰æ–¹æ¥å£ä¸­æœ¬æ¥éœ€è¦ä½¿ç”¨const char *ç±»å‹å‚æ•°çš„æ—¶å€™ï¼Œå´ä½¿ç”¨äº†char *ç±»å‹ï¼Œä»¥è‡³äºæˆ‘ä»¬åŸæœ¬å¯ä»¥ä½¿ç”¨å¦‚someFunction(â€œsomeâ€), å´ç¼–è¯‘æŠ¥é”™ï¼ˆå¦‚æŸåº·çš„SDKï¼‰"></a>å¾ˆå¤šæ—¶å€™ï¼Œä¼šé‡åˆ°ç¬¬ä¸‰æ–¹æ¥å£ä¸­æœ¬æ¥éœ€è¦ä½¿ç”¨const char *ç±»å‹å‚æ•°çš„æ—¶å€™ï¼Œå´ä½¿ç”¨äº†char *ç±»å‹ï¼Œä»¥è‡³äºæˆ‘ä»¬åŸæœ¬å¯ä»¥ä½¿ç”¨å¦‚someFunction(â€œsomeâ€), å´ç¼–è¯‘æŠ¥é”™ï¼ˆå¦‚æŸåº·çš„SDKï¼‰</h2><a id="more"></a>
<p>###é’ˆå¯¹ä»¥ä¸Šçš„è¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¹ç¬¬ä¸‰æ–¹SDKè¿›è¡Œæœ¬åœ°å°è£…çš„æ—¶å€™å¯¹å‚æ•°ç±»å‹è¿›è¡Œä¿®æ”¹ï¼Œæ¯”å¦‚:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//SDK å¤´æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Login</span><span class="params">(<span class="keyword">char</span> *ip, <span class="keyword">unsigned</span> <span class="keyword">short</span> port, <span class="keyword">char</span> *userName, <span class="keyword">char</span> *password)</span></span>; <span class="comment">//è¿™é‡Œæœ¬æ¥åº”è¯¥è¦ä½¿ç”¨const char *ç±»å‹ä»£æ›¿char *ç±»å‹ï¼Œå› ä¸ºè¯¥å‡½æ•°æ ¹æœ¬ä¸ä¼šä¿®æ”¹å‚æ•°çš„å€¼ï¼Œä½†æ˜¯åŸºäºæŸæŸç¨‹åºå‘˜çš„æŸæŸåŸå› ï¼Œå´æ²¡æœ‰è¿™æ ·ä½¿ç”¨ï¼Œä»¥è‡³äºæˆ‘ä»¬è°ƒç”¨è¯¥æ¥å£æ—¶ï¼Œå¹¶ä¸èƒ½åƒä»¥ä¸‹æ–¹å¼è°ƒç”¨</span></span><br><span class="line"></span><br><span class="line">Login(<span class="string">"127.0.0.1"</span>, <span class="number">8000</span>, <span class="string">"admin"</span>, <span class="string">"admin"</span>); <span class="comment">//ç¼–è¯‘æŠ¥é”™</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æˆ‘ä»¬åº”è¯¥å°†å…¶è¿›è¡Œæ­£ç¡®å‚æ•°ç±»å‹çš„å°è£…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SDK</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *ip, <span class="keyword">unsigned</span> <span class="keyword">short</span> port, <span class="keyword">const</span> <span class="keyword">char</span> *userName, <span class="keyword">const</span> <span class="keyword">char</span> *password)</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">char</span> *<span class="title">transform</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pChar)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SDK::login(<span class="keyword">const</span> <span class="keyword">char</span> *ip, <span class="keyword">unsigned</span> <span class="keyword">short</span> port, <span class="keyword">const</span> <span class="keyword">char</span> *userName, <span class="keyword">const</span> <span class="keyword">char</span> *password) &#123;</span><br><span class="line">		<span class="keyword">char</span> *newIp = transform(ip);</span><br><span class="line">		<span class="keyword">char</span> *newUserName = transform(userName);</span><br><span class="line">		<span class="keyword">char</span> *newPassword = transform(password);</span><br><span class="line">		Login(newIp, port, newUserName, newPassword);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> * SDK::transform(<span class="keyword">const</span> <span class="keyword">char</span> *pChar) &#123;</span><br><span class="line">	<span class="comment">//æ–¹æ¡ˆ1ï¼Œä½¿ç”¨const_cast</span></span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">const_cast</span>&lt;<span class="keyword">char</span> *&gt;(pChar);</span><br><span class="line">	<span class="comment">//æ–¹æ¡ˆ2ï¼Œä½¿ç”¨è”åˆä½“</span></span><br><span class="line">	<span class="keyword">union</span> &#123; <span class="keyword">char</span> *p; <span class="keyword">const</span> <span class="keyword">char</span> *q;&#125; t;</span><br><span class="line">	t.q = pChar;</span><br><span class="line">	<span class="keyword">return</span> t.p;</span><br><span class="line">	<span class="comment">//æ–¹æ¡ˆ3ï¼Œ åˆ©ç”¨æ•´æ•°ç±»å‹</span></span><br><span class="line">	<span class="keyword">int</span> address = (<span class="keyword">int</span>)pChar;</span><br><span class="line">	<span class="keyword">return</span> (<span class="keyword">char</span> *)address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
</search>
